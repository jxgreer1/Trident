Loaded MCU 'beacon' 27 commands (Beacon 1.0.0 / )
MCU 'beacon' config: ADC_MAX=4095 BEACON_ADC_SMOOTH_COUNT=16 CLOCK_FREQ=32000000 MCU=beacon STATS_SUMSQ_BASE=256
Configured MCU 'beacon' (0 moves)
===== Config file =====
[exclude_object]

[idle_timeout]
timeout = 3600

[force_move]
enable_force_move = True

[respond]
default_type = echo

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	CANCEL_PRINT

[pause_resume]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
variable_park = True
gcode = 
	TURN_OFF_HEATERS
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	PRINT_END
	BASE_CANCEL_PRINT

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32f446xx_2D0053000E51323130373733-if00

[temperature_sensor Spider]
sensor_type = temperature_mcu
min_temp = 10
max_temp = 100

[board_pins spider]
aliases = 
	
	X_STEP=PE11, X_DIR=PE10, X_ENABLE=PE9,
	Y_STEP=PD8, Y_DIR=PB12, Y_ENABLE=PD9,
	Z_STEP=PD14, Z_DIR=PD13, Z_ENABLE=PD15,
	E0_STEP=PD5, E0_DIR=PD6, E0_ENABLE=PD4,
	E1_STEP=PE6, E1_DIR=PC13, E1_ENABLE=PE5,
	E2_STEP=PE2, E2_DIR=PE4, E2_ENABLE=PE3,
	E3_STEP=PD12, E3_DIR=PC4, E3_ENABLE=PE8,
	E4_STEP=PE1, E4_DIR=PE0, E4_ENABLE=PC5,
	
	X_MIN=PB14, X_MAX=PA1,
	Y_MIN=PB13, Y_MAX=PA2,
	Z_MIN=PA0, Z_MAX=PA3,
	
	X_UART=PE7, Y_UART=PE15, Z_UART=PD10,
	E0_UART=PD7, E1_UART=PC14, E2_UART=PC15,
	E3_UART=PA15, E4_UART=PD11,
	
	E_HEATER=PB15, E_THERMISTOR=PC0,
	E1_HEATER=PC8, E1_THERMISTOR=PC1,
	E2_HEATER=PB3, E2_THERMISTOR=PC2,
	BED_HEATER=PB4, BED_THERMISTOR=PC3,
	FAN0=PB0, FAN1=PB1, FAN2=PB2,
	
	LED-R=PB6, LED-G=PB5, LED-B=PB7,
	
	EXP1_1=PC9, EXP1_3=PC11, EXP1_5=PC10, EXP1_7=PD0, EXP1_9=<GND>,
	EXP1_2=PA8, EXP1_4=PD2, EXP1_6=PC12, EXP1_8=PD1, EXP1_10=<5V>,
	
	EXP2_1=PA6, EXP2_3=PC6, EXP2_5=PC7, EXP2_7=PB10, EXP2_9=<GND>,
	EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<5V>

[mcu rpi]
serial = /tmp/klipper_host_mcu

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 10
max_temp = 100

[gcode_shell_command rpi_fan_50]
command = i2cset -y 1 0x01a 0x32
timeout = 30.
verbose = True

[gcode_shell_command rpi_fan_25]
command = i2cset -y 1 0x01a 0x19
timeout = 30.
verbose = True

[gcode_macro rpi_fan_50]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_50

[gcode_macro rpi_fan_25]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_25

[mcu sht36]
canbus_uuid = 943ff2eb48fd

[temperature_sensor sht36]
sensor_type = temperature_mcu
sensor_mcu = sht36

[printer]
kinematics = corexy
max_velocity = 800
max_accel = 20000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[extruder]
sensor_pin = sht36:PA3
sensor_type = PT1000
heater_pin = sht36:PA8
min_temp = 10
max_temp = 270
max_power = 1.0
min_extrude_temp = 10
control = pid
pid_kp = 20.362
pid_ki = 2.225
pid_kd = 46.579
pressure_advance_smooth_time = 0.040
max_extrude_only_velocity = 120
max_extrude_only_accel = 800
max_extrude_only_distance = 1150
max_extrude_cross_section = 9999
nozzle_diameter = 0.400
filament_diameter = 1.75
step_pin = sht36:PB4
dir_pin = !sht36:PB3
enable_pin = !sht36:PA15
full_steps_per_rotation = 200
rotation_distance = 22.66103
gear_ratio = 50:10
microsteps = 16
pressure_advance = 0.05

[temperature_sensor chamber]
sensor_type = NTC 100K MGB18-104F39050L32
sensor_pin = PC2
min_temp = -100
max_temp = 100
gcode_id = C

[heater_bed]
heater_pin = PB4
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PB0
max_power = 0.9
min_temp = -160
max_temp = 120
control = pid
pid_kp = 41.450
pid_ki = 1.322
pid_kd = 324.866

[multi_pin stepper_drivers_multipin]
pins = PB5, PB6, PB7

[controller_fan stepper_drivers]
pin = multi_pin:stepper_drivers_multipin
hardware_pwm = False
max_power = 1.0
fan_speed = 0.75
shutdown_speed = 0.0
stepper = stepper_x, stepper_y

[heater_fan controller_fan]
pin = PB2
cycle_time = 0.00004
off_below = 0.1
kick_start_time = 0.5
heater = heater_bed
heater_temp = 50.0
max_power = 1.0

[heater_fan hotend_fan]
pin = sht36:PB10
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 40.0

[fan]
pin = sht36:PB11
max_power = 0.85
cycle_time = 0.00005
kick_start_time = 0
off_below = 0.0
shutdown_speed = 0

[fan_generic stepper_fans]
pin = PA13
max_power = 0.5
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.0001

[fan_generic rebreather]
pin = PA14
max_power = 1.0
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.00010

[gcode_macro rebreather_start_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.5

[gcode_macro rebreather_end_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.7
	UPDATE_DELAYED_GCODE ID=rebreather_stop_delayed DURATION=900

[delayed_gcode rebreather_stop_delayed]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.0

[display]
lcd_type = uc1701
cs_pin = PC11
a0_pin = PD2
rst_pin = PC10
encoder_pins = ^PC6,^PC7
click_pin = ^!PA8
contrast = 63
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6
spi_software_sclk_pin = PA5
display_group = __voron_display_16x4

[gcode_macro M300]
gcode = SET_PIN PIN=BEEPER_pin VALUE={S}
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[neopixel mini12864]
pin = PC12
chain_count = 60
initial_red = 0.1
initial_green = 0.5
initial_blue = 0.0
color_order = RGB

[display_template _heater_temperature]
param_heater_name = "extruder"
text = 
	{% if param_heater_name in printer %}
	{% set heater = printer[param_heater_name] %}
	
	{% if param_heater_name == "heater_bed" %}
	{% if heater.target %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~bed_heat{frame}~
	{% else %}
	~bed~
	{% endif %}
	{% else %}
	~extruder~
	{% endif %}
	
	{ "%3.0f" % (heater.temperature,) }
	
	{% if heater.target and (heater.temperature - heater.target)|abs > 2 %}
	~right_arrow~
	{ "%0.0f" % (heater.target,) }
	{% endif %}
	~degrees~
	{% endif %}

[display_template _fan_speed]
text = 
	{% if 'fan' in printer %}
	{% set speed = printer.fan.speed %}
	{% if speed %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~fan{frame}~
	{% else %}
	~fan1~
	{% endif %}
	{ "{:>4.0%}".format(speed) }
	{% endif %}

[display_template _printing_time]
text = 
	{% set ptime = printer.idle_timeout.printing_time %}
	{ "%02d:%02d" % (ptime // (60 * 60), (ptime // 60) % 60) }

[display_template _print_status]
text = 
	{% if printer.display_status.message %}
	{ printer.display_status.message }
	{% elif printer.idle_timeout.printing_time %}
	{% set pos = printer.toolhead.position %}
	{ "X%-4.0fY%-4.0fZ%-5.2f" % (pos.x, pos.y, pos.z) }
	{% else %}
	Ready
	{% endif %}

[display_data __voron_display_16x4 extruder]
position = 0, 0
text = 
	{% set active_extruder = printer.toolhead.extruder %}
	{ render("_heater_temperature", param_heater_name=active_extruder) }

[display_data __voron_display_16x4 fan]
position = 0, 10
text = { render("_fan_speed") }

[display_data __voron_display_16x4 heater_bed]
position = 1, 0
text = { render("_heater_temperature", param_heater_name="heater_bed") }

[display_data __voron_display_16x4 chamber]
position = 1,10
text = 
	{% set chamber = printer['temperature_sensor chamber'] %}
	~chamber~
	{ "%3.0f" % (chamber.temperature,) }
	~degrees~

[display_data __voron_display_16x4 print_progress]
position = 2, 0
text = { "{:^10.0%}".format(printer.display_status.progress) }

[display_data __voron_display_16x4 progress_bar]
position = 2, 1
text = { draw_progress_bar(2, 0, 10, printer.display_status.progress) }

[display_data __voron_display_16x4 printing_time]
position = 2, 10
text = { "%6s" % (render("_printing_time").strip(),) }

[display_data __voron_display_16x4 print_status]
position = 3, 0
text = { render("_print_status") }

[display_glyph extruder]
data = 
	................
	................
	..************..
	.....******.....
	..************..
	.....******.....
	..************..
	................
	....********....
	....******.*....
	....********....
	................
	......****......
	.......**.......
	................
	................
hd44780_slot = 0
hd44780_data = 
	..*..
	.*.*.
	.*.*.
	.*.*.
	.*.*.
	*...*
	*...*
	.***.

[display_glyph bed]
data = 
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.....
	*****
	*.*.*
	*...*
	*.*.*
	*****
	.....
	.....

[display_glyph bed_heat1]
data = 
	................
	................
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.*..*
	*..*.
	.*..*
	*..*.
	.....
	*****
	.....
	.....

[display_glyph bed_heat2]
data = 
	................
	................
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	*..*.
	.*..*
	*..*.
	.*..*
	.....
	*****
	.....
	.....

[display_glyph fan1]
data = 
	................
	................
	....***.........
	...****....**...
	...****...****..
	....***..*****..
	.....*....****..
	.......**.......
	.......**.......
	..****....*.....
	..*****..***....
	..****...****...
	...**....****...
	.........***....
	................
	................

[display_glyph fan2]
data = 
	................
	................
	.......****.....
	.......****.....
	.......***......
	..**...**.......
	..***...........
	..****.**.****..
	..****.**.****..
	...........***..
	.......**...**..
	......***.......
	.....****.......
	.....****.......
	................
	................

[display_glyph chamber]
data = 
	................
	****************
	*....*....*....*
	*....*....*....*
	*....******....*
	*..............*
	*..............*
	*.....****.....*
	*.***.*..*.***.*
	*.....****.....*
	*......**......*
	*..............*
	*.************.*
	*...*......*...*
	****************
	................

[display_glyph feedrate]
data = 
	................
	................
	***.***.***.**..
	*...*...*...*.*.
	**..**..**..*.*.
	*...*...*...*.*.
	*...***.***.**..
	................
	**...*..***.***.
	*.*.*.*..*..*...
	**..***..*..**..
	*.*.*.*..*..*...
	*.*.*.*..*..***.
	................
	................
	................
hd44780_slot = 3
hd44780_data = 
	***..
	*....
	**...
	*.***
	..*.*
	..**.
	..*.*
	.....

[display_glyph fan]
hd44780_slot = 2
hd44780_data = 
	.....
	*..**
	**.*.
	..*..
	.*.**
	**..*
	.....
	.....

[display_glyph clock]
hd44780_slot = 4
hd44780_data = 
	.....
	.***.
	*..**
	*.*.*
	*...*
	.***.
	.....
	.....

[display_glyph degrees]
hd44780_slot = 5
hd44780_data = 
	.**..
	*..*.
	*..*.
	.**..
	.....
	.....
	.....
	.....

[display_glyph usb]
hd44780_slot = 6
hd44780_data = 
	.***.
	.***.
	.***.
	*****
	*****
	*****
	..*..
	..*..

[display_glyph sd]
hd44780_slot = 6
hd44780_data = 
	.....
	..***
	.****
	*****
	*****
	*****
	*****
	.....

[delayed_gcode setdisplayneopixel]
initial_duration = 1
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro red]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro orange]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro green]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro blue]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro white]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro yellow]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro purple]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[stepper_x]
step_pin = PE11
dir_pin = !PE10
enable_pin = !PE9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 300
position_max = 300
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PE7
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
interpolate = True
diag0_pin = ^!PB14
run_current = 1
driver_sgt = 1

[stepper_y]
step_pin = PD8
dir_pin = !PB12
enable_pin = !PD9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 310
position_max = 310
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PE15
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
diag0_pin = ^!PB13
interpolate = True
run_current = 1
driver_sgt = 1

[stepper_z]
step_pin = PE6
dir_pin = PC13
enable_pin = !PE5
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 240
position_min = -5
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 0.0

[tmc2209 stepper_z]
uart_pin = PC14
uart_address = 0
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z1]
step_pin = PE2
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z1]
uart_pin = PC15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z2]
step_pin = PD12
dir_pin = PC4
enable_pin = !PE8
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z2]
uart_pin = PA15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[tmc2209 extruder]
uart_pin = sht36:PB5
interpolate = false
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[gcode_arcs]
resolution = 1.0

[output_pin LIGHTS]
pin = PC8
pwm = true
shutdown_value = 0
value = 1
cycle_time = 0.01

[gcode_macro LIGHTS_ON]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.6

[gcode_macro LIGHTS_ON_20]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.20

[gcode_macro LIGHTS_OFF]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.0

[neopixel sb_leds]
pin = sht36:PB0
chain_count = 3
color_order = GRBW
initial_red = 0.0
initial_green = 0.0
initial_blue = 0.0
initial_white = 0.0

[gcode_macro _sb_vars]
variable_colors = {
	'logo': {
	'busy': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cleaning': {'r': 0.0, 'g': 0.02, 'b': 0.5, 'w': 0.0},
	'calibrating_z': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	'heating': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'homing': {'r': 0.0, 'g': 0.6, 'b': 0.2, 'w': 0.0},
	'leveling': {'r': 0.5, 'g': 0.1, 'b': 0.4, 'w': 0.0},
	'meshing': {'r': 0.2, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'printing': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'standby': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'red': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'orange': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'green': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'blue': {'r': 0.0, 'g': 0.0, 'b': 0.5, 'w': 0.0},
	'white': {'r': 1.0, 'g': 1.0, 'b': 1.0, 'w': 0.0},
	'yellow': {'r': 0.4, 'g': 0.4, 'b': 0.0, 'w': 0.0},
	'purple': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	},
	'nozzle': {
	'heating': {'r': 0.8, 'g': 0.35, 'b': 0.0, 'w':0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'on': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':1.0},
	'standby': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':0.8},
	},
	'thermal': {
	'hot': {'r': 1.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cold': {'r': 0.3, 'g': 0.0, 'b': 0.3, 'w': 0.0}
	}
	}
variable_logo_led_name = "sb_leds"
variable_logo_idx = "3"
variable_nozzle_led_name = "sb_leds"
variable_nozzle_idx = "1,2"
gcode = 

[gcode_macro _set_sb_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = params.LED|string %}
	{% set idx = (params.IDX|string).split(',') %}
	{% set transmit_last = params.TRANSMIT|default(1) %}
	
	{% for led_index in idx %}
	{% set transmit=transmit_last if loop.last else 0 %}
	set_led led={led} red={red} green={green} blue={blue} white={white} index={led_index} transmit={transmit}
	{% endfor %}

[gcode_macro _set_sb_leds_by_name]
gcode = 
	{% set leds_name = params.LEDS %}
	{% set color_name = params.COLOR %}
	{% set color = printer["gcode_macro _sb_vars"].colors[leds_name][color_name] %}
	{% set led = printer["gcode_macro _sb_vars"][leds_name + "_led_name"] %}
	{% set idx = printer["gcode_macro _sb_vars"][leds_name + "_idx"] %}
	{% set transmit = params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={color.r} green={color.g} blue={color.b} white={color.w} idx="{idx}" transmit={transmit}

[gcode_macro _set_logo_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].logo_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].logo_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro _set_nozzle_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].nozzle_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].nozzle_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro set_logo_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_logo_leds red=0 blue=0 green=0 white=0 transmit={transmit}

[gcode_macro set_nozzle_leds_on]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="on" transmit={transmit}

[gcode_macro set_nozzle_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="off" transmit={transmit}

[gcode_macro status_off]
gcode = 
	set_logo_leds_off transmit=0
	set_nozzle_leds_off

[gcode_macro status_ready]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="standby" transmit=1

[gcode_macro status_busy]
gcode = 
	_set_sb_leds_by_name leds="logo" color="busy" transmit=0
	set_nozzle_leds_on

[gcode_macro status_heating]
gcode = 
	_set_sb_leds_by_name leds="logo" color="heating" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="heating" transmit=1

[gcode_macro status_leveling]
gcode = 
	_set_sb_leds_by_name leds="logo" color="leveling" transmit=0
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="homing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	_set_sb_leds_by_name leds="logo" color="cleaning" transmit=0
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="meshing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	_set_sb_leds_by_name leds="logo" color="calibrating_z" transmit=0
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="printing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_orange]
gcode = 
	_set_sb_leds_by_name leds="logo" color="orange" transmit=0
	set_nozzle_leds_on

[gcode_macro status_red]
gcode = 
	_set_sb_leds_by_name leds="logo" color="red" transmit=0
	set_nozzle_leds_on

[gcode_macro status_purple]
gcode = 
	_set_sb_leds_by_name leds="logo" color="purple" transmit=0
	set_nozzle_leds_on

[gcode_macro status_green]
gcode = 
	_set_sb_leds_by_name leds="logo" color="green" transmit=0
	set_nozzle_leds_on

[gcode_macro status_white]
gcode = 
	_set_sb_leds_by_name leds="logo" color="white" transmit=0
	set_nozzle_leds_on

[gcode_macro status_yellow]
gcode = 
	_set_sb_leds_by_name leds="logo" color="yellow" transmit=0
	set_nozzle_leds_on

[gcode_macro status_blue]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	set_nozzle_leds_on

[delayed_gcode set_sb_leds_on_boot]
initial_duration = 1
gcode = 
	flicker
	status_ready

[gcode_macro flicker]
gcode = 
	{% set LEDTimes = [10, 20, 20, 240, 20, 40, 20, 100, 20, 20, 20, 260, 80, 20, 240, 60, 160, 20, 240, 20, 1000, 20, 20, 40, 100, 20, 274, 340, 860, 20, 1400, 20, 60, 20] %}
	{% set RGB_Red = 0.2 %}
	{% set RGB_Green = 0.2 %}
	{% set RGB_Blue = 0.2 %}
	{% set RGB_Strip = "sb_leds" %}
	{% set RGB_Strip1 = "mini12864" %}
	
	{% for toggletime in LEDTimes %}
	{% set ledTime = toggletime|string %}
	{% set loopCount = loop.index %}
	
	{% if loopCount is divisibleby 2 %}
	SET_LED LED={RGB_Strip} RED={RGB_Red} GREEN={RGB_Green} BLUE={RGB_Blue}
	G4 P{ledTime|int}
	{% else %}
	SET_LED LED={RGB_Strip}
	G4 P{ledTime|int}
	{% endif %}
	
	{% endfor %}
	
	{% for i in range(1,9) %}
	SET_LED LED={RGB_Strip} RED={RGB_Red+(i/10)} GREEN={RGB_Green+(i/10)}  BLUE={RGB_Blue+(i/10)} INDEX=1
	G4 P200
	{% endfor %}

[beacon]
serial = /dev/serial/by-id/usb-Beacon_Beacon_RevD_63E3DDD04E4B333448202020FF0A3315-if00
x_offset = 0
y_offset = -24
mesh_main_direction = x
mesh_runs = 2

[bed_mesh]
speed = 150
horizontal_move_z = 10
mesh_min = 10,10
mesh_max = 290,240
probe_count = 15,15
algorithm = bicubic
fade_start = 1
fade_end = 5
fade_target = 0

[z_tilt]
speed = 500
horizontal_move_z = 10
retries = 5
retry_tolerance = 0.004
z_positions = 
	-50, 18
	150, 348
	350, 18
points = 
	30, 5
	150, 245
	270, 5

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% if display_parameters == True %}
	{ action_respond_info("led_enable  : %d" % (led_enable))  }
	{ action_respond_info("status_macro: \'%s\'" % (status_macro))  }
	{ action_respond_info("fuzz_enable : %d" % (fuzz_enable))  }
	{ action_respond_info("fuzz_min    : %f" % (fuzz_min))  }
	{ action_respond_info("fuzz_max    : %f" % (fuzz_max))  }
	{ action_respond_info("probe_dock_enable: %d" % (probe_dock_enable))  }
	{ action_respond_info("attach_macro: \'%s\'" % (attach_macro))  }
	{ action_respond_info("detach_macro: \'%s\'" % (detach_macro))  }
	{% endif %}
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% if margin_enable == False %}
	{% set margin_size = 0 %}
	{% endif %}
	
	{ action_respond_info("{} object points, clamping to bed mesh [{!r} {!r}]".format(
	all_points | count,
	bed_mesh_min,
	bed_mesh_max,
	)) }
	
	{% if fuzz_enable == True %}
	{% set fuzz_range = range((fuzz_min * 100) | int, (fuzz_max * 100) | int + 1) %}
	{% set x_min = (bed_mesh_min[0] + fuzz_max - margin_size, x_min) | max - (fuzz_range | random / 100.0) %}
	{% set y_min = (bed_mesh_min[1] + fuzz_max - margin_size, y_min) | max - (fuzz_range | random / 100.0) %}
	{% set x_max = (bed_mesh_max[0] - fuzz_max + margin_size, x_max) | min + (fuzz_range | random / 100.0) %}
	{% set y_max = (bed_mesh_max[1] - fuzz_max + margin_size, y_max) | min + (fuzz_range | random / 100.0) %}
	{% else %}
	{% set x_min = [ bed_mesh_min[0], x_min - margin_size ] | max %}
	{% set y_min = [ bed_mesh_min[1], y_min - margin_size ] | max %}
	{% set x_max = [ bed_mesh_max[0], x_max + margin_size ] | min %}
	{% set y_max = [ bed_mesh_max[1], y_max + margin_size ] | min %}
	{% endif %}
	
	{ action_respond_info("Object bounds, clamped to the bed_mesh: {!r}, {!r}".format(
	(x_min, y_min),
	(x_max, y_max),
	)) }
	
	{% set points_x = (((x_max - x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((y_max - y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	{ action_respond_info( "Algorithm: {}".format(algorithm)) }
	
	{% set points_x = [points_x, min_points]|max  %}
	{% set points_y = [points_y, min_points]|max  %}
	{ action_respond_info( "Points: x: {}, y: {}".format(points_x, points_y) ) }
	
	{% if printer.configfile.settings.bed_mesh.relative_reference_index is defined %}
	{% set ref_index = (points_x * points_y / 2) | int %}
	{ action_respond_info( "Reference index: {}".format(ref_index) ) }
	{% else %}
	{% set ref_index = -1 %}
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	{% if led_enable == True %}
	{status_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={x_min},{y_min} mesh_max={x_max},{y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y} RELATIVE_REFERENCE_INDEX={ref_index}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}
variable_led_enable = False
variable_status_macro = 'status_meshing'
variable_fuzz_enable = False
variable_fuzz_min = 0
variable_fuzz_max = 4
variable_margin_enable = False
variable_margin_size = 5
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_display_parameters = True

[gcode_macro Z_TILT_ADJUST]
rename_existing = _Z_TILT_ADJUST
gcode = 
	{ action_respond_info("Z Tilt Adjust") }
	
	_Z_TILT_ADJUST {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	G28 Z0

[gcode_macro z_tilt_scan]
gcode = 
	z_tilt_adjust RETRY_TOLERANCE=1
	z_tilt_adjust HORIZONTAL_MOVE_Z=2

[gcode_macro MACROS_VARS]
variable_circ_fan_speed = 255
variable_probe_temp = 150
variable_starting_wled = 2
variable_heating_wled = 4
variable_ending_wled = 3
variable_ending_length = 25
variable_purge_length = 40
variable_filament_swap_length = 0.8
variable_pla_pa = 0.00525
variable_pet_pa = 0.00650
variable_abs_pa = 0.00460
variable_pet_za = 0.010
variable_move_away_home = 0
variable_homing_retract = 20
gcode = 

[gcode_macro MATERIAL_PA]
gcode = 
	{% set MATERIAL = params.MATERIAL|default("XXX")|string %}
	{% set TEXT ="Setting PA for " + MATERIAL %}
	{% set PLA = printer["gcode_macro MACROS_VARS"].pla_pa|default(0)%}
	{% set PET = printer["gcode_macro MACROS_VARS"].pet_pa|default(0)%}
	{% set ABS = printer["gcode_macro MACROS_VARS"].abs_pa|default(0)%}
	{% set PETZ = printer["gcode_macro MACROS_VARS"].pet_za|default(0)%}
	{% if MATERIAL == "PLA" %}
	SET_PRESSURE_ADVANCE ADVANCE={PLA}
	{% elif MATERIAL == "PET" %}
	SET_PRESSURE_ADVANCE ADVANCE={PET}
	SET_GCODE_OFFSET Z_ADJUST={PETZ} MOVE=1
	{% elif MATERIAL == "ABS" %}
	SET_PRESSURE_ADVANCE ADVANCE={ABS}
	{% else %}
	{% set TEXT ="No PA value for " + MATERIAL %}
	{% endif %}
	DISPLAYTEXT TEXT="{TEXT}"

[gcode_macro PURGE_LINE]
gcode = 
	DISPLAYTEXT TEXT="Prime Line"
	G1 X75 E25 F1000
	G92 E0;
	G90
	G0 X75 Y4 F6000
	G1 Z0.2 F200
	G91
	G1 X150 E30 F1200;
	G1 Y1
	G1 X-150 E30 F1200;
	G92 E0.0
	G1 Z1 F5000

[gcode_macro PRINT_START]
gcode = 
	{% set BED_TEMP = params.BED_TEMP|default(110)|float %}
	{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(250)|float %}
	{% set ENCLOSURE_TEMP = params.ENCLOSURE_TEMP|default(45)|int %}
	{% set PROBE_TEMP = printer["gcode_macro MACROS_VARS"].probe_temp|default(0)%}
	
	SET_TEMP HEATER="bed" TEMP={BED_TEMP}
	SET_TEMP HEATER="extruder" TEMP={PROBE_TEMP} WAIT=1
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	DISPLAYTEXT TEXT="Homing"
	G28
	{% endif %}
	DISPLAYTEXT TEXT="Heating Bed"
	SET_TEMP HEATER="bed" TEMP={BED_TEMP} WAIT=1
	
	{% if not printer.z_tilt.applied %}
	DISPLAYTEXT TEXT="Z tilt thingy"
	Z_TILT_ADJUST
	{% endif %}
	MATERIAL_PA MATERIAL={FILAMENT}
	DISPLAYTEXT TEXT="Heating Extruder"
	SET_TEMP HEATER="extruder" TEMP={EXTRUDER_TEMP} WAIT=1
	
	BED_MESH_CALIBRATE
	SET_FAN_SPEED FAN=rebreather SPEED=1
	SET_FAN_SPEED FAN=stepper_fans SPEED=0.25
	MATERIAL_PA MATERIAL={FILAMENT}
	G4 P1000
	PURGE_LINE
	
	
	DISPLAYTEXT TEXT="Printing..."

[gcode_macro G32]
gcode = 
	BED_MESH_CLEAR
	G28
	Z_TILT_ADJUST
	G28
	G0 X75 Y75 Z30 F3600

[gcode_macro PRINT_END]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	{% set FILAMENT = params.FILAMENT|default(PLA) %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	M400
	G92 E0
	G1 E-25.0 F1800
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	TURN_OFF_HEATERS
	M107
	G1 Z2 F3000
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	
	{% if FILAMENT == 'ABS' or params.FILAMENT == 'ASA' %}
	NEVERMORE_END_PRINT
	{% endif %}
	
	DISPLAYTEXT TEXT="Print Complete"

[gcode_macro SET_TEMP]
gcode = 
	{% set HEATER = params.HEATER|default("")|string %}
	{% set TEMP = params.TEMP|default(0)|int %}
	{% set WAIT = params.WAIT|default(0)|int %}
	
	{% if HEATER == "extruder" %}
	{% if WAIT == 1 %}
	M109 S{TEMP}
	{% else %}
	M104 S{TEMP}
	{% endif %}
	{% else %}
	{% if WAIT == 1 %}
	M190 S{TEMP}
	{% else %}
	M140 S{TEMP}
	{% endif %}
	{% endif %}

[gcode_macro ENDING_RETRACTION]
gcode = 
	{% set RETRACT = printer["gcode_macro MACROS_VARS"].ending_length|default(0)%}
	G1 E{RETRACT*-1} F1800

[gcode_macro PARK_AT_PRINT_END]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600

[gcode_macro Homing_Variables]
variable_move_away_home = 0
variable_x_homing_pos = 150
variable_y_homing_pos = 150
variable_homing_current = 0.8
variable_homing_retract_x = 150
variable_homing_retract_y = 20
variable_homing_retract_speed = 5000
variable_z_end_pos = 30
variable_is_sensorless = True
variable_display_parameters = True
gcode = 

[homing_override]
axes = xyz
gcode = 
	DISPLAY_PARAMETERS
	
	
	SET_KINEMATIC_POSITION Z=0
	MOVE_AWAY_BEFORE_HOMING PARAMS="Z"
	WAIT TIME=2
	
	{% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}
	
	{% if home_all or 'X' in params %}
	_HOME_X
	{% endif %}
	
	{% if home_all or 'Y' in params %}
	_HOME_Y
	{% endif %}
	
	{% if home_all or 'Z' in params %}
	_HOME_Z
	{% endif %}

[gcode_macro DISPLAY_PARAMETERS]
gcode = 
	{% set DISPLAY_PARAMS = printer["gcode_macro Homing_Variables"].display_parameters %}
	{% set is_sensorless = printer["gcode_macro Homing_Variables"].is_sensorless %}
	{% set x_homing_pos = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set y_homing_pos = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	{% set homing_current = printer["gcode_macro Homing_Variables"].homing_current %}
	{% set homing_retract_x = printer["gcode_macro Homing_Variables"].homing_retract_x %}
	{% set homing_retract_y = printer["gcode_macro Homing_Variables"].homing_retract_y %}
	{% set homing_retract_speed = printer["gcode_macro Homing_Variables"].homing_retract_speed %}
	{% set z_end_pos = printer["gcode_macro Homing_Variables"].z_end_pos %}
	
	{% if DISPLAY_PARAMS == True %}
	{ action_respond_info("is_sensorless  : %d" % (is_sensorless))  }
	{ action_respond_info("x_homing_pos  : %d" % (x_homing_pos))  }
	{ action_respond_info("y_homing_pos  : %d" % (y_homing_pos))  }
	{ action_respond_info("homing_current  : %d" % (homing_current))  }
	{ action_respond_info("homing_retract_x  : %d" % (homing_retract_x))  }
	{ action_respond_info("homing_retract_y  : %d" % (homing_retract_y))  }
	{ action_respond_info("homing_retract_speed  : %d" % (homing_retract_speed))  }
	{ action_respond_info("z_end_pos  : %d" % (z_end_pos))  }
	{% endif %}

[gcode_macro MOVE_AWAY_BEFORE_HOMING]
gcode = 
	{% set MAH = printer["gcode_macro Homing_Variables"].move_away_home|default(0)%}
	{% set PARAMS = params.PARAMS|default("")|string %}
	
	{% set home_all = 'X' not in PARAMS and 'Y' not in PARAMS and 'Z' not in PARAMS %}
	
	
	{% if home_all or 'X' in PARAMS %}
	G1 X-{MAH/2}  F6000
	{% endif %}
	
	{% if home_all or 'Y' in PARAMS %}
	G1  Y-{MAH/2} F6000
	{% endif %}
	
	{% if home_all or 'Z' in PARAMS %}
	G1 Z{MAH} F100
	{% endif %}

[gcode_macro _HOME_X]
gcode = 
	DISPLAYTEXT TEXT="Homing X Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_x|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION X=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="X"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 X
	
	G91
	G1 X-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Y]
gcode = 
	DISPLAYTEXT TEXT="Homing Y Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_y|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION Y=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="Y"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 Y
	
	G91
	G1 Y-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Z]
gcode = 
	{% set Ez = printer["gcode_macro Homing_Variables"].z_end_pos %}
	{% set Hx = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set Hy = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	
	DISPLAYTEXT TEXT="Homing Z Axis"
	
	G1 X{Hx} Y{Hy} F15000
	G28 Z
	G1 Z{Ez}

[gcode_macro ABSOLUTE_COORDINATES]
gcode = 
	G90

[gcode_macro RELATIVE_COORDINATES]
gcode = 
	G91

[gcode_macro DISPLAYTEXT]
gcode = 
	{% set TEXT = params.TEXT|default("")|string %}
	RESPOND MSG="{TEXT}"
	SET_DISPLAY_TEXT MSG="{TEXT}"

[gcode_macro DISPLAY_PROGRESS]
gcode = 
	{% set TOTAL_LAYERS = params.TOTAL_LAYERS|default("")|string %}
	{% set CURRENT_LAYER = params.CURRENT_LAYER|default("")|string %}
	RESPOND MSG="Total layers {TOTAL_LAYERS}, current layer {CURRENT_LAYER}"

[gcode_macro TEMPERATURE_WAIT]
rename_existing = _TEMPERATURE_WAIT
gcode = 
	{% set SENSOR = params.SENSOR|default("")|string %}
	{% set MINIMUM = params.MINIMUM|int %}
	{% set MSG = "Enclosure temperature has reached " + MINIMUM |string %}
	
	DISPLAYTEXT TEXT="Heatsoaking..."
	_TEMPERATURE_WAIT SENSOR="{SENSOR}" MINIMUM={MINIMUM}
	DISPLAYTEXT TEXT="{MSG}"

[gcode_macro WAIT]
gcode = 
	{% set TIME = params.TIME|default(0)|int %}
	G4 P{TIME*1000}

[gcode_macro CHOME]
gcode = 
	{% if printer.toolhead.homed_axes != "xyz" %}
	DISPLAYTEXT TEXT="Homing.."
	G28
	{% endif %}

[gcode_macro RESET_EXTRUDER]
gcode = 
	G92 E0

[gcode_macro PARK_TOOLHEAD]
gcode = 
	{% set th = printer.toolhead %}
	ABSOLUTE_COORDINATES
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y//2} F15000

[gcode_macro DUMP_VARIABLES]
gcode = 
	{% set filter_name = params.NAME|default('')|string|lower %}
	{% set filter_value = params.VALUE|default('')|string|lower %}
	{% set show_cfg = params.SHOW_CFG|default(0)|int %}
	
	{% set out = [] %}
	
	{% for key1 in printer %}
	{% for key2 in printer[key1] %}
	{% if (show_cfg or not (key1|lower == 'configfile' and key2|lower in ['config', 'settings'])) and (filter_name in key1|lower or filter_name in key2|lower) and filter_value in printer[key1][key2]|string|lower %}
	{% set dummy = out.append("printer['%s'].%s = %s" % (key1, key2, printer[key1][key2])) %}
	{% endif %}
	{% else %}
	{% if filter_name in key1|lower and filter_value in printer[key1]|string|lower %}
	{% set dummy = out.append("printer['%s'] = %s" % (key1, printer[key1])) %}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	{action_respond_info(out|join("\n"))}

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=UNLOAD_FILAMENT_state
	
	M82
	G92 E0
	G1 E2 F3600
	G1 E0 F3600
	G1 E3 F3600
	G1 E0 F3600
	G1 E4 F3600
	G1 E0 F3600
	
	M83
	G1 E-20 F3600
	G4 P3000
	G1 E{DISTANCE|float * -1} F3000
	RESTORE_GCODE_STATE NAME=UNLOAD_FILAMENT_state

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=LOAD_FILAMENT_state
	
	M83
	G92 E0
	G1 E{DISTANCE|float} F200
	
	
	
	
	G1 E50 F150
	
	
	G92 E0
	RESTORE_GCODE_STATE NAME=LOAD_FILAMENT_state

[gcode_macro PID_HOTEND]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro PID_BED]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=80

[gcode_macro Z_ENDSTOP]
gcode = 
	Z_ENDSTOP_CALIBRATE

[gcode_macro PROBE_CAL]
gcode = 
	
	G28
	PROBE_CALIBRATE

[gcode_macro IS_CAL]
gcode = 
	
	G28
	SHAPER_CALIBRATE

[gcode_macro SPEEDTEST]
gcode = 
	
	
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest_state
	
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{maxX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{maxX} Y{minY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest_state

[gcode_macro SPEEDTEST2]
gcode = 
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest2_state
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest2_state

[gcode_macro PRESSURE_ADVANCE_CALIBRATION]
description = Calibrate the pressure advance by printing a grid pattern
gcode = 
	
	
	
	{% set pa_start     = params.START|default(0.02)|float %}
	{% set pa_increment = params.INCREMENT|default(0.005)|float %}
	
	{% set do_raft = params.RAFT|default(1)|int %}
	
	{% set print_size      = params.SIZE|default(120)|int %}
	{% set num_bands       = params.BANDS_LIMIT|default(999)|int %}
	{% set lines_per_band  = params.LINES_PER_BAND|default(6)|int %}
	{% set e_multiplier    = params.EXTRUSION_MULTIPLIER|default(1.25 if do_raft == 1 else 1.5)|float %},
	{% set retract_length  = params.RETRACT|default(0.6)|float %}
	{% set initial_purge   = params.PURGE_MM|default(8)|int %}
	
	{% set feedrate_control = params.CONTROL_SPEED|default(30)|int * 60 %}
	{% set feedrate_outer   = params.OUTER_SPEED|default(40)|int * 60 %}
	{% set feedrate_inner   = params.INNER_SPEED|default(120)|int * 60 %}
	{% set feedrate_travel  = params.TRAVEL_SPEED|default(200)|int * 60 %}
	{% set feedrate_raft    = params.RAFT_SPEED|default(120)|int * 60 %}
	{% set feedrate_z       = 5 * 60 %}
	{% set feedrate_retract = 50 * 60 %}
	
	{% set spacing_line  = params.LINE_SPACING|default(0.4)|float %}
	{% set spacing_band  = 2 %}
	{% set spacing_raft  = 2 %}
	
	{% set fast_line_ratio_percent = 50 %}
	
	{% set lines_per_band    = [2, lines_per_band]|max %}
	{% set e_multiplier      = [1, e_multiplier]|max %}
	{% set num_lines_control = (lines_per_band / 2)|round(0, 'floor')|int %}
	{% set num_lines_test    = (lines_per_band / 2)|round(0, 'ceil')|int %}
	{% set spacing_line      = spacing_line * (1 + e_multiplier - 1.25) %}
	
	{% set max_x = printer.toolhead.axis_maximum.x|float %}
	{% set max_y = printer.toolhead.axis_maximum.y|float %}
	{% set nozzle_diameter = printer.configfile.config['extruder'].nozzle_diameter|float %}
	{% set line_width    = nozzle_diameter * 1.25 %}
	{% set line_height   = nozzle_diameter / 2 %}
	{% set z_hop_height  = 2 * line_height %}
	{% set e_per_mm      = (line_width * line_height) / (3.1415 * (1.75/2)**2) %}
	{% set spacing_purge = line_height * 0.8 %}
	
	{% set spacing_raft   = (spacing_raft / line_width)|round * line_width %}
	{% set num_raft_lines = ([print_size, max_x]|min / spacing_raft)|round(0, 'floor')|int %}
	{% set print_width    = num_raft_lines * spacing_raft %}
	
	{% set band_height      = lines_per_band * line_width + (lines_per_band - 1) * spacing_line + spacing_band %}
	{% set bands_per_height = (([print_size, max_y]|min  - spacing_purge) / band_height)|round(0, 'floor')|int %}
	{% set num_bands        = [num_bands, bands_per_height]|min %}
	{% set print_height     = num_bands * band_height - spacing_band - spacing_purge %}
	
	{% set slow_line_length = ((print_width * (1 - fast_line_ratio_percent / 100) / 2) / spacing_raft)|round * spacing_raft + spacing_raft / 2 %}
	{% set fast_line_length = print_width - slow_line_length * 2 %}
	{% set thick_raft_num1 = (slow_line_length / spacing_raft)|round|int %}
	{% set thick_raft_num2  = num_raft_lines - thick_raft_num1 + 1 %}
	
	{% set x_start = max_x / 2 - print_width  / 2 %}
	{% set y_start = max_y / 2 - print_height / 2 %}
	
	{action_respond_info("")}
	{action_respond_info("Starting Pressure Advance calibration print.")}
	{action_respond_info("")}
	{action_respond_info("This operation can not be interrupted by normal means. Hit the \"emergency stop\" button once the print starts exhibiting PA values that are obviously too high.")}
	{action_respond_info("")}
	{action_respond_info("PA of first band: %.4f" % pa_start)}
	{action_respond_info("PA of last band: %.4f" % (num_bands * pa_increment))}
	{action_respond_info("PA increment per band: %.4f" % pa_increment)}
	{action_respond_info("Number of bands: %d" % num_bands)}
	{action_respond_info("")}
	{action_respond_info("Inspect the printed model. "
	"Look at the top and bottom lines in each band, on the right side of the two vertical raft bars (where the print speeds change). "
	"Find the highest band from the bottom where the lines at its top still resemble the lines at its bottom, with no visible extrusion width irregularities. "
	"Your final Pressure Advance value would then be:"
	)}
	{action_respond_info("")}
	{action_respond_info("PA = %.4f + (%.4f * band_number)" % (pa_start, pa_increment))}
	{action_respond_info("")}
	{action_respond_info("Update your [extruder] config section and set \"pressure_advance\" to the value you calculated.")}
	{action_respond_info("")}
	
	
	
	
	
	
	
	
	
	SAVE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION
	{% set pa_saved = printer.configfile.settings['extruder'].pressure_advance %}
	SET_PRESSURE_ADVANCE ADVANCE={pa_start}
	
	
	
	
	M117 Priming
	G90
	G0 X{x_start} Y{y_start} Z{line_height} F{feedrate_travel}
	G91
	G1 E{initial_purge} F{5 * 60}
	G1 X{print_width}  E{print_width * e_per_mm} F{feedrate_raft / 2}
	G1 Y{line_width}   E{line_width * e_per_mm}  F{feedrate_raft / 2}
	G1 X-{print_width} E{print_width * e_per_mm} F{feedrate_raft / 2}
	
	
	
	
	{% if do_raft == 1 %}
	G0 F{feedrate_raft}
	
	{% for curr_raft_line in range(1, num_raft_lines + 2) %}
	
	{% if curr_raft_line == thick_raft_num1 or curr_raft_line == thick_raft_num2 %}
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	G1 Y{loop.cycle(-1.0, 1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	{% endif %}
	
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	
	
	{% if not loop.last %}
	{% set horizontal_move = spacing_raft - (2 * line_width if curr_raft_line == thick_raft_num1 - 1 or curr_raft_line == thick_raft_num2 - 1 else 0) %}
	G1 X{horizontal_move} E{horizontal_move * e_per_mm}
	{% endif %}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	{% endif %}
	
	
	
	
	M117 Printing bands
	G90
	G0 X{x_start} Y{y_start + 2 * line_width + spacing_purge} F{feedrate_travel}
	G0 Z{line_height + (line_height if do_raft == 1 else 0)} F{feedrate_z}
	G91
	G1 E{retract_length} F{feedrate_retract}
	
	
	{% for curr_band_num in range(1, num_bands + 1) %}
	{% set outer_loop = loop %}
	
	{% set curr_pa_value = pa_start + (curr_band_num - 1) * pa_increment %}
	SET_PRESSURE_ADVANCE ADVANCE={curr_pa_value}
	M117 Band {curr_band_num} PA {curr_pa_value|round(4)}
	
	
	{% for _ in range(num_lines_control) %}
	G1 X{print_width} E{print_width * e_per_mm * e_multiplier} F{feedrate_control}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	G0 X-{print_width} Y{spacing_line + line_width} F{feedrate_travel}
	
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endfor %}
	
	
	{% for _ in range(num_lines_test) %}
	{% for data in [{'mm': slow_line_length, 'f': feedrate_outer}, {'mm': fast_line_length, 'f': feedrate_inner}, {'mm': slow_line_length, 'f': feedrate_outer}] %}
	G1 X{data.mm} E{data.mm * e_per_mm * e_multiplier} F{data.f}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	{% if not (outer_loop.last and loop.last) %}
	G0 X-{print_width} Y{(spacing_line if not loop.last else spacing_band) + line_width} F{feedrate_travel}
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	
	
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z20 F{feedrate_z}
	G0 X-{print_width / 2} Y{[50, max_y - (y_start + print_height)]|min} F{feedrate_travel}
	
	M117
	SET_PRESSURE_ADVANCE ADVANCE={pa_saved}
	RESTORE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION

[gcode_macro TEST_SPEED]
gcode = 
	
	{% set speed  = params.SPEED|default(printer.configfile.settings.printer.max_velocity)|int %}
	
	{% set iterations = params.ITERATIONS|default(5)|int %}
	
	{% set accel  = params.ACCEL|default(printer.configfile.settings.printer.max_accel)|int %}
	
	{% set bound = params.BOUND|default(20)|int %}
	
	{% set smallpatternsize = SMALLPATTERNSIZE|default(20)|int %}
	
	
	
	{% set x_min = printer.toolhead.axis_minimum.x + bound %}
	{% set x_max = printer.toolhead.axis_maximum.x - bound %}
	{% set y_min = printer.toolhead.axis_minimum.y + bound %}
	{% set y_max = printer.toolhead.axis_maximum.y - bound %}
	
	
	
	{% set x_center = (printer.toolhead.axis_minimum.x|float + printer.toolhead.axis_maximum.x|float ) / 2 %}
	{% set y_center = (printer.toolhead.axis_minimum.y|float + printer.toolhead.axis_maximum.y|float ) / 2 %}
	
	
	{% set x_center_min = x_center - (smallpatternsize/2) %}
	{% set x_center_max = x_center + (smallpatternsize/2) %}
	{% set y_center_min = y_center - (smallpatternsize/2) %}
	{% set y_center_max = y_center + (smallpatternsize/2) %}
	
	
	SAVE_GCODE_STATE NAME=TEST_SPEED
	
	
	{ action_respond_info("TEST_SPEED: x_min %d, y_min %d, x_max %d, y_max %d" % (x_min, y_min, x_max, y_max)) }
	{ action_respond_info("TEST_SPEED: starting %d iterations at speed %d, accel %d" % (iterations, speed, accel)) }
	
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	G28 X Y
	{% endif %}
	
	
	
	
	
	
	
	
	
	
	
	
	G4 P1000
	GET_POSITION
	
	
	G0 X{x_min} Y{y_min} Z{bound + 10} F{speed*60}
	
	
	SET_VELOCITY_LIMIT VELOCITY={speed} ACCEL={accel} ACCEL_TO_DECEL={accel / 2}
	
	{% for i in range(iterations) %}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	{% endfor %}
	
	
	SET_VELOCITY_LIMIT VELOCITY={printer.configfile.settings.printer.max_velocity} ACCEL={printer.configfile.settings.printer.max_accel} ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel}
	
	
	G28 X Y
	
	
	
	G4 P1000
	GET_POSITION
	
	
	RESTORE_GCODE_STATE NAME=TEST_SPEED

[gcode_macro SETUP_KAMP_MESHING]
gcode = 
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=display_parameters   VALUE={params.DISPLAY_PARAMETERS|default(True)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=led_enable   VALUE={params.LED_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=status_macro VALUE='"{params.STATUS_MACRO|default('status_meshing')|string}"'
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_enable VALUE={params.FUZZ_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_min    VALUE={params.FUZZ_MIN|default(0)|float}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_max    VALUE={params.FUZZ_MAX|default(4)|float}
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=probe_dock_enable  VALUE={params.PROBE_DOCK_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=attach_macro VALUE='"{params.ATTACH_MACRO|default('Attach_Probe')|string}"'
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=detach_macro VALUE='"{params.DETACH_MACRO|default('Dock_Probe')|string}"'

[input_shaper]
shaper_freq_x = 86.8
shaper_type_x = zv
shaper_freq_y = 62.2
shaper_type_y = zv

[probe]
z_offset = -0.0400

[beacon model default]
model_coef = 1.409155451498927,
	1.7229833219997472,
	0.7624260199879447,
	0.3933310021549746,
	0.3504714980336664,
	0.3215136667184013,
	-0.12014580629124338,
	-0.22419779942999016,
	0.19713656245482147,
	0.188750402116144
model_domain = 3.120873231931901e-07,3.332026812812074e-07
model_range = 0.200000,5.000000
model_temp = 23.909578
model_offset = 0.02500

[bed_mesh default]
version = 1
points = 
	-0.062140, -0.036984, -0.007379, 0.031314, 0.058627, 0.084848, 0.107257, 0.111945, 0.135207, 0.152355, 0.170171
	-0.128044, -0.093273, -0.053917, -0.019434, 0.015362, 0.051030, 0.076081, 0.091292, 0.113629, 0.133648, 0.155842
	-0.171323, -0.136118, -0.096393, -0.057201, -0.010727, 0.024397, 0.048697, 0.072530, 0.099236, 0.126818, 0.150713
	-0.201543, -0.161727, -0.119034, -0.066854, -0.018463, 0.014217, 0.047420, 0.076211, 0.103883, 0.134441, 0.171920
	-0.229879, -0.188570, -0.139992, -0.085341, -0.040984, 0.002604, 0.042138, 0.073877, 0.104620, 0.133705, 0.171879
	-0.263766, -0.213518, -0.162008, -0.108459, -0.058518, -0.007646, 0.032310, 0.069869, 0.102956, 0.138912, 0.180918
	-0.296565, -0.242362, -0.188285, -0.127789, -0.071974, -0.019641, 0.027806, 0.070759, 0.105252, 0.142100, 0.184275
	-0.296242, -0.233747, -0.171416, -0.107834, -0.048348, 0.004540, 0.056827, 0.100566, 0.141602, 0.182628, 0.230079
	-0.281192, -0.228380, -0.164876, -0.101596, -0.030960, 0.023575, 0.079761, 0.121563, 0.171967, 0.216584, 0.265930
	-0.307454, -0.252371, -0.190633, -0.113183, -0.041936, 0.019598, 0.074971, 0.120663, 0.178367, 0.230549, 0.282552
	-0.324293, -0.258430, -0.193413, -0.119856, -0.045648, 0.021113, 0.080729, 0.133249, 0.192194, 0.246004, 0.297448
x_count = 11
y_count = 11
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 59.444
max_x = 240.556
min_y = 75.541944
max_y = 224.458048
=======================
extruder: pressure_advance: 0.005250
pressure_advance_smooth_time: 0.040000
Loaded MCU 'mcu' 124 commands (v0.12.0-25-g99d7af87 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_i2c3=PA8,PC9 BUS_PINS_sdio=PC12,PD2,PC8,PC9,PC10,PC11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 CLOCK_FREQ=180000000 MCU=stm32f446xx PWM_MAX=255 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Loaded MCU 'rpi' 118 commands (v0.12.0-25-g99d7af87 / gcc: (Debian 10.2.1-6) 10.2.1 20210110 binutils: (GNU Binutils for Debian) 2.35.2)
MCU 'rpi' config: ADC_MAX=4095 CLOCK_FREQ=50000000 MCU=linux PCA9685_MAX=4096 PWM_MAX=32768 STATS_SUMSQ_BASE=256
Configured MCU 'rpi' (1024 moves)
Loaded MCU 'sht36' 114 commands (v0.12.0-25-g99d7af87 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'sht36' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c1_PF1_PF0=PF1,PF0 BUS_PINS_i2c1a=PF1,PF0 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 CANBUS_FREQUENCY=500000 CLOCK_FREQ=48000000 INITIAL_PINS=!PC13 MCU=stm32f072xb PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PB8,PB9 RESERVE_PINS_crystal=PF0,PF1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'sht36' (904 moves)
toolhead: max_velocity: 800.000000
max_accel: 2000.000000
minimum_cruise_ratio: 0.000000
square_corner_velocity: 8.000000
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/printer_data/config/printer.cfg', '-l', '/home/pi/printer_data/logs/klippy.log', '-I', '/home/pi/printer_data/comms/klippy.serial', '-a', '/home/pi/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-171-g2f6e94c9-dirty'
Untracked files: klippy/extras/gcode_shell_command.py, klippy/extras/beacon.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper.git
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
=============== Log rollover at Sun Apr 28 06:49:07 2024 ===============
webhooks client 548310202976: Disconnected
webhooks client 548280596320: New connection
webhooks client 548280596320: Client info {'program': 'Moonraker', 'version': 'v0.8.0-328-g5a60d64'}
webhooks: registering remote method 'shutdown_machine' for connection id: 548280596320
webhooks: registering remote method 'reboot_machine' for connection id: 548280596320
webhooks: registering remote method 'pause_job_queue' for connection id: 548280596320
webhooks: registering remote method 'start_job_queue' for connection id: 548280596320
webhooks: registering remote method 'timelapse_newframe' for connection id: 548280596320
webhooks: registering remote method 'timelapse_saveFrames' for connection id: 548280596320
webhooks: registering remote method 'timelapse_render' for connection id: 548280596320
Unknown command:"_SET_TIMELAPSE_SETUP"
Unknown command:"HYPERLAPSE"
Stats 1041582.7: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000007 mcu_task_stddev=0.000014 bytes_write=72872438 bytes_read=52825619 bytes_retransmit=9 bytes_invalid=0 send_seq=1649441 receive_seq=1649441 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002341 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000023 bytes_write=1576380 bytes_read=4854855 bytes_retransmit=0 bytes_invalid=0 send_seq=262696 receive_seq=262696 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999091 adj=49998365 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=14333177 bytes_read=31771159 bytes_retransmit=0 bytes_invalid=0 send_seq=524424 receive_seq=524424 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999691 adj=47999051  Spider: temp=42.4 raspberry_pi: temp=38.5 sht36: temp=30.0 chamber: temp=27.6 heater_bed: target=0 temp=27.4 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=1600748 bytes_read=51347656 bytes_retransmit=0 bytes_invalid=0 send_seq=264740 receive_seq=264740 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999400 adj=31998977 beacon: coil_temp=27.9 refs=0 sysload=0.06 cputime=18764.714 memavail=3278556 print_time=335286.694 buffer_time=0.758 print_stall=0 extruder: target=0 temp=31.4 pwm=0.000
Attempting MCU 'mcu' reset command
Attempting MCU 'rpi' config_reset command
b'Got EOF when reading from device'
Attempting MCU 'sht36' reset command
Attempting MCU 'beacon' config_reset command
webhooks client 548280596320: Disconnected
Restarting printer
Start printer at Sun Apr 28 06:59:49 2024 (1714283989.9 1041584.8)
===== Config file =====
[exclude_object]

[idle_timeout]
timeout = 3600

[force_move]
enable_force_move = True

[respond]
default_type = echo

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	CANCEL_PRINT

[pause_resume]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
variable_park = True
gcode = 
	TURN_OFF_HEATERS
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	PRINT_END
	BASE_CANCEL_PRINT

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32f446xx_2D0053000E51323130373733-if00

[temperature_sensor Spider]
sensor_type = temperature_mcu
min_temp = 10
max_temp = 100

[board_pins spider]
aliases = 
	
	X_STEP=PE11, X_DIR=PE10, X_ENABLE=PE9,
	Y_STEP=PD8, Y_DIR=PB12, Y_ENABLE=PD9,
	Z_STEP=PD14, Z_DIR=PD13, Z_ENABLE=PD15,
	E0_STEP=PD5, E0_DIR=PD6, E0_ENABLE=PD4,
	E1_STEP=PE6, E1_DIR=PC13, E1_ENABLE=PE5,
	E2_STEP=PE2, E2_DIR=PE4, E2_ENABLE=PE3,
	E3_STEP=PD12, E3_DIR=PC4, E3_ENABLE=PE8,
	E4_STEP=PE1, E4_DIR=PE0, E4_ENABLE=PC5,
	
	X_MIN=PB14, X_MAX=PA1,
	Y_MIN=PB13, Y_MAX=PA2,
	Z_MIN=PA0, Z_MAX=PA3,
	
	X_UART=PE7, Y_UART=PE15, Z_UART=PD10,
	E0_UART=PD7, E1_UART=PC14, E2_UART=PC15,
	E3_UART=PA15, E4_UART=PD11,
	
	E_HEATER=PB15, E_THERMISTOR=PC0,
	E1_HEATER=PC8, E1_THERMISTOR=PC1,
	E2_HEATER=PB3, E2_THERMISTOR=PC2,
	BED_HEATER=PB4, BED_THERMISTOR=PC3,
	FAN0=PB0, FAN1=PB1, FAN2=PB2,
	
	LED-R=PB6, LED-G=PB5, LED-B=PB7,
	
	EXP1_1=PC9, EXP1_3=PC11, EXP1_5=PC10, EXP1_7=PD0, EXP1_9=<GND>,
	EXP1_2=PA8, EXP1_4=PD2, EXP1_6=PC12, EXP1_8=PD1, EXP1_10=<5V>,
	
	EXP2_1=PA6, EXP2_3=PC6, EXP2_5=PC7, EXP2_7=PB10, EXP2_9=<GND>,
	EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<5V>

[mcu rpi]
serial = /tmp/klipper_host_mcu

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 10
max_temp = 100

[gcode_shell_command rpi_fan_50]
command = i2cset -y 1 0x01a 0x32
timeout = 30.
verbose = True

[gcode_shell_command rpi_fan_25]
command = i2cset -y 1 0x01a 0x19
timeout = 30.
verbose = True

[gcode_macro rpi_fan_50]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_50

[gcode_macro rpi_fan_25]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_25

[mcu sht36]
canbus_uuid = 943ff2eb48fd

[temperature_sensor sht36]
sensor_type = temperature_mcu
sensor_mcu = sht36

[printer]
kinematics = corexy
max_velocity = 800
max_accel = 20000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[extruder]
sensor_pin = sht36:PA3
sensor_type = PT1000
heater_pin = sht36:PA8
min_temp = 10
max_temp = 270
max_power = 1.0
min_extrude_temp = 10
control = pid
pid_kp = 20.362
pid_ki = 2.225
pid_kd = 46.579
pressure_advance_smooth_time = 0.040
max_extrude_only_velocity = 120
max_extrude_only_accel = 800
max_extrude_only_distance = 1150
max_extrude_cross_section = 9999
nozzle_diameter = 0.400
filament_diameter = 1.75
step_pin = sht36:PB4
dir_pin = !sht36:PB3
enable_pin = !sht36:PA15
full_steps_per_rotation = 200
rotation_distance = 22.66103
gear_ratio = 50:10
microsteps = 16
pressure_advance = 0.05

[temperature_sensor chamber]
sensor_type = NTC 100K MGB18-104F39050L32
sensor_pin = PC2
min_temp = -100
max_temp = 100
gcode_id = C

[heater_bed]
heater_pin = PB4
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PB0
max_power = 0.9
min_temp = -160
max_temp = 120
control = pid
pid_kp = 41.450
pid_ki = 1.322
pid_kd = 324.866

[multi_pin stepper_drivers_multipin]
pins = PB5, PB6, PB7

[controller_fan stepper_drivers]
pin = multi_pin:stepper_drivers_multipin
hardware_pwm = False
max_power = 1.0
fan_speed = 0.75
shutdown_speed = 0.0
stepper = stepper_x, stepper_y

[heater_fan controller_fan]
pin = PB2
cycle_time = 0.00004
off_below = 0.1
kick_start_time = 0.5
heater = heater_bed
heater_temp = 50.0
max_power = 1.0

[heater_fan hotend_fan]
pin = sht36:PB10
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 40.0

[fan]
pin = sht36:PB11
max_power = 0.85
cycle_time = 0.00005
kick_start_time = 0
off_below = 0.0
shutdown_speed = 0

[fan_generic stepper_fans]
pin = PA13
max_power = 0.5
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.0001

[fan_generic rebreather]
pin = PA14
max_power = 1.0
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.00010

[gcode_macro rebreather_start_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.5

[gcode_macro rebreather_end_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.7
	UPDATE_DELAYED_GCODE ID=rebreather_stop_delayed DURATION=900

[delayed_gcode rebreather_stop_delayed]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.0

[display]
lcd_type = uc1701
cs_pin = PC11
a0_pin = PD2
rst_pin = PC10
encoder_pins = ^PC6,^PC7
click_pin = ^!PA8
contrast = 63
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6
spi_software_sclk_pin = PA5
display_group = __voron_display_16x4

[gcode_macro M300]
gcode = SET_PIN PIN=BEEPER_pin VALUE={S}
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[neopixel mini12864]
pin = PC12
chain_count = 60
initial_red = 0.1
initial_green = 0.5
initial_blue = 0.0
color_order = RGB

[display_template _heater_temperature]
param_heater_name = "extruder"
text = 
	{% if param_heater_name in printer %}
	{% set heater = printer[param_heater_name] %}
	
	{% if param_heater_name == "heater_bed" %}
	{% if heater.target %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~bed_heat{frame}~
	{% else %}
	~bed~
	{% endif %}
	{% else %}
	~extruder~
	{% endif %}
	
	{ "%3.0f" % (heater.temperature,) }
	
	{% if heater.target and (heater.temperature - heater.target)|abs > 2 %}
	~right_arrow~
	{ "%0.0f" % (heater.target,) }
	{% endif %}
	~degrees~
	{% endif %}

[display_template _fan_speed]
text = 
	{% if 'fan' in printer %}
	{% set speed = printer.fan.speed %}
	{% if speed %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~fan{frame}~
	{% else %}
	~fan1~
	{% endif %}
	{ "{:>4.0%}".format(speed) }
	{% endif %}

[display_template _printing_time]
text = 
	{% set ptime = printer.idle_timeout.printing_time %}
	{ "%02d:%02d" % (ptime // (60 * 60), (ptime // 60) % 60) }

[display_template _print_status]
text = 
	{% if printer.display_status.message %}
	{ printer.display_status.message }
	{% elif printer.idle_timeout.printing_time %}
	{% set pos = printer.toolhead.position %}
	{ "X%-4.0fY%-4.0fZ%-5.2f" % (pos.x, pos.y, pos.z) }
	{% else %}
	Ready
	{% endif %}

[display_data __voron_display_16x4 extruder]
position = 0, 0
text = 
	{% set active_extruder = printer.toolhead.extruder %}
	{ render("_heater_temperature", param_heater_name=active_extruder) }

[display_data __voron_display_16x4 fan]
position = 0, 10
text = { render("_fan_speed") }

[display_data __voron_display_16x4 heater_bed]
position = 1, 0
text = { render("_heater_temperature", param_heater_name="heater_bed") }

[display_data __voron_display_16x4 chamber]
position = 1,10
text = 
	{% set chamber = printer['temperature_sensor chamber'] %}
	~chamber~
	{ "%3.0f" % (chamber.temperature,) }
	~degrees~

[display_data __voron_display_16x4 print_progress]
position = 2, 0
text = { "{:^10.0%}".format(printer.display_status.progress) }

[display_data __voron_display_16x4 progress_bar]
position = 2, 1
text = { draw_progress_bar(2, 0, 10, printer.display_status.progress) }

[display_data __voron_display_16x4 printing_time]
position = 2, 10
text = { "%6s" % (render("_printing_time").strip(),) }

[display_data __voron_display_16x4 print_status]
position = 3, 0
text = { render("_print_status") }

[display_glyph extruder]
data = 
	................
	................
	..************..
	.....******.....
	..************..
	.....******.....
	..************..
	................
	....********....
	....******.*....
	....********....
	................
	......****......
	.......**.......
	................
	................
hd44780_slot = 0
hd44780_data = 
	..*..
	.*.*.
	.*.*.
	.*.*.
	.*.*.
	*...*
	*...*
	.***.

[display_glyph bed]
data = 
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.....
	*****
	*.*.*
	*...*
	*.*.*
	*****
	.....
	.....

[display_glyph bed_heat1]
data = 
	................
	................
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.*..*
	*..*.
	.*..*
	*..*.
	.....
	*****
	.....
	.....

[display_glyph bed_heat2]
data = 
	................
	................
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	*..*.
	.*..*
	*..*.
	.*..*
	.....
	*****
	.....
	.....

[display_glyph fan1]
data = 
	................
	................
	....***.........
	...****....**...
	...****...****..
	....***..*****..
	.....*....****..
	.......**.......
	.......**.......
	..****....*.....
	..*****..***....
	..****...****...
	...**....****...
	.........***....
	................
	................

[display_glyph fan2]
data = 
	................
	................
	.......****.....
	.......****.....
	.......***......
	..**...**.......
	..***...........
	..****.**.****..
	..****.**.****..
	...........***..
	.......**...**..
	......***.......
	.....****.......
	.....****.......
	................
	................

[display_glyph chamber]
data = 
	................
	****************
	*....*....*....*
	*....*....*....*
	*....******....*
	*..............*
	*..............*
	*.....****.....*
	*.***.*..*.***.*
	*.....****.....*
	*......**......*
	*..............*
	*.************.*
	*...*......*...*
	****************
	................

[display_glyph feedrate]
data = 
	................
	................
	***.***.***.**..
	*...*...*...*.*.
	**..**..**..*.*.
	*...*...*...*.*.
	*...***.***.**..
	................
	**...*..***.***.
	*.*.*.*..*..*...
	**..***..*..**..
	*.*.*.*..*..*...
	*.*.*.*..*..***.
	................
	................
	................
hd44780_slot = 3
hd44780_data = 
	***..
	*....
	**...
	*.***
	..*.*
	..**.
	..*.*
	.....

[display_glyph fan]
hd44780_slot = 2
hd44780_data = 
	.....
	*..**
	**.*.
	..*..
	.*.**
	**..*
	.....
	.....

[display_glyph clock]
hd44780_slot = 4
hd44780_data = 
	.....
	.***.
	*..**
	*.*.*
	*...*
	.***.
	.....
	.....

[display_glyph degrees]
hd44780_slot = 5
hd44780_data = 
	.**..
	*..*.
	*..*.
	.**..
	.....
	.....
	.....
	.....

[display_glyph usb]
hd44780_slot = 6
hd44780_data = 
	.***.
	.***.
	.***.
	*****
	*****
	*****
	..*..
	..*..

[display_glyph sd]
hd44780_slot = 6
hd44780_data = 
	.....
	..***
	.****
	*****
	*****
	*****
	*****
	.....

[delayed_gcode setdisplayneopixel]
initial_duration = 1
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro red]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro orange]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro green]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro blue]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro white]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro yellow]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro purple]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[stepper_x]
step_pin = PE11
dir_pin = !PE10
enable_pin = !PE9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 300
position_max = 300
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PE7
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
interpolate = True
diag0_pin = ^!PB14
run_current = 1
driver_sgt = 1

[stepper_y]
step_pin = PD8
dir_pin = !PB12
enable_pin = !PD9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 310
position_max = 310
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PE15
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
diag0_pin = ^!PB13
interpolate = True
run_current = 1
driver_sgt = 1

[stepper_z]
step_pin = PE6
dir_pin = PC13
enable_pin = !PE5
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 240
position_min = -5
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 0.0

[tmc2209 stepper_z]
uart_pin = PC14
uart_address = 0
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z1]
step_pin = PE2
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z1]
uart_pin = PC15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z2]
step_pin = PD12
dir_pin = PC4
enable_pin = !PE8
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z2]
uart_pin = PA15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[tmc2209 extruder]
uart_pin = sht36:PB5
interpolate = false
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[gcode_arcs]
resolution = 1.0

[output_pin LIGHTS]
pin = PC8
pwm = true
shutdown_value = 0
value = 1
cycle_time = 0.01

[gcode_macro LIGHTS_ON]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.6

[gcode_macro LIGHTS_ON_20]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.20

[gcode_macro LIGHTS_OFF]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.0

[neopixel sb_leds]
pin = sht36:PB0
chain_count = 3
color_order = GRBW
initial_red = 0.0
initial_green = 0.0
initial_blue = 0.0
initial_white = 0.0

[gcode_macro _sb_vars]
variable_colors = {
	'logo': {
	'busy': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cleaning': {'r': 0.0, 'g': 0.02, 'b': 0.5, 'w': 0.0},
	'calibrating_z': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	'heating': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'homing': {'r': 0.0, 'g': 0.6, 'b': 0.2, 'w': 0.0},
	'leveling': {'r': 0.5, 'g': 0.1, 'b': 0.4, 'w': 0.0},
	'meshing': {'r': 0.2, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'printing': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'standby': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'red': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'orange': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'green': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'blue': {'r': 0.0, 'g': 0.0, 'b': 0.5, 'w': 0.0},
	'white': {'r': 1.0, 'g': 1.0, 'b': 1.0, 'w': 0.0},
	'yellow': {'r': 0.4, 'g': 0.4, 'b': 0.0, 'w': 0.0},
	'purple': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	},
	'nozzle': {
	'heating': {'r': 0.8, 'g': 0.35, 'b': 0.0, 'w':0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'on': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':1.0},
	'standby': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':0.8},
	},
	'thermal': {
	'hot': {'r': 1.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cold': {'r': 0.3, 'g': 0.0, 'b': 0.3, 'w': 0.0}
	}
	}
variable_logo_led_name = "sb_leds"
variable_logo_idx = "3"
variable_nozzle_led_name = "sb_leds"
variable_nozzle_idx = "1,2"
gcode = 

[gcode_macro _set_sb_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = params.LED|string %}
	{% set idx = (params.IDX|string).split(',') %}
	{% set transmit_last = params.TRANSMIT|default(1) %}
	
	{% for led_index in idx %}
	{% set transmit=transmit_last if loop.last else 0 %}
	set_led led={led} red={red} green={green} blue={blue} white={white} index={led_index} transmit={transmit}
	{% endfor %}

[gcode_macro _set_sb_leds_by_name]
gcode = 
	{% set leds_name = params.LEDS %}
	{% set color_name = params.COLOR %}
	{% set color = printer["gcode_macro _sb_vars"].colors[leds_name][color_name] %}
	{% set led = printer["gcode_macro _sb_vars"][leds_name + "_led_name"] %}
	{% set idx = printer["gcode_macro _sb_vars"][leds_name + "_idx"] %}
	{% set transmit = params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={color.r} green={color.g} blue={color.b} white={color.w} idx="{idx}" transmit={transmit}

[gcode_macro _set_logo_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].logo_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].logo_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro _set_nozzle_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].nozzle_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].nozzle_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro set_logo_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_logo_leds red=0 blue=0 green=0 white=0 transmit={transmit}

[gcode_macro set_nozzle_leds_on]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="on" transmit={transmit}

[gcode_macro set_nozzle_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="off" transmit={transmit}

[gcode_macro status_off]
gcode = 
	set_logo_leds_off transmit=0
	set_nozzle_leds_off

[gcode_macro status_ready]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="standby" transmit=1

[gcode_macro status_busy]
gcode = 
	_set_sb_leds_by_name leds="logo" color="busy" transmit=0
	set_nozzle_leds_on

[gcode_macro status_heating]
gcode = 
	_set_sb_leds_by_name leds="logo" color="heating" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="heating" transmit=1

[gcode_macro status_leveling]
gcode = 
	_set_sb_leds_by_name leds="logo" color="leveling" transmit=0
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="homing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	_set_sb_leds_by_name leds="logo" color="cleaning" transmit=0
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="meshing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	_set_sb_leds_by_name leds="logo" color="calibrating_z" transmit=0
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="printing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_orange]
gcode = 
	_set_sb_leds_by_name leds="logo" color="orange" transmit=0
	set_nozzle_leds_on

[gcode_macro status_red]
gcode = 
	_set_sb_leds_by_name leds="logo" color="red" transmit=0
	set_nozzle_leds_on

[gcode_macro status_purple]
gcode = 
	_set_sb_leds_by_name leds="logo" color="purple" transmit=0
	set_nozzle_leds_on

[gcode_macro status_green]
gcode = 
	_set_sb_leds_by_name leds="logo" color="green" transmit=0
	set_nozzle_leds_on

[gcode_macro status_white]
gcode = 
	_set_sb_leds_by_name leds="logo" color="white" transmit=0
	set_nozzle_leds_on

[gcode_macro status_yellow]
gcode = 
	_set_sb_leds_by_name leds="logo" color="yellow" transmit=0
	set_nozzle_leds_on

[gcode_macro status_blue]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	set_nozzle_leds_on

[delayed_gcode set_sb_leds_on_boot]
initial_duration = 1
gcode = 
	flicker
	status_ready

[gcode_macro flicker]
gcode = 
	{% set LEDTimes = [10, 20, 20, 240, 20, 40, 20, 100, 20, 20, 20, 260, 80, 20, 240, 60, 160, 20, 240, 20, 1000, 20, 20, 40, 100, 20, 274, 340, 860, 20, 1400, 20, 60, 20] %}
	{% set RGB_Red = 0.2 %}
	{% set RGB_Green = 0.2 %}
	{% set RGB_Blue = 0.2 %}
	{% set RGB_Strip = "sb_leds" %}
	{% set RGB_Strip1 = "mini12864" %}
	
	{% for toggletime in LEDTimes %}
	{% set ledTime = toggletime|string %}
	{% set loopCount = loop.index %}
	
	{% if loopCount is divisibleby 2 %}
	SET_LED LED={RGB_Strip} RED={RGB_Red} GREEN={RGB_Green} BLUE={RGB_Blue}
	G4 P{ledTime|int}
	{% else %}
	SET_LED LED={RGB_Strip}
	G4 P{ledTime|int}
	{% endif %}
	
	{% endfor %}
	
	{% for i in range(1,9) %}
	SET_LED LED={RGB_Strip} RED={RGB_Red+(i/10)} GREEN={RGB_Green+(i/10)}  BLUE={RGB_Blue+(i/10)} INDEX=1
	G4 P200
	{% endfor %}

[beacon]
serial = /dev/serial/by-id/usb-Beacon_Beacon_RevD_63E3DDD04E4B333448202020FF0A3315-if00
x_offset = 0
y_offset = -24
mesh_main_direction = x
mesh_runs = 2
home_xy_position = 117.5, 117.5
home_z_hop = 5
home_z_hop_speed = 30
home_xy_move_speed = 300
home_method = contact|proximity
home_method_when_homed = contact|proximity
home_autocalibrate = always|unhomed|never

[bed_mesh]
speed = 150
horizontal_move_z = 10
mesh_min = 10,10
mesh_max = 290,240
probe_count = 15,15
algorithm = bicubic
fade_start = 1
fade_end = 5
fade_target = 0

[z_tilt]
speed = 500
horizontal_move_z = 10
retries = 5
retry_tolerance = 0.004
z_positions = 
	-50, 18
	150, 348
	350, 18
points = 
	30, 5
	150, 245
	270, 5

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% if display_parameters == True %}
	{ action_respond_info("led_enable  : %d" % (led_enable))  }
	{ action_respond_info("status_macro: \'%s\'" % (status_macro))  }
	{ action_respond_info("fuzz_enable : %d" % (fuzz_enable))  }
	{ action_respond_info("fuzz_min    : %f" % (fuzz_min))  }
	{ action_respond_info("fuzz_max    : %f" % (fuzz_max))  }
	{ action_respond_info("probe_dock_enable: %d" % (probe_dock_enable))  }
	{ action_respond_info("attach_macro: \'%s\'" % (attach_macro))  }
	{ action_respond_info("detach_macro: \'%s\'" % (detach_macro))  }
	{% endif %}
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% if margin_enable == False %}
	{% set margin_size = 0 %}
	{% endif %}
	
	{ action_respond_info("{} object points, clamping to bed mesh [{!r} {!r}]".format(
	all_points | count,
	bed_mesh_min,
	bed_mesh_max,
	)) }
	
	{% if fuzz_enable == True %}
	{% set fuzz_range = range((fuzz_min * 100) | int, (fuzz_max * 100) | int + 1) %}
	{% set x_min = (bed_mesh_min[0] + fuzz_max - margin_size, x_min) | max - (fuzz_range | random / 100.0) %}
	{% set y_min = (bed_mesh_min[1] + fuzz_max - margin_size, y_min) | max - (fuzz_range | random / 100.0) %}
	{% set x_max = (bed_mesh_max[0] - fuzz_max + margin_size, x_max) | min + (fuzz_range | random / 100.0) %}
	{% set y_max = (bed_mesh_max[1] - fuzz_max + margin_size, y_max) | min + (fuzz_range | random / 100.0) %}
	{% else %}
	{% set x_min = [ bed_mesh_min[0], x_min - margin_size ] | max %}
	{% set y_min = [ bed_mesh_min[1], y_min - margin_size ] | max %}
	{% set x_max = [ bed_mesh_max[0], x_max + margin_size ] | min %}
	{% set y_max = [ bed_mesh_max[1], y_max + margin_size ] | min %}
	{% endif %}
	
	{ action_respond_info("Object bounds, clamped to the bed_mesh: {!r}, {!r}".format(
	(x_min, y_min),
	(x_max, y_max),
	)) }
	
	{% set points_x = (((x_max - x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((y_max - y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	{ action_respond_info( "Algorithm: {}".format(algorithm)) }
	
	{% set points_x = [points_x, min_points]|max  %}
	{% set points_y = [points_y, min_points]|max  %}
	{ action_respond_info( "Points: x: {}, y: {}".format(points_x, points_y) ) }
	
	{% if printer.configfile.settings.bed_mesh.relative_reference_index is defined %}
	{% set ref_index = (points_x * points_y / 2) | int %}
	{ action_respond_info( "Reference index: {}".format(ref_index) ) }
	{% else %}
	{% set ref_index = -1 %}
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	{% if led_enable == True %}
	{status_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={x_min},{y_min} mesh_max={x_max},{y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y} RELATIVE_REFERENCE_INDEX={ref_index}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}
variable_led_enable = False
variable_status_macro = 'status_meshing'
variable_fuzz_enable = False
variable_fuzz_min = 0
variable_fuzz_max = 4
variable_margin_enable = False
variable_margin_size = 5
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_display_parameters = True

[gcode_macro Z_TILT_ADJUST]
rename_existing = _Z_TILT_ADJUST
gcode = 
	{ action_respond_info("Z Tilt Adjust") }
	
	_Z_TILT_ADJUST {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	G28 Z0

[gcode_macro z_tilt_scan]
gcode = 
	z_tilt_adjust RETRY_TOLERANCE=1
	z_tilt_adjust HORIZONTAL_MOVE_Z=2

[gcode_macro MACROS_VARS]
variable_circ_fan_speed = 255
variable_probe_temp = 150
variable_starting_wled = 2
variable_heating_wled = 4
variable_ending_wled = 3
variable_ending_length = 25
variable_purge_length = 40
variable_filament_swap_length = 0.8
variable_pla_pa = 0.00525
variable_pet_pa = 0.00650
variable_abs_pa = 0.00460
variable_pet_za = 0.010
variable_move_away_home = 0
variable_homing_retract = 20
gcode = 

[gcode_macro MATERIAL_PA]
gcode = 
	{% set MATERIAL = params.MATERIAL|default("XXX")|string %}
	{% set TEXT ="Setting PA for " + MATERIAL %}
	{% set PLA = printer["gcode_macro MACROS_VARS"].pla_pa|default(0)%}
	{% set PET = printer["gcode_macro MACROS_VARS"].pet_pa|default(0)%}
	{% set ABS = printer["gcode_macro MACROS_VARS"].abs_pa|default(0)%}
	{% set PETZ = printer["gcode_macro MACROS_VARS"].pet_za|default(0)%}
	{% if MATERIAL == "PLA" %}
	SET_PRESSURE_ADVANCE ADVANCE={PLA}
	{% elif MATERIAL == "PET" %}
	SET_PRESSURE_ADVANCE ADVANCE={PET}
	SET_GCODE_OFFSET Z_ADJUST={PETZ} MOVE=1
	{% elif MATERIAL == "ABS" %}
	SET_PRESSURE_ADVANCE ADVANCE={ABS}
	{% else %}
	{% set TEXT ="No PA value for " + MATERIAL %}
	{% endif %}
	DISPLAYTEXT TEXT="{TEXT}"

[gcode_macro PURGE_LINE]
gcode = 
	DISPLAYTEXT TEXT="Prime Line"
	G1 X75 E25 F1000
	G92 E0;
	G90
	G0 X75 Y4 F6000
	G1 Z0.2 F200
	G91
	G1 X150 E30 F1200;
	G1 Y1
	G1 X-150 E30 F1200;
	G92 E0.0
	G1 Z1 F5000

[gcode_macro PRINT_START]
gcode = 
	{% set BED_TEMP = params.BED_TEMP|default(110)|float %}
	{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(250)|float %}
	{% set ENCLOSURE_TEMP = params.ENCLOSURE_TEMP|default(45)|int %}
	{% set PROBE_TEMP = printer["gcode_macro MACROS_VARS"].probe_temp|default(0)%}
	
	SET_TEMP HEATER="bed" TEMP={BED_TEMP}
	SET_TEMP HEATER="extruder" TEMP={PROBE_TEMP} WAIT=1
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	DISPLAYTEXT TEXT="Homing"
	G28
	{% endif %}
	DISPLAYTEXT TEXT="Heating Bed"
	SET_TEMP HEATER="bed" TEMP={BED_TEMP} WAIT=1
	
	{% if not printer.z_tilt.applied %}
	DISPLAYTEXT TEXT="Z tilt thingy"
	Z_TILT_ADJUST
	{% endif %}
	MATERIAL_PA MATERIAL={FILAMENT}
	DISPLAYTEXT TEXT="Heating Extruder"
	SET_TEMP HEATER="extruder" TEMP={EXTRUDER_TEMP} WAIT=1
	
	BED_MESH_CALIBRATE
	SET_FAN_SPEED FAN=rebreather SPEED=1
	SET_FAN_SPEED FAN=stepper_fans SPEED=0.25
	MATERIAL_PA MATERIAL={FILAMENT}
	G4 P1000
	PURGE_LINE
	
	
	DISPLAYTEXT TEXT="Printing..."

[gcode_macro G32]
gcode = 
	BED_MESH_CLEAR
	G28
	Z_TILT_ADJUST
	G28
	G0 X75 Y75 Z30 F3600

[gcode_macro PRINT_END]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	{% set FILAMENT = params.FILAMENT|default(PLA) %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	M400
	G92 E0
	G1 E-25.0 F1800
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	TURN_OFF_HEATERS
	M107
	G1 Z2 F3000
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	
	{% if FILAMENT == 'ABS' or params.FILAMENT == 'ASA' %}
	NEVERMORE_END_PRINT
	{% endif %}
	
	DISPLAYTEXT TEXT="Print Complete"

[gcode_macro SET_TEMP]
gcode = 
	{% set HEATER = params.HEATER|default("")|string %}
	{% set TEMP = params.TEMP|default(0)|int %}
	{% set WAIT = params.WAIT|default(0)|int %}
	
	{% if HEATER == "extruder" %}
	{% if WAIT == 1 %}
	M109 S{TEMP}
	{% else %}
	M104 S{TEMP}
	{% endif %}
	{% else %}
	{% if WAIT == 1 %}
	M190 S{TEMP}
	{% else %}
	M140 S{TEMP}
	{% endif %}
	{% endif %}

[gcode_macro ENDING_RETRACTION]
gcode = 
	{% set RETRACT = printer["gcode_macro MACROS_VARS"].ending_length|default(0)%}
	G1 E{RETRACT*-1} F1800

[gcode_macro PARK_AT_PRINT_END]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600

[gcode_macro Homing_Variables]
variable_move_away_home = 0
variable_x_homing_pos = 150
variable_y_homing_pos = 150
variable_homing_current = 0.8
variable_homing_retract_x = 150
variable_homing_retract_y = 20
variable_homing_retract_speed = 5000
variable_z_end_pos = 30
variable_is_sensorless = True
variable_display_parameters = True
gcode = 

[homing_override]
axes = xyz
gcode = 
	DISPLAY_PARAMETERS
	
	
	SET_KINEMATIC_POSITION Z=0
	MOVE_AWAY_BEFORE_HOMING PARAMS="Z"
	WAIT TIME=2
	
	{% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}
	
	{% if home_all or 'X' in params %}
	_HOME_X
	{% endif %}
	
	{% if home_all or 'Y' in params %}
	_HOME_Y
	{% endif %}
	
	{% if home_all or 'Z' in params %}
	_HOME_Z
	{% endif %}

[gcode_macro DISPLAY_PARAMETERS]
gcode = 
	{% set DISPLAY_PARAMS = printer["gcode_macro Homing_Variables"].display_parameters %}
	{% set is_sensorless = printer["gcode_macro Homing_Variables"].is_sensorless %}
	{% set x_homing_pos = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set y_homing_pos = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	{% set homing_current = printer["gcode_macro Homing_Variables"].homing_current %}
	{% set homing_retract_x = printer["gcode_macro Homing_Variables"].homing_retract_x %}
	{% set homing_retract_y = printer["gcode_macro Homing_Variables"].homing_retract_y %}
	{% set homing_retract_speed = printer["gcode_macro Homing_Variables"].homing_retract_speed %}
	{% set z_end_pos = printer["gcode_macro Homing_Variables"].z_end_pos %}
	
	{% if DISPLAY_PARAMS == True %}
	{ action_respond_info("is_sensorless  : %d" % (is_sensorless))  }
	{ action_respond_info("x_homing_pos  : %d" % (x_homing_pos))  }
	{ action_respond_info("y_homing_pos  : %d" % (y_homing_pos))  }
	{ action_respond_info("homing_current  : %d" % (homing_current))  }
	{ action_respond_info("homing_retract_x  : %d" % (homing_retract_x))  }
	{ action_respond_info("homing_retract_y  : %d" % (homing_retract_y))  }
	{ action_respond_info("homing_retract_speed  : %d" % (homing_retract_speed))  }
	{ action_respond_info("z_end_pos  : %d" % (z_end_pos))  }
	{% endif %}

[gcode_macro MOVE_AWAY_BEFORE_HOMING]
gcode = 
	{% set MAH = printer["gcode_macro Homing_Variables"].move_away_home|default(0)%}
	{% set PARAMS = params.PARAMS|default("")|string %}
	
	{% set home_all = 'X' not in PARAMS and 'Y' not in PARAMS and 'Z' not in PARAMS %}
	
	
	{% if home_all or 'X' in PARAMS %}
	G1 X-{MAH/2}  F6000
	{% endif %}
	
	{% if home_all or 'Y' in PARAMS %}
	G1  Y-{MAH/2} F6000
	{% endif %}
	
	{% if home_all or 'Z' in PARAMS %}
	G1 Z{MAH} F100
	{% endif %}

[gcode_macro _HOME_X]
gcode = 
	DISPLAYTEXT TEXT="Homing X Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_x|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION X=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="X"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 X
	
	G91
	G1 X-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Y]
gcode = 
	DISPLAYTEXT TEXT="Homing Y Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_y|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION Y=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="Y"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 Y
	
	G91
	G1 Y-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Z]
gcode = 
	{% set Ez = printer["gcode_macro Homing_Variables"].z_end_pos %}
	{% set Hx = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set Hy = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	
	DISPLAYTEXT TEXT="Homing Z Axis"
	
	G1 X{Hx} Y{Hy} F15000
	G28 Z
	G1 Z{Ez}

[gcode_macro ABSOLUTE_COORDINATES]
gcode = 
	G90

[gcode_macro RELATIVE_COORDINATES]
gcode = 
	G91

[gcode_macro DISPLAYTEXT]
gcode = 
	{% set TEXT = params.TEXT|default("")|string %}
	RESPOND MSG="{TEXT}"
	SET_DISPLAY_TEXT MSG="{TEXT}"

[gcode_macro DISPLAY_PROGRESS]
gcode = 
	{% set TOTAL_LAYERS = params.TOTAL_LAYERS|default("")|string %}
	{% set CURRENT_LAYER = params.CURRENT_LAYER|default("")|string %}
	RESPOND MSG="Total layers {TOTAL_LAYERS}, current layer {CURRENT_LAYER}"

[gcode_macro TEMPERATURE_WAIT]
rename_existing = _TEMPERATURE_WAIT
gcode = 
	{% set SENSOR = params.SENSOR|default("")|string %}
	{% set MINIMUM = params.MINIMUM|int %}
	{% set MSG = "Enclosure temperature has reached " + MINIMUM |string %}
	
	DISPLAYTEXT TEXT="Heatsoaking..."
	_TEMPERATURE_WAIT SENSOR="{SENSOR}" MINIMUM={MINIMUM}
	DISPLAYTEXT TEXT="{MSG}"

[gcode_macro WAIT]
gcode = 
	{% set TIME = params.TIME|default(0)|int %}
	G4 P{TIME*1000}

[gcode_macro CHOME]
gcode = 
	{% if printer.toolhead.homed_axes != "xyz" %}
	DISPLAYTEXT TEXT="Homing.."
	G28
	{% endif %}

[gcode_macro RESET_EXTRUDER]
gcode = 
	G92 E0

[gcode_macro PARK_TOOLHEAD]
gcode = 
	{% set th = printer.toolhead %}
	ABSOLUTE_COORDINATES
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y//2} F15000

[gcode_macro DUMP_VARIABLES]
gcode = 
	{% set filter_name = params.NAME|default('')|string|lower %}
	{% set filter_value = params.VALUE|default('')|string|lower %}
	{% set show_cfg = params.SHOW_CFG|default(0)|int %}
	
	{% set out = [] %}
	
	{% for key1 in printer %}
	{% for key2 in printer[key1] %}
	{% if (show_cfg or not (key1|lower == 'configfile' and key2|lower in ['config', 'settings'])) and (filter_name in key1|lower or filter_name in key2|lower) and filter_value in printer[key1][key2]|string|lower %}
	{% set dummy = out.append("printer['%s'].%s = %s" % (key1, key2, printer[key1][key2])) %}
	{% endif %}
	{% else %}
	{% if filter_name in key1|lower and filter_value in printer[key1]|string|lower %}
	{% set dummy = out.append("printer['%s'] = %s" % (key1, printer[key1])) %}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	{action_respond_info(out|join("\n"))}

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=UNLOAD_FILAMENT_state
	
	M82
	G92 E0
	G1 E2 F3600
	G1 E0 F3600
	G1 E3 F3600
	G1 E0 F3600
	G1 E4 F3600
	G1 E0 F3600
	
	M83
	G1 E-20 F3600
	G4 P3000
	G1 E{DISTANCE|float * -1} F3000
	RESTORE_GCODE_STATE NAME=UNLOAD_FILAMENT_state

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=LOAD_FILAMENT_state
	
	M83
	G92 E0
	G1 E{DISTANCE|float} F200
	
	
	
	
	G1 E50 F150
	
	
	G92 E0
	RESTORE_GCODE_STATE NAME=LOAD_FILAMENT_state

[gcode_macro PID_HOTEND]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro PID_BED]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=80

[gcode_macro Z_ENDSTOP]
gcode = 
	Z_ENDSTOP_CALIBRATE

[gcode_macro PROBE_CAL]
gcode = 
	
	G28
	PROBE_CALIBRATE

[gcode_macro IS_CAL]
gcode = 
	
	G28
	SHAPER_CALIBRATE

[gcode_macro SPEEDTEST]
gcode = 
	
	
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest_state
	
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{maxX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{maxX} Y{minY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest_state

[gcode_macro SPEEDTEST2]
gcode = 
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest2_state
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest2_state

[gcode_macro PRESSURE_ADVANCE_CALIBRATION]
description = Calibrate the pressure advance by printing a grid pattern
gcode = 
	
	
	
	{% set pa_start     = params.START|default(0.02)|float %}
	{% set pa_increment = params.INCREMENT|default(0.005)|float %}
	
	{% set do_raft = params.RAFT|default(1)|int %}
	
	{% set print_size      = params.SIZE|default(120)|int %}
	{% set num_bands       = params.BANDS_LIMIT|default(999)|int %}
	{% set lines_per_band  = params.LINES_PER_BAND|default(6)|int %}
	{% set e_multiplier    = params.EXTRUSION_MULTIPLIER|default(1.25 if do_raft == 1 else 1.5)|float %},
	{% set retract_length  = params.RETRACT|default(0.6)|float %}
	{% set initial_purge   = params.PURGE_MM|default(8)|int %}
	
	{% set feedrate_control = params.CONTROL_SPEED|default(30)|int * 60 %}
	{% set feedrate_outer   = params.OUTER_SPEED|default(40)|int * 60 %}
	{% set feedrate_inner   = params.INNER_SPEED|default(120)|int * 60 %}
	{% set feedrate_travel  = params.TRAVEL_SPEED|default(200)|int * 60 %}
	{% set feedrate_raft    = params.RAFT_SPEED|default(120)|int * 60 %}
	{% set feedrate_z       = 5 * 60 %}
	{% set feedrate_retract = 50 * 60 %}
	
	{% set spacing_line  = params.LINE_SPACING|default(0.4)|float %}
	{% set spacing_band  = 2 %}
	{% set spacing_raft  = 2 %}
	
	{% set fast_line_ratio_percent = 50 %}
	
	{% set lines_per_band    = [2, lines_per_band]|max %}
	{% set e_multiplier      = [1, e_multiplier]|max %}
	{% set num_lines_control = (lines_per_band / 2)|round(0, 'floor')|int %}
	{% set num_lines_test    = (lines_per_band / 2)|round(0, 'ceil')|int %}
	{% set spacing_line      = spacing_line * (1 + e_multiplier - 1.25) %}
	
	{% set max_x = printer.toolhead.axis_maximum.x|float %}
	{% set max_y = printer.toolhead.axis_maximum.y|float %}
	{% set nozzle_diameter = printer.configfile.config['extruder'].nozzle_diameter|float %}
	{% set line_width    = nozzle_diameter * 1.25 %}
	{% set line_height   = nozzle_diameter / 2 %}
	{% set z_hop_height  = 2 * line_height %}
	{% set e_per_mm      = (line_width * line_height) / (3.1415 * (1.75/2)**2) %}
	{% set spacing_purge = line_height * 0.8 %}
	
	{% set spacing_raft   = (spacing_raft / line_width)|round * line_width %}
	{% set num_raft_lines = ([print_size, max_x]|min / spacing_raft)|round(0, 'floor')|int %}
	{% set print_width    = num_raft_lines * spacing_raft %}
	
	{% set band_height      = lines_per_band * line_width + (lines_per_band - 1) * spacing_line + spacing_band %}
	{% set bands_per_height = (([print_size, max_y]|min  - spacing_purge) / band_height)|round(0, 'floor')|int %}
	{% set num_bands        = [num_bands, bands_per_height]|min %}
	{% set print_height     = num_bands * band_height - spacing_band - spacing_purge %}
	
	{% set slow_line_length = ((print_width * (1 - fast_line_ratio_percent / 100) / 2) / spacing_raft)|round * spacing_raft + spacing_raft / 2 %}
	{% set fast_line_length = print_width - slow_line_length * 2 %}
	{% set thick_raft_num1 = (slow_line_length / spacing_raft)|round|int %}
	{% set thick_raft_num2  = num_raft_lines - thick_raft_num1 + 1 %}
	
	{% set x_start = max_x / 2 - print_width  / 2 %}
	{% set y_start = max_y / 2 - print_height / 2 %}
	
	{action_respond_info("")}
	{action_respond_info("Starting Pressure Advance calibration print.")}
	{action_respond_info("")}
	{action_respond_info("This operation can not be interrupted by normal means. Hit the \"emergency stop\" button once the print starts exhibiting PA values that are obviously too high.")}
	{action_respond_info("")}
	{action_respond_info("PA of first band: %.4f" % pa_start)}
	{action_respond_info("PA of last band: %.4f" % (num_bands * pa_increment))}
	{action_respond_info("PA increment per band: %.4f" % pa_increment)}
	{action_respond_info("Number of bands: %d" % num_bands)}
	{action_respond_info("")}
	{action_respond_info("Inspect the printed model. "
	"Look at the top and bottom lines in each band, on the right side of the two vertical raft bars (where the print speeds change). "
	"Find the highest band from the bottom where the lines at its top still resemble the lines at its bottom, with no visible extrusion width irregularities. "
	"Your final Pressure Advance value would then be:"
	)}
	{action_respond_info("")}
	{action_respond_info("PA = %.4f + (%.4f * band_number)" % (pa_start, pa_increment))}
	{action_respond_info("")}
	{action_respond_info("Update your [extruder] config section and set \"pressure_advance\" to the value you calculated.")}
	{action_respond_info("")}
	
	
	
	
	
	
	
	
	
	SAVE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION
	{% set pa_saved = printer.configfile.settings['extruder'].pressure_advance %}
	SET_PRESSURE_ADVANCE ADVANCE={pa_start}
	
	
	
	
	M117 Priming
	G90
	G0 X{x_start} Y{y_start} Z{line_height} F{feedrate_travel}
	G91
	G1 E{initial_purge} F{5 * 60}
	G1 X{print_width}  E{print_width * e_per_mm} F{feedrate_raft / 2}
	G1 Y{line_width}   E{line_width * e_per_mm}  F{feedrate_raft / 2}
	G1 X-{print_width} E{print_width * e_per_mm} F{feedrate_raft / 2}
	
	
	
	
	{% if do_raft == 1 %}
	G0 F{feedrate_raft}
	
	{% for curr_raft_line in range(1, num_raft_lines + 2) %}
	
	{% if curr_raft_line == thick_raft_num1 or curr_raft_line == thick_raft_num2 %}
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	G1 Y{loop.cycle(-1.0, 1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	{% endif %}
	
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	
	
	{% if not loop.last %}
	{% set horizontal_move = spacing_raft - (2 * line_width if curr_raft_line == thick_raft_num1 - 1 or curr_raft_line == thick_raft_num2 - 1 else 0) %}
	G1 X{horizontal_move} E{horizontal_move * e_per_mm}
	{% endif %}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	{% endif %}
	
	
	
	
	M117 Printing bands
	G90
	G0 X{x_start} Y{y_start + 2 * line_width + spacing_purge} F{feedrate_travel}
	G0 Z{line_height + (line_height if do_raft == 1 else 0)} F{feedrate_z}
	G91
	G1 E{retract_length} F{feedrate_retract}
	
	
	{% for curr_band_num in range(1, num_bands + 1) %}
	{% set outer_loop = loop %}
	
	{% set curr_pa_value = pa_start + (curr_band_num - 1) * pa_increment %}
	SET_PRESSURE_ADVANCE ADVANCE={curr_pa_value}
	M117 Band {curr_band_num} PA {curr_pa_value|round(4)}
	
	
	{% for _ in range(num_lines_control) %}
	G1 X{print_width} E{print_width * e_per_mm * e_multiplier} F{feedrate_control}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	G0 X-{print_width} Y{spacing_line + line_width} F{feedrate_travel}
	
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endfor %}
	
	
	{% for _ in range(num_lines_test) %}
	{% for data in [{'mm': slow_line_length, 'f': feedrate_outer}, {'mm': fast_line_length, 'f': feedrate_inner}, {'mm': slow_line_length, 'f': feedrate_outer}] %}
	G1 X{data.mm} E{data.mm * e_per_mm * e_multiplier} F{data.f}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	{% if not (outer_loop.last and loop.last) %}
	G0 X-{print_width} Y{(spacing_line if not loop.last else spacing_band) + line_width} F{feedrate_travel}
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	
	
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z20 F{feedrate_z}
	G0 X-{print_width / 2} Y{[50, max_y - (y_start + print_height)]|min} F{feedrate_travel}
	
	M117
	SET_PRESSURE_ADVANCE ADVANCE={pa_saved}
	RESTORE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION

[gcode_macro TEST_SPEED]
gcode = 
	
	{% set speed  = params.SPEED|default(printer.configfile.settings.printer.max_velocity)|int %}
	
	{% set iterations = params.ITERATIONS|default(5)|int %}
	
	{% set accel  = params.ACCEL|default(printer.configfile.settings.printer.max_accel)|int %}
	
	{% set bound = params.BOUND|default(20)|int %}
	
	{% set smallpatternsize = SMALLPATTERNSIZE|default(20)|int %}
	
	
	
	{% set x_min = printer.toolhead.axis_minimum.x + bound %}
	{% set x_max = printer.toolhead.axis_maximum.x - bound %}
	{% set y_min = printer.toolhead.axis_minimum.y + bound %}
	{% set y_max = printer.toolhead.axis_maximum.y - bound %}
	
	
	
	{% set x_center = (printer.toolhead.axis_minimum.x|float + printer.toolhead.axis_maximum.x|float ) / 2 %}
	{% set y_center = (printer.toolhead.axis_minimum.y|float + printer.toolhead.axis_maximum.y|float ) / 2 %}
	
	
	{% set x_center_min = x_center - (smallpatternsize/2) %}
	{% set x_center_max = x_center + (smallpatternsize/2) %}
	{% set y_center_min = y_center - (smallpatternsize/2) %}
	{% set y_center_max = y_center + (smallpatternsize/2) %}
	
	
	SAVE_GCODE_STATE NAME=TEST_SPEED
	
	
	{ action_respond_info("TEST_SPEED: x_min %d, y_min %d, x_max %d, y_max %d" % (x_min, y_min, x_max, y_max)) }
	{ action_respond_info("TEST_SPEED: starting %d iterations at speed %d, accel %d" % (iterations, speed, accel)) }
	
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	G28 X Y
	{% endif %}
	
	
	
	
	
	
	
	
	
	
	
	
	G4 P1000
	GET_POSITION
	
	
	G0 X{x_min} Y{y_min} Z{bound + 10} F{speed*60}
	
	
	SET_VELOCITY_LIMIT VELOCITY={speed} ACCEL={accel} ACCEL_TO_DECEL={accel / 2}
	
	{% for i in range(iterations) %}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	{% endfor %}
	
	
	SET_VELOCITY_LIMIT VELOCITY={printer.configfile.settings.printer.max_velocity} ACCEL={printer.configfile.settings.printer.max_accel} ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel}
	
	
	G28 X Y
	
	
	
	G4 P1000
	GET_POSITION
	
	
	RESTORE_GCODE_STATE NAME=TEST_SPEED

[gcode_macro SETUP_KAMP_MESHING]
gcode = 
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=display_parameters   VALUE={params.DISPLAY_PARAMETERS|default(True)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=led_enable   VALUE={params.LED_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=status_macro VALUE='"{params.STATUS_MACRO|default('status_meshing')|string}"'
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_enable VALUE={params.FUZZ_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_min    VALUE={params.FUZZ_MIN|default(0)|float}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_max    VALUE={params.FUZZ_MAX|default(4)|float}
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=probe_dock_enable  VALUE={params.PROBE_DOCK_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=attach_macro VALUE='"{params.ATTACH_MACRO|default('Attach_Probe')|string}"'
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=detach_macro VALUE='"{params.DETACH_MACRO|default('Dock_Probe')|string}"'

[input_shaper]
shaper_freq_x = 86.8
shaper_type_x = zv
shaper_freq_y = 62.2
shaper_type_y = zv

[probe]
z_offset = -0.0400

[beacon model default]
model_coef = 1.409155451498927,
	1.7229833219997472,
	0.7624260199879447,
	0.3933310021549746,
	0.3504714980336664,
	0.3215136667184013,
	-0.12014580629124338,
	-0.22419779942999016,
	0.19713656245482147,
	0.188750402116144
model_domain = 3.120873231931901e-07,3.332026812812074e-07
model_range = 0.200000,5.000000
model_temp = 23.909578
model_offset = 0.02500

[bed_mesh default]
version = 1
points = 
	-0.062140, -0.036984, -0.007379, 0.031314, 0.058627, 0.084848, 0.107257, 0.111945, 0.135207, 0.152355, 0.170171
	-0.128044, -0.093273, -0.053917, -0.019434, 0.015362, 0.051030, 0.076081, 0.091292, 0.113629, 0.133648, 0.155842
	-0.171323, -0.136118, -0.096393, -0.057201, -0.010727, 0.024397, 0.048697, 0.072530, 0.099236, 0.126818, 0.150713
	-0.201543, -0.161727, -0.119034, -0.066854, -0.018463, 0.014217, 0.047420, 0.076211, 0.103883, 0.134441, 0.171920
	-0.229879, -0.188570, -0.139992, -0.085341, -0.040984, 0.002604, 0.042138, 0.073877, 0.104620, 0.133705, 0.171879
	-0.263766, -0.213518, -0.162008, -0.108459, -0.058518, -0.007646, 0.032310, 0.069869, 0.102956, 0.138912, 0.180918
	-0.296565, -0.242362, -0.188285, -0.127789, -0.071974, -0.019641, 0.027806, 0.070759, 0.105252, 0.142100, 0.184275
	-0.296242, -0.233747, -0.171416, -0.107834, -0.048348, 0.004540, 0.056827, 0.100566, 0.141602, 0.182628, 0.230079
	-0.281192, -0.228380, -0.164876, -0.101596, -0.030960, 0.023575, 0.079761, 0.121563, 0.171967, 0.216584, 0.265930
	-0.307454, -0.252371, -0.190633, -0.113183, -0.041936, 0.019598, 0.074971, 0.120663, 0.178367, 0.230549, 0.282552
	-0.324293, -0.258430, -0.193413, -0.119856, -0.045648, 0.021113, 0.080729, 0.133249, 0.192194, 0.246004, 0.297448
x_count = 11
y_count = 11
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 59.444
max_x = 240.556
min_y = 75.541944
max_y = 224.458048
=======================
Extruder max_extrude_ratio=4157.101129
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 145, in _read_config
    pconfig.check_unused_options(config)
  File "/home/pi/klipper/klippy/configfile.py", line 308, in check_unused_options
    raise error("Option '%s' is not valid in section '%s'"
configparser.Error: Option 'home_xy_position' is not valid in section 'beacon'
webhooks client 548280569136: New connection
webhooks client 548280569136: Client info {'program': 'Moonraker', 'version': 'v0.8.0-328-g5a60d64'}
Attempting MCU 'mcu' reset
Unable to issue reset command on MCU 'rpi'
Unable to issue reset command on MCU 'sht36'
Attempting MCU 'beacon' reset
Write g-code response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/gcode.py", line 459, in _respond_raw
    os.write(self.fd, (msg+"\n").encode())
BlockingIOError: [Errno 11] Resource temporarily unavailable
webhooks client 548280569136: Disconnected
Restarting printer
Start printer at Sun Apr 28 07:00:52 2024 (1714284052.1 1041647.0)
===== Config file =====
[exclude_object]

[idle_timeout]
timeout = 3600

[force_move]
enable_force_move = True

[respond]
default_type = echo

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	CANCEL_PRINT

[pause_resume]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
variable_park = True
gcode = 
	TURN_OFF_HEATERS
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	PRINT_END
	BASE_CANCEL_PRINT

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32f446xx_2D0053000E51323130373733-if00

[temperature_sensor Spider]
sensor_type = temperature_mcu
min_temp = 10
max_temp = 100

[board_pins spider]
aliases = 
	
	X_STEP=PE11, X_DIR=PE10, X_ENABLE=PE9,
	Y_STEP=PD8, Y_DIR=PB12, Y_ENABLE=PD9,
	Z_STEP=PD14, Z_DIR=PD13, Z_ENABLE=PD15,
	E0_STEP=PD5, E0_DIR=PD6, E0_ENABLE=PD4,
	E1_STEP=PE6, E1_DIR=PC13, E1_ENABLE=PE5,
	E2_STEP=PE2, E2_DIR=PE4, E2_ENABLE=PE3,
	E3_STEP=PD12, E3_DIR=PC4, E3_ENABLE=PE8,
	E4_STEP=PE1, E4_DIR=PE0, E4_ENABLE=PC5,
	
	X_MIN=PB14, X_MAX=PA1,
	Y_MIN=PB13, Y_MAX=PA2,
	Z_MIN=PA0, Z_MAX=PA3,
	
	X_UART=PE7, Y_UART=PE15, Z_UART=PD10,
	E0_UART=PD7, E1_UART=PC14, E2_UART=PC15,
	E3_UART=PA15, E4_UART=PD11,
	
	E_HEATER=PB15, E_THERMISTOR=PC0,
	E1_HEATER=PC8, E1_THERMISTOR=PC1,
	E2_HEATER=PB3, E2_THERMISTOR=PC2,
	BED_HEATER=PB4, BED_THERMISTOR=PC3,
	FAN0=PB0, FAN1=PB1, FAN2=PB2,
	
	LED-R=PB6, LED-G=PB5, LED-B=PB7,
	
	EXP1_1=PC9, EXP1_3=PC11, EXP1_5=PC10, EXP1_7=PD0, EXP1_9=<GND>,
	EXP1_2=PA8, EXP1_4=PD2, EXP1_6=PC12, EXP1_8=PD1, EXP1_10=<5V>,
	
	EXP2_1=PA6, EXP2_3=PC6, EXP2_5=PC7, EXP2_7=PB10, EXP2_9=<GND>,
	EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<5V>

[mcu rpi]
serial = /tmp/klipper_host_mcu

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 10
max_temp = 100

[gcode_shell_command rpi_fan_50]
command = i2cset -y 1 0x01a 0x32
timeout = 30.
verbose = True

[gcode_shell_command rpi_fan_25]
command = i2cset -y 1 0x01a 0x19
timeout = 30.
verbose = True

[gcode_macro rpi_fan_50]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_50

[gcode_macro rpi_fan_25]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_25

[mcu sht36]
canbus_uuid = 943ff2eb48fd

[temperature_sensor sht36]
sensor_type = temperature_mcu
sensor_mcu = sht36

[printer]
kinematics = corexy
max_velocity = 800
max_accel = 20000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[extruder]
sensor_pin = sht36:PA3
sensor_type = PT1000
heater_pin = sht36:PA8
min_temp = 10
max_temp = 270
max_power = 1.0
min_extrude_temp = 10
control = pid
pid_kp = 20.362
pid_ki = 2.225
pid_kd = 46.579
pressure_advance_smooth_time = 0.040
max_extrude_only_velocity = 120
max_extrude_only_accel = 800
max_extrude_only_distance = 1150
max_extrude_cross_section = 9999
nozzle_diameter = 0.400
filament_diameter = 1.75
step_pin = sht36:PB4
dir_pin = !sht36:PB3
enable_pin = !sht36:PA15
full_steps_per_rotation = 200
rotation_distance = 22.66103
gear_ratio = 50:10
microsteps = 16
pressure_advance = 0.05

[temperature_sensor chamber]
sensor_type = NTC 100K MGB18-104F39050L32
sensor_pin = PC2
min_temp = -100
max_temp = 100
gcode_id = C

[heater_bed]
heater_pin = PB4
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PB0
max_power = 0.9
min_temp = -160
max_temp = 120
control = pid
pid_kp = 41.450
pid_ki = 1.322
pid_kd = 324.866

[multi_pin stepper_drivers_multipin]
pins = PB5, PB6, PB7

[controller_fan stepper_drivers]
pin = multi_pin:stepper_drivers_multipin
hardware_pwm = False
max_power = 1.0
fan_speed = 0.75
shutdown_speed = 0.0
stepper = stepper_x, stepper_y

[heater_fan controller_fan]
pin = PB2
cycle_time = 0.00004
off_below = 0.1
kick_start_time = 0.5
heater = heater_bed
heater_temp = 50.0
max_power = 1.0

[heater_fan hotend_fan]
pin = sht36:PB10
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 40.0

[fan]
pin = sht36:PB11
max_power = 0.85
cycle_time = 0.00005
kick_start_time = 0
off_below = 0.0
shutdown_speed = 0

[fan_generic stepper_fans]
pin = PA13
max_power = 0.5
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.0001

[fan_generic rebreather]
pin = PA14
max_power = 1.0
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.00010

[gcode_macro rebreather_start_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.5

[gcode_macro rebreather_end_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.7
	UPDATE_DELAYED_GCODE ID=rebreather_stop_delayed DURATION=900

[delayed_gcode rebreather_stop_delayed]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.0

[display]
lcd_type = uc1701
cs_pin = PC11
a0_pin = PD2
rst_pin = PC10
encoder_pins = ^PC6,^PC7
click_pin = ^!PA8
contrast = 63
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6
spi_software_sclk_pin = PA5
display_group = __voron_display_16x4

[gcode_macro M300]
gcode = SET_PIN PIN=BEEPER_pin VALUE={S}
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[neopixel mini12864]
pin = PC12
chain_count = 60
initial_red = 0.1
initial_green = 0.5
initial_blue = 0.0
color_order = RGB

[display_template _heater_temperature]
param_heater_name = "extruder"
text = 
	{% if param_heater_name in printer %}
	{% set heater = printer[param_heater_name] %}
	
	{% if param_heater_name == "heater_bed" %}
	{% if heater.target %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~bed_heat{frame}~
	{% else %}
	~bed~
	{% endif %}
	{% else %}
	~extruder~
	{% endif %}
	
	{ "%3.0f" % (heater.temperature,) }
	
	{% if heater.target and (heater.temperature - heater.target)|abs > 2 %}
	~right_arrow~
	{ "%0.0f" % (heater.target,) }
	{% endif %}
	~degrees~
	{% endif %}

[display_template _fan_speed]
text = 
	{% if 'fan' in printer %}
	{% set speed = printer.fan.speed %}
	{% if speed %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~fan{frame}~
	{% else %}
	~fan1~
	{% endif %}
	{ "{:>4.0%}".format(speed) }
	{% endif %}

[display_template _printing_time]
text = 
	{% set ptime = printer.idle_timeout.printing_time %}
	{ "%02d:%02d" % (ptime // (60 * 60), (ptime // 60) % 60) }

[display_template _print_status]
text = 
	{% if printer.display_status.message %}
	{ printer.display_status.message }
	{% elif printer.idle_timeout.printing_time %}
	{% set pos = printer.toolhead.position %}
	{ "X%-4.0fY%-4.0fZ%-5.2f" % (pos.x, pos.y, pos.z) }
	{% else %}
	Ready
	{% endif %}

[display_data __voron_display_16x4 extruder]
position = 0, 0
text = 
	{% set active_extruder = printer.toolhead.extruder %}
	{ render("_heater_temperature", param_heater_name=active_extruder) }

[display_data __voron_display_16x4 fan]
position = 0, 10
text = { render("_fan_speed") }

[display_data __voron_display_16x4 heater_bed]
position = 1, 0
text = { render("_heater_temperature", param_heater_name="heater_bed") }

[display_data __voron_display_16x4 chamber]
position = 1,10
text = 
	{% set chamber = printer['temperature_sensor chamber'] %}
	~chamber~
	{ "%3.0f" % (chamber.temperature,) }
	~degrees~

[display_data __voron_display_16x4 print_progress]
position = 2, 0
text = { "{:^10.0%}".format(printer.display_status.progress) }

[display_data __voron_display_16x4 progress_bar]
position = 2, 1
text = { draw_progress_bar(2, 0, 10, printer.display_status.progress) }

[display_data __voron_display_16x4 printing_time]
position = 2, 10
text = { "%6s" % (render("_printing_time").strip(),) }

[display_data __voron_display_16x4 print_status]
position = 3, 0
text = { render("_print_status") }

[display_glyph extruder]
data = 
	................
	................
	..************..
	.....******.....
	..************..
	.....******.....
	..************..
	................
	....********....
	....******.*....
	....********....
	................
	......****......
	.......**.......
	................
	................
hd44780_slot = 0
hd44780_data = 
	..*..
	.*.*.
	.*.*.
	.*.*.
	.*.*.
	*...*
	*...*
	.***.

[display_glyph bed]
data = 
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.....
	*****
	*.*.*
	*...*
	*.*.*
	*****
	.....
	.....

[display_glyph bed_heat1]
data = 
	................
	................
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.*..*
	*..*.
	.*..*
	*..*.
	.....
	*****
	.....
	.....

[display_glyph bed_heat2]
data = 
	................
	................
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	*..*.
	.*..*
	*..*.
	.*..*
	.....
	*****
	.....
	.....

[display_glyph fan1]
data = 
	................
	................
	....***.........
	...****....**...
	...****...****..
	....***..*****..
	.....*....****..
	.......**.......
	.......**.......
	..****....*.....
	..*****..***....
	..****...****...
	...**....****...
	.........***....
	................
	................

[display_glyph fan2]
data = 
	................
	................
	.......****.....
	.......****.....
	.......***......
	..**...**.......
	..***...........
	..****.**.****..
	..****.**.****..
	...........***..
	.......**...**..
	......***.......
	.....****.......
	.....****.......
	................
	................

[display_glyph chamber]
data = 
	................
	****************
	*....*....*....*
	*....*....*....*
	*....******....*
	*..............*
	*..............*
	*.....****.....*
	*.***.*..*.***.*
	*.....****.....*
	*......**......*
	*..............*
	*.************.*
	*...*......*...*
	****************
	................

[display_glyph feedrate]
data = 
	................
	................
	***.***.***.**..
	*...*...*...*.*.
	**..**..**..*.*.
	*...*...*...*.*.
	*...***.***.**..
	................
	**...*..***.***.
	*.*.*.*..*..*...
	**..***..*..**..
	*.*.*.*..*..*...
	*.*.*.*..*..***.
	................
	................
	................
hd44780_slot = 3
hd44780_data = 
	***..
	*....
	**...
	*.***
	..*.*
	..**.
	..*.*
	.....

[display_glyph fan]
hd44780_slot = 2
hd44780_data = 
	.....
	*..**
	**.*.
	..*..
	.*.**
	**..*
	.....
	.....

[display_glyph clock]
hd44780_slot = 4
hd44780_data = 
	.....
	.***.
	*..**
	*.*.*
	*...*
	.***.
	.....
	.....

[display_glyph degrees]
hd44780_slot = 5
hd44780_data = 
	.**..
	*..*.
	*..*.
	.**..
	.....
	.....
	.....
	.....

[display_glyph usb]
hd44780_slot = 6
hd44780_data = 
	.***.
	.***.
	.***.
	*****
	*****
	*****
	..*..
	..*..

[display_glyph sd]
hd44780_slot = 6
hd44780_data = 
	.....
	..***
	.****
	*****
	*****
	*****
	*****
	.....

[delayed_gcode setdisplayneopixel]
initial_duration = 1
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro red]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro orange]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro green]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro blue]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro white]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro yellow]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro purple]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[stepper_x]
step_pin = PE11
dir_pin = !PE10
enable_pin = !PE9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 300
position_max = 300
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PE7
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
interpolate = True
diag0_pin = ^!PB14
run_current = 1
driver_sgt = 1

[stepper_y]
step_pin = PD8
dir_pin = !PB12
enable_pin = !PD9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 310
position_max = 310
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PE15
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
diag0_pin = ^!PB13
interpolate = True
run_current = 1
driver_sgt = 1

[stepper_z]
step_pin = PE6
dir_pin = PC13
enable_pin = !PE5
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 240
position_min = -5
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 0.0

[tmc2209 stepper_z]
uart_pin = PC14
uart_address = 0
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z1]
step_pin = PE2
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z1]
uart_pin = PC15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z2]
step_pin = PD12
dir_pin = PC4
enable_pin = !PE8
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z2]
uart_pin = PA15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[tmc2209 extruder]
uart_pin = sht36:PB5
interpolate = false
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[gcode_arcs]
resolution = 1.0

[output_pin LIGHTS]
pin = PC8
pwm = true
shutdown_value = 0
value = 1
cycle_time = 0.01

[gcode_macro LIGHTS_ON]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.6

[gcode_macro LIGHTS_ON_20]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.20

[gcode_macro LIGHTS_OFF]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.0

[neopixel sb_leds]
pin = sht36:PB0
chain_count = 3
color_order = GRBW
initial_red = 0.0
initial_green = 0.0
initial_blue = 0.0
initial_white = 0.0

[gcode_macro _sb_vars]
variable_colors = {
	'logo': {
	'busy': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cleaning': {'r': 0.0, 'g': 0.02, 'b': 0.5, 'w': 0.0},
	'calibrating_z': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	'heating': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'homing': {'r': 0.0, 'g': 0.6, 'b': 0.2, 'w': 0.0},
	'leveling': {'r': 0.5, 'g': 0.1, 'b': 0.4, 'w': 0.0},
	'meshing': {'r': 0.2, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'printing': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'standby': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'red': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'orange': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'green': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'blue': {'r': 0.0, 'g': 0.0, 'b': 0.5, 'w': 0.0},
	'white': {'r': 1.0, 'g': 1.0, 'b': 1.0, 'w': 0.0},
	'yellow': {'r': 0.4, 'g': 0.4, 'b': 0.0, 'w': 0.0},
	'purple': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	},
	'nozzle': {
	'heating': {'r': 0.8, 'g': 0.35, 'b': 0.0, 'w':0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'on': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':1.0},
	'standby': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':0.8},
	},
	'thermal': {
	'hot': {'r': 1.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cold': {'r': 0.3, 'g': 0.0, 'b': 0.3, 'w': 0.0}
	}
	}
variable_logo_led_name = "sb_leds"
variable_logo_idx = "3"
variable_nozzle_led_name = "sb_leds"
variable_nozzle_idx = "1,2"
gcode = 

[gcode_macro _set_sb_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = params.LED|string %}
	{% set idx = (params.IDX|string).split(',') %}
	{% set transmit_last = params.TRANSMIT|default(1) %}
	
	{% for led_index in idx %}
	{% set transmit=transmit_last if loop.last else 0 %}
	set_led led={led} red={red} green={green} blue={blue} white={white} index={led_index} transmit={transmit}
	{% endfor %}

[gcode_macro _set_sb_leds_by_name]
gcode = 
	{% set leds_name = params.LEDS %}
	{% set color_name = params.COLOR %}
	{% set color = printer["gcode_macro _sb_vars"].colors[leds_name][color_name] %}
	{% set led = printer["gcode_macro _sb_vars"][leds_name + "_led_name"] %}
	{% set idx = printer["gcode_macro _sb_vars"][leds_name + "_idx"] %}
	{% set transmit = params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={color.r} green={color.g} blue={color.b} white={color.w} idx="{idx}" transmit={transmit}

[gcode_macro _set_logo_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].logo_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].logo_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro _set_nozzle_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].nozzle_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].nozzle_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro set_logo_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_logo_leds red=0 blue=0 green=0 white=0 transmit={transmit}

[gcode_macro set_nozzle_leds_on]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="on" transmit={transmit}

[gcode_macro set_nozzle_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="off" transmit={transmit}

[gcode_macro status_off]
gcode = 
	set_logo_leds_off transmit=0
	set_nozzle_leds_off

[gcode_macro status_ready]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="standby" transmit=1

[gcode_macro status_busy]
gcode = 
	_set_sb_leds_by_name leds="logo" color="busy" transmit=0
	set_nozzle_leds_on

[gcode_macro status_heating]
gcode = 
	_set_sb_leds_by_name leds="logo" color="heating" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="heating" transmit=1

[gcode_macro status_leveling]
gcode = 
	_set_sb_leds_by_name leds="logo" color="leveling" transmit=0
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="homing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	_set_sb_leds_by_name leds="logo" color="cleaning" transmit=0
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="meshing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	_set_sb_leds_by_name leds="logo" color="calibrating_z" transmit=0
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="printing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_orange]
gcode = 
	_set_sb_leds_by_name leds="logo" color="orange" transmit=0
	set_nozzle_leds_on

[gcode_macro status_red]
gcode = 
	_set_sb_leds_by_name leds="logo" color="red" transmit=0
	set_nozzle_leds_on

[gcode_macro status_purple]
gcode = 
	_set_sb_leds_by_name leds="logo" color="purple" transmit=0
	set_nozzle_leds_on

[gcode_macro status_green]
gcode = 
	_set_sb_leds_by_name leds="logo" color="green" transmit=0
	set_nozzle_leds_on

[gcode_macro status_white]
gcode = 
	_set_sb_leds_by_name leds="logo" color="white" transmit=0
	set_nozzle_leds_on

[gcode_macro status_yellow]
gcode = 
	_set_sb_leds_by_name leds="logo" color="yellow" transmit=0
	set_nozzle_leds_on

[gcode_macro status_blue]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	set_nozzle_leds_on

[delayed_gcode set_sb_leds_on_boot]
initial_duration = 1
gcode = 
	flicker
	status_ready

[gcode_macro flicker]
gcode = 
	{% set LEDTimes = [10, 20, 20, 240, 20, 40, 20, 100, 20, 20, 20, 260, 80, 20, 240, 60, 160, 20, 240, 20, 1000, 20, 20, 40, 100, 20, 274, 340, 860, 20, 1400, 20, 60, 20] %}
	{% set RGB_Red = 0.2 %}
	{% set RGB_Green = 0.2 %}
	{% set RGB_Blue = 0.2 %}
	{% set RGB_Strip = "sb_leds" %}
	{% set RGB_Strip1 = "mini12864" %}
	
	{% for toggletime in LEDTimes %}
	{% set ledTime = toggletime|string %}
	{% set loopCount = loop.index %}
	
	{% if loopCount is divisibleby 2 %}
	SET_LED LED={RGB_Strip} RED={RGB_Red} GREEN={RGB_Green} BLUE={RGB_Blue}
	G4 P{ledTime|int}
	{% else %}
	SET_LED LED={RGB_Strip}
	G4 P{ledTime|int}
	{% endif %}
	
	{% endfor %}
	
	{% for i in range(1,9) %}
	SET_LED LED={RGB_Strip} RED={RGB_Red+(i/10)} GREEN={RGB_Green+(i/10)}  BLUE={RGB_Blue+(i/10)} INDEX=1
	G4 P200
	{% endfor %}

[beacon]
serial = /dev/serial/by-id/usb-Beacon_Beacon_RevD_63E3DDD04E4B333448202020FF0A3315-if00
x_offset = 0
y_offset = -24
mesh_main_direction = x
mesh_runs = 2
home_xy_position = 117.5, 117.5
home_z_hop = 5
home_z_hop_speed = 30
home_xy_move_speed = 300
home_method = contact|proximity
home_method_when_homed = contact|proximity
home_autocalibrate = always|unhomed|never

[bed_mesh]
speed = 150
horizontal_move_z = 10
mesh_min = 10,10
mesh_max = 290,240
probe_count = 15,15
algorithm = bicubic
fade_start = 1
fade_end = 5
fade_target = 0

[z_tilt]
speed = 500
horizontal_move_z = 10
retries = 5
retry_tolerance = 0.004
z_positions = 
	-50, 18
	150, 348
	350, 18
points = 
	30, 5
	150, 245
	270, 5

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% if display_parameters == True %}
	{ action_respond_info("led_enable  : %d" % (led_enable))  }
	{ action_respond_info("status_macro: \'%s\'" % (status_macro))  }
	{ action_respond_info("fuzz_enable : %d" % (fuzz_enable))  }
	{ action_respond_info("fuzz_min    : %f" % (fuzz_min))  }
	{ action_respond_info("fuzz_max    : %f" % (fuzz_max))  }
	{ action_respond_info("probe_dock_enable: %d" % (probe_dock_enable))  }
	{ action_respond_info("attach_macro: \'%s\'" % (attach_macro))  }
	{ action_respond_info("detach_macro: \'%s\'" % (detach_macro))  }
	{% endif %}
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% if margin_enable == False %}
	{% set margin_size = 0 %}
	{% endif %}
	
	{ action_respond_info("{} object points, clamping to bed mesh [{!r} {!r}]".format(
	all_points | count,
	bed_mesh_min,
	bed_mesh_max,
	)) }
	
	{% if fuzz_enable == True %}
	{% set fuzz_range = range((fuzz_min * 100) | int, (fuzz_max * 100) | int + 1) %}
	{% set x_min = (bed_mesh_min[0] + fuzz_max - margin_size, x_min) | max - (fuzz_range | random / 100.0) %}
	{% set y_min = (bed_mesh_min[1] + fuzz_max - margin_size, y_min) | max - (fuzz_range | random / 100.0) %}
	{% set x_max = (bed_mesh_max[0] - fuzz_max + margin_size, x_max) | min + (fuzz_range | random / 100.0) %}
	{% set y_max = (bed_mesh_max[1] - fuzz_max + margin_size, y_max) | min + (fuzz_range | random / 100.0) %}
	{% else %}
	{% set x_min = [ bed_mesh_min[0], x_min - margin_size ] | max %}
	{% set y_min = [ bed_mesh_min[1], y_min - margin_size ] | max %}
	{% set x_max = [ bed_mesh_max[0], x_max + margin_size ] | min %}
	{% set y_max = [ bed_mesh_max[1], y_max + margin_size ] | min %}
	{% endif %}
	
	{ action_respond_info("Object bounds, clamped to the bed_mesh: {!r}, {!r}".format(
	(x_min, y_min),
	(x_max, y_max),
	)) }
	
	{% set points_x = (((x_max - x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((y_max - y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	{ action_respond_info( "Algorithm: {}".format(algorithm)) }
	
	{% set points_x = [points_x, min_points]|max  %}
	{% set points_y = [points_y, min_points]|max  %}
	{ action_respond_info( "Points: x: {}, y: {}".format(points_x, points_y) ) }
	
	{% if printer.configfile.settings.bed_mesh.relative_reference_index is defined %}
	{% set ref_index = (points_x * points_y / 2) | int %}
	{ action_respond_info( "Reference index: {}".format(ref_index) ) }
	{% else %}
	{% set ref_index = -1 %}
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	{% if led_enable == True %}
	{status_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={x_min},{y_min} mesh_max={x_max},{y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y} RELATIVE_REFERENCE_INDEX={ref_index}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}
variable_led_enable = False
variable_status_macro = 'status_meshing'
variable_fuzz_enable = False
variable_fuzz_min = 0
variable_fuzz_max = 4
variable_margin_enable = False
variable_margin_size = 5
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_display_parameters = True

[gcode_macro Z_TILT_ADJUST]
rename_existing = _Z_TILT_ADJUST
gcode = 
	{ action_respond_info("Z Tilt Adjust") }
	
	_Z_TILT_ADJUST {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	G28 Z0

[gcode_macro z_tilt_scan]
gcode = 
	z_tilt_adjust RETRY_TOLERANCE=1
	z_tilt_adjust HORIZONTAL_MOVE_Z=2

[gcode_macro MACROS_VARS]
variable_circ_fan_speed = 255
variable_probe_temp = 150
variable_starting_wled = 2
variable_heating_wled = 4
variable_ending_wled = 3
variable_ending_length = 25
variable_purge_length = 40
variable_filament_swap_length = 0.8
variable_pla_pa = 0.00525
variable_pet_pa = 0.00650
variable_abs_pa = 0.00460
variable_pet_za = 0.010
variable_move_away_home = 0
variable_homing_retract = 20
gcode = 

[gcode_macro MATERIAL_PA]
gcode = 
	{% set MATERIAL = params.MATERIAL|default("XXX")|string %}
	{% set TEXT ="Setting PA for " + MATERIAL %}
	{% set PLA = printer["gcode_macro MACROS_VARS"].pla_pa|default(0)%}
	{% set PET = printer["gcode_macro MACROS_VARS"].pet_pa|default(0)%}
	{% set ABS = printer["gcode_macro MACROS_VARS"].abs_pa|default(0)%}
	{% set PETZ = printer["gcode_macro MACROS_VARS"].pet_za|default(0)%}
	{% if MATERIAL == "PLA" %}
	SET_PRESSURE_ADVANCE ADVANCE={PLA}
	{% elif MATERIAL == "PET" %}
	SET_PRESSURE_ADVANCE ADVANCE={PET}
	SET_GCODE_OFFSET Z_ADJUST={PETZ} MOVE=1
	{% elif MATERIAL == "ABS" %}
	SET_PRESSURE_ADVANCE ADVANCE={ABS}
	{% else %}
	{% set TEXT ="No PA value for " + MATERIAL %}
	{% endif %}
	DISPLAYTEXT TEXT="{TEXT}"

[gcode_macro PURGE_LINE]
gcode = 
	DISPLAYTEXT TEXT="Prime Line"
	G1 X75 E25 F1000
	G92 E0;
	G90
	G0 X75 Y4 F6000
	G1 Z0.2 F200
	G91
	G1 X150 E30 F1200;
	G1 Y1
	G1 X-150 E30 F1200;
	G92 E0.0
	G1 Z1 F5000

[gcode_macro PRINT_START]
gcode = 
	{% set BED_TEMP = params.BED_TEMP|default(110)|float %}
	{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(250)|float %}
	{% set ENCLOSURE_TEMP = params.ENCLOSURE_TEMP|default(45)|int %}
	{% set PROBE_TEMP = printer["gcode_macro MACROS_VARS"].probe_temp|default(0)%}
	
	SET_TEMP HEATER="bed" TEMP={BED_TEMP}
	SET_TEMP HEATER="extruder" TEMP={PROBE_TEMP} WAIT=1
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	DISPLAYTEXT TEXT="Homing"
	G28
	{% endif %}
	DISPLAYTEXT TEXT="Heating Bed"
	SET_TEMP HEATER="bed" TEMP={BED_TEMP} WAIT=1
	
	{% if not printer.z_tilt.applied %}
	DISPLAYTEXT TEXT="Z tilt thingy"
	Z_TILT_ADJUST
	{% endif %}
	MATERIAL_PA MATERIAL={FILAMENT}
	DISPLAYTEXT TEXT="Heating Extruder"
	SET_TEMP HEATER="extruder" TEMP={EXTRUDER_TEMP} WAIT=1
	
	BED_MESH_CALIBRATE
	SET_FAN_SPEED FAN=rebreather SPEED=1
	SET_FAN_SPEED FAN=stepper_fans SPEED=0.25
	MATERIAL_PA MATERIAL={FILAMENT}
	G4 P1000
	PURGE_LINE
	
	
	DISPLAYTEXT TEXT="Printing..."

[gcode_macro G32]
gcode = 
	BED_MESH_CLEAR
	G28
	Z_TILT_ADJUST
	G28
	G0 X75 Y75 Z30 F3600

[gcode_macro PRINT_END]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	{% set FILAMENT = params.FILAMENT|default(PLA) %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	M400
	G92 E0
	G1 E-25.0 F1800
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	TURN_OFF_HEATERS
	M107
	G1 Z2 F3000
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	
	{% if FILAMENT == 'ABS' or params.FILAMENT == 'ASA' %}
	NEVERMORE_END_PRINT
	{% endif %}
	
	DISPLAYTEXT TEXT="Print Complete"

[gcode_macro SET_TEMP]
gcode = 
	{% set HEATER = params.HEATER|default("")|string %}
	{% set TEMP = params.TEMP|default(0)|int %}
	{% set WAIT = params.WAIT|default(0)|int %}
	
	{% if HEATER == "extruder" %}
	{% if WAIT == 1 %}
	M109 S{TEMP}
	{% else %}
	M104 S{TEMP}
	{% endif %}
	{% else %}
	{% if WAIT == 1 %}
	M190 S{TEMP}
	{% else %}
	M140 S{TEMP}
	{% endif %}
	{% endif %}

[gcode_macro ENDING_RETRACTION]
gcode = 
	{% set RETRACT = printer["gcode_macro MACROS_VARS"].ending_length|default(0)%}
	G1 E{RETRACT*-1} F1800

[gcode_macro PARK_AT_PRINT_END]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600

[gcode_macro Homing_Variables]
variable_move_away_home = 0
variable_x_homing_pos = 150
variable_y_homing_pos = 150
variable_homing_current = 0.8
variable_homing_retract_x = 150
variable_homing_retract_y = 20
variable_homing_retract_speed = 5000
variable_z_end_pos = 30
variable_is_sensorless = True
variable_display_parameters = True
gcode = 

[homing_override]
axes = xyz
gcode = 
	DISPLAY_PARAMETERS
	
	
	SET_KINEMATIC_POSITION Z=0
	MOVE_AWAY_BEFORE_HOMING PARAMS="Z"
	WAIT TIME=2
	
	{% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}
	
	{% if home_all or 'X' in params %}
	_HOME_X
	{% endif %}
	
	{% if home_all or 'Y' in params %}
	_HOME_Y
	{% endif %}
	
	{% if home_all or 'Z' in params %}
	_HOME_Z
	{% endif %}

[gcode_macro DISPLAY_PARAMETERS]
gcode = 
	{% set DISPLAY_PARAMS = printer["gcode_macro Homing_Variables"].display_parameters %}
	{% set is_sensorless = printer["gcode_macro Homing_Variables"].is_sensorless %}
	{% set x_homing_pos = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set y_homing_pos = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	{% set homing_current = printer["gcode_macro Homing_Variables"].homing_current %}
	{% set homing_retract_x = printer["gcode_macro Homing_Variables"].homing_retract_x %}
	{% set homing_retract_y = printer["gcode_macro Homing_Variables"].homing_retract_y %}
	{% set homing_retract_speed = printer["gcode_macro Homing_Variables"].homing_retract_speed %}
	{% set z_end_pos = printer["gcode_macro Homing_Variables"].z_end_pos %}
	
	{% if DISPLAY_PARAMS == True %}
	{ action_respond_info("is_sensorless  : %d" % (is_sensorless))  }
	{ action_respond_info("x_homing_pos  : %d" % (x_homing_pos))  }
	{ action_respond_info("y_homing_pos  : %d" % (y_homing_pos))  }
	{ action_respond_info("homing_current  : %d" % (homing_current))  }
	{ action_respond_info("homing_retract_x  : %d" % (homing_retract_x))  }
	{ action_respond_info("homing_retract_y  : %d" % (homing_retract_y))  }
	{ action_respond_info("homing_retract_speed  : %d" % (homing_retract_speed))  }
	{ action_respond_info("z_end_pos  : %d" % (z_end_pos))  }
	{% endif %}

[gcode_macro MOVE_AWAY_BEFORE_HOMING]
gcode = 
	{% set MAH = printer["gcode_macro Homing_Variables"].move_away_home|default(0)%}
	{% set PARAMS = params.PARAMS|default("")|string %}
	
	{% set home_all = 'X' not in PARAMS and 'Y' not in PARAMS and 'Z' not in PARAMS %}
	
	
	{% if home_all or 'X' in PARAMS %}
	G1 X-{MAH/2}  F6000
	{% endif %}
	
	{% if home_all or 'Y' in PARAMS %}
	G1  Y-{MAH/2} F6000
	{% endif %}
	
	{% if home_all or 'Z' in PARAMS %}
	G1 Z{MAH} F100
	{% endif %}

[gcode_macro _HOME_X]
gcode = 
	DISPLAYTEXT TEXT="Homing X Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_x|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION X=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="X"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 X
	
	G91
	G1 X-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Y]
gcode = 
	DISPLAYTEXT TEXT="Homing Y Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_y|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION Y=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="Y"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 Y
	
	G91
	G1 Y-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Z]
gcode = 
	{% set Ez = printer["gcode_macro Homing_Variables"].z_end_pos %}
	{% set Hx = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set Hy = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	
	DISPLAYTEXT TEXT="Homing Z Axis"
	
	G1 X{Hx} Y{Hy} F15000
	G28 Z
	G1 Z{Ez}

[gcode_macro ABSOLUTE_COORDINATES]
gcode = 
	G90

[gcode_macro RELATIVE_COORDINATES]
gcode = 
	G91

[gcode_macro DISPLAYTEXT]
gcode = 
	{% set TEXT = params.TEXT|default("")|string %}
	RESPOND MSG="{TEXT}"
	SET_DISPLAY_TEXT MSG="{TEXT}"

[gcode_macro DISPLAY_PROGRESS]
gcode = 
	{% set TOTAL_LAYERS = params.TOTAL_LAYERS|default("")|string %}
	{% set CURRENT_LAYER = params.CURRENT_LAYER|default("")|string %}
	RESPOND MSG="Total layers {TOTAL_LAYERS}, current layer {CURRENT_LAYER}"

[gcode_macro TEMPERATURE_WAIT]
rename_existing = _TEMPERATURE_WAIT
gcode = 
	{% set SENSOR = params.SENSOR|default("")|string %}
	{% set MINIMUM = params.MINIMUM|int %}
	{% set MSG = "Enclosure temperature has reached " + MINIMUM |string %}
	
	DISPLAYTEXT TEXT="Heatsoaking..."
	_TEMPERATURE_WAIT SENSOR="{SENSOR}" MINIMUM={MINIMUM}
	DISPLAYTEXT TEXT="{MSG}"

[gcode_macro WAIT]
gcode = 
	{% set TIME = params.TIME|default(0)|int %}
	G4 P{TIME*1000}

[gcode_macro CHOME]
gcode = 
	{% if printer.toolhead.homed_axes != "xyz" %}
	DISPLAYTEXT TEXT="Homing.."
	G28
	{% endif %}

[gcode_macro RESET_EXTRUDER]
gcode = 
	G92 E0

[gcode_macro PARK_TOOLHEAD]
gcode = 
	{% set th = printer.toolhead %}
	ABSOLUTE_COORDINATES
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y//2} F15000

[gcode_macro DUMP_VARIABLES]
gcode = 
	{% set filter_name = params.NAME|default('')|string|lower %}
	{% set filter_value = params.VALUE|default('')|string|lower %}
	{% set show_cfg = params.SHOW_CFG|default(0)|int %}
	
	{% set out = [] %}
	
	{% for key1 in printer %}
	{% for key2 in printer[key1] %}
	{% if (show_cfg or not (key1|lower == 'configfile' and key2|lower in ['config', 'settings'])) and (filter_name in key1|lower or filter_name in key2|lower) and filter_value in printer[key1][key2]|string|lower %}
	{% set dummy = out.append("printer['%s'].%s = %s" % (key1, key2, printer[key1][key2])) %}
	{% endif %}
	{% else %}
	{% if filter_name in key1|lower and filter_value in printer[key1]|string|lower %}
	{% set dummy = out.append("printer['%s'] = %s" % (key1, printer[key1])) %}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	{action_respond_info(out|join("\n"))}

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=UNLOAD_FILAMENT_state
	
	M82
	G92 E0
	G1 E2 F3600
	G1 E0 F3600
	G1 E3 F3600
	G1 E0 F3600
	G1 E4 F3600
	G1 E0 F3600
	
	M83
	G1 E-20 F3600
	G4 P3000
	G1 E{DISTANCE|float * -1} F3000
	RESTORE_GCODE_STATE NAME=UNLOAD_FILAMENT_state

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=LOAD_FILAMENT_state
	
	M83
	G92 E0
	G1 E{DISTANCE|float} F200
	
	
	
	
	G1 E50 F150
	
	
	G92 E0
	RESTORE_GCODE_STATE NAME=LOAD_FILAMENT_state

[gcode_macro PID_HOTEND]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro PID_BED]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=80

[gcode_macro Z_ENDSTOP]
gcode = 
	Z_ENDSTOP_CALIBRATE

[gcode_macro PROBE_CAL]
gcode = 
	
	G28
	PROBE_CALIBRATE

[gcode_macro IS_CAL]
gcode = 
	
	G28
	SHAPER_CALIBRATE

[gcode_macro SPEEDTEST]
gcode = 
	
	
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest_state
	
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{maxX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{maxX} Y{minY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest_state

[gcode_macro SPEEDTEST2]
gcode = 
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest2_state
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest2_state

[gcode_macro PRESSURE_ADVANCE_CALIBRATION]
description = Calibrate the pressure advance by printing a grid pattern
gcode = 
	
	
	
	{% set pa_start     = params.START|default(0.02)|float %}
	{% set pa_increment = params.INCREMENT|default(0.005)|float %}
	
	{% set do_raft = params.RAFT|default(1)|int %}
	
	{% set print_size      = params.SIZE|default(120)|int %}
	{% set num_bands       = params.BANDS_LIMIT|default(999)|int %}
	{% set lines_per_band  = params.LINES_PER_BAND|default(6)|int %}
	{% set e_multiplier    = params.EXTRUSION_MULTIPLIER|default(1.25 if do_raft == 1 else 1.5)|float %},
	{% set retract_length  = params.RETRACT|default(0.6)|float %}
	{% set initial_purge   = params.PURGE_MM|default(8)|int %}
	
	{% set feedrate_control = params.CONTROL_SPEED|default(30)|int * 60 %}
	{% set feedrate_outer   = params.OUTER_SPEED|default(40)|int * 60 %}
	{% set feedrate_inner   = params.INNER_SPEED|default(120)|int * 60 %}
	{% set feedrate_travel  = params.TRAVEL_SPEED|default(200)|int * 60 %}
	{% set feedrate_raft    = params.RAFT_SPEED|default(120)|int * 60 %}
	{% set feedrate_z       = 5 * 60 %}
	{% set feedrate_retract = 50 * 60 %}
	
	{% set spacing_line  = params.LINE_SPACING|default(0.4)|float %}
	{% set spacing_band  = 2 %}
	{% set spacing_raft  = 2 %}
	
	{% set fast_line_ratio_percent = 50 %}
	
	{% set lines_per_band    = [2, lines_per_band]|max %}
	{% set e_multiplier      = [1, e_multiplier]|max %}
	{% set num_lines_control = (lines_per_band / 2)|round(0, 'floor')|int %}
	{% set num_lines_test    = (lines_per_band / 2)|round(0, 'ceil')|int %}
	{% set spacing_line      = spacing_line * (1 + e_multiplier - 1.25) %}
	
	{% set max_x = printer.toolhead.axis_maximum.x|float %}
	{% set max_y = printer.toolhead.axis_maximum.y|float %}
	{% set nozzle_diameter = printer.configfile.config['extruder'].nozzle_diameter|float %}
	{% set line_width    = nozzle_diameter * 1.25 %}
	{% set line_height   = nozzle_diameter / 2 %}
	{% set z_hop_height  = 2 * line_height %}
	{% set e_per_mm      = (line_width * line_height) / (3.1415 * (1.75/2)**2) %}
	{% set spacing_purge = line_height * 0.8 %}
	
	{% set spacing_raft   = (spacing_raft / line_width)|round * line_width %}
	{% set num_raft_lines = ([print_size, max_x]|min / spacing_raft)|round(0, 'floor')|int %}
	{% set print_width    = num_raft_lines * spacing_raft %}
	
	{% set band_height      = lines_per_band * line_width + (lines_per_band - 1) * spacing_line + spacing_band %}
	{% set bands_per_height = (([print_size, max_y]|min  - spacing_purge) / band_height)|round(0, 'floor')|int %}
	{% set num_bands        = [num_bands, bands_per_height]|min %}
	{% set print_height     = num_bands * band_height - spacing_band - spacing_purge %}
	
	{% set slow_line_length = ((print_width * (1 - fast_line_ratio_percent / 100) / 2) / spacing_raft)|round * spacing_raft + spacing_raft / 2 %}
	{% set fast_line_length = print_width - slow_line_length * 2 %}
	{% set thick_raft_num1 = (slow_line_length / spacing_raft)|round|int %}
	{% set thick_raft_num2  = num_raft_lines - thick_raft_num1 + 1 %}
	
	{% set x_start = max_x / 2 - print_width  / 2 %}
	{% set y_start = max_y / 2 - print_height / 2 %}
	
	{action_respond_info("")}
	{action_respond_info("Starting Pressure Advance calibration print.")}
	{action_respond_info("")}
	{action_respond_info("This operation can not be interrupted by normal means. Hit the \"emergency stop\" button once the print starts exhibiting PA values that are obviously too high.")}
	{action_respond_info("")}
	{action_respond_info("PA of first band: %.4f" % pa_start)}
	{action_respond_info("PA of last band: %.4f" % (num_bands * pa_increment))}
	{action_respond_info("PA increment per band: %.4f" % pa_increment)}
	{action_respond_info("Number of bands: %d" % num_bands)}
	{action_respond_info("")}
	{action_respond_info("Inspect the printed model. "
	"Look at the top and bottom lines in each band, on the right side of the two vertical raft bars (where the print speeds change). "
	"Find the highest band from the bottom where the lines at its top still resemble the lines at its bottom, with no visible extrusion width irregularities. "
	"Your final Pressure Advance value would then be:"
	)}
	{action_respond_info("")}
	{action_respond_info("PA = %.4f + (%.4f * band_number)" % (pa_start, pa_increment))}
	{action_respond_info("")}
	{action_respond_info("Update your [extruder] config section and set \"pressure_advance\" to the value you calculated.")}
	{action_respond_info("")}
	
	
	
	
	
	
	
	
	
	SAVE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION
	{% set pa_saved = printer.configfile.settings['extruder'].pressure_advance %}
	SET_PRESSURE_ADVANCE ADVANCE={pa_start}
	
	
	
	
	M117 Priming
	G90
	G0 X{x_start} Y{y_start} Z{line_height} F{feedrate_travel}
	G91
	G1 E{initial_purge} F{5 * 60}
	G1 X{print_width}  E{print_width * e_per_mm} F{feedrate_raft / 2}
	G1 Y{line_width}   E{line_width * e_per_mm}  F{feedrate_raft / 2}
	G1 X-{print_width} E{print_width * e_per_mm} F{feedrate_raft / 2}
	
	
	
	
	{% if do_raft == 1 %}
	G0 F{feedrate_raft}
	
	{% for curr_raft_line in range(1, num_raft_lines + 2) %}
	
	{% if curr_raft_line == thick_raft_num1 or curr_raft_line == thick_raft_num2 %}
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	G1 Y{loop.cycle(-1.0, 1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	{% endif %}
	
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	
	
	{% if not loop.last %}
	{% set horizontal_move = spacing_raft - (2 * line_width if curr_raft_line == thick_raft_num1 - 1 or curr_raft_line == thick_raft_num2 - 1 else 0) %}
	G1 X{horizontal_move} E{horizontal_move * e_per_mm}
	{% endif %}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	{% endif %}
	
	
	
	
	M117 Printing bands
	G90
	G0 X{x_start} Y{y_start + 2 * line_width + spacing_purge} F{feedrate_travel}
	G0 Z{line_height + (line_height if do_raft == 1 else 0)} F{feedrate_z}
	G91
	G1 E{retract_length} F{feedrate_retract}
	
	
	{% for curr_band_num in range(1, num_bands + 1) %}
	{% set outer_loop = loop %}
	
	{% set curr_pa_value = pa_start + (curr_band_num - 1) * pa_increment %}
	SET_PRESSURE_ADVANCE ADVANCE={curr_pa_value}
	M117 Band {curr_band_num} PA {curr_pa_value|round(4)}
	
	
	{% for _ in range(num_lines_control) %}
	G1 X{print_width} E{print_width * e_per_mm * e_multiplier} F{feedrate_control}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	G0 X-{print_width} Y{spacing_line + line_width} F{feedrate_travel}
	
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endfor %}
	
	
	{% for _ in range(num_lines_test) %}
	{% for data in [{'mm': slow_line_length, 'f': feedrate_outer}, {'mm': fast_line_length, 'f': feedrate_inner}, {'mm': slow_line_length, 'f': feedrate_outer}] %}
	G1 X{data.mm} E{data.mm * e_per_mm * e_multiplier} F{data.f}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	{% if not (outer_loop.last and loop.last) %}
	G0 X-{print_width} Y{(spacing_line if not loop.last else spacing_band) + line_width} F{feedrate_travel}
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	
	
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z20 F{feedrate_z}
	G0 X-{print_width / 2} Y{[50, max_y - (y_start + print_height)]|min} F{feedrate_travel}
	
	M117
	SET_PRESSURE_ADVANCE ADVANCE={pa_saved}
	RESTORE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION

[gcode_macro TEST_SPEED]
gcode = 
	
	{% set speed  = params.SPEED|default(printer.configfile.settings.printer.max_velocity)|int %}
	
	{% set iterations = params.ITERATIONS|default(5)|int %}
	
	{% set accel  = params.ACCEL|default(printer.configfile.settings.printer.max_accel)|int %}
	
	{% set bound = params.BOUND|default(20)|int %}
	
	{% set smallpatternsize = SMALLPATTERNSIZE|default(20)|int %}
	
	
	
	{% set x_min = printer.toolhead.axis_minimum.x + bound %}
	{% set x_max = printer.toolhead.axis_maximum.x - bound %}
	{% set y_min = printer.toolhead.axis_minimum.y + bound %}
	{% set y_max = printer.toolhead.axis_maximum.y - bound %}
	
	
	
	{% set x_center = (printer.toolhead.axis_minimum.x|float + printer.toolhead.axis_maximum.x|float ) / 2 %}
	{% set y_center = (printer.toolhead.axis_minimum.y|float + printer.toolhead.axis_maximum.y|float ) / 2 %}
	
	
	{% set x_center_min = x_center - (smallpatternsize/2) %}
	{% set x_center_max = x_center + (smallpatternsize/2) %}
	{% set y_center_min = y_center - (smallpatternsize/2) %}
	{% set y_center_max = y_center + (smallpatternsize/2) %}
	
	
	SAVE_GCODE_STATE NAME=TEST_SPEED
	
	
	{ action_respond_info("TEST_SPEED: x_min %d, y_min %d, x_max %d, y_max %d" % (x_min, y_min, x_max, y_max)) }
	{ action_respond_info("TEST_SPEED: starting %d iterations at speed %d, accel %d" % (iterations, speed, accel)) }
	
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	G28 X Y
	{% endif %}
	
	
	
	
	
	
	
	
	
	
	
	
	G4 P1000
	GET_POSITION
	
	
	G0 X{x_min} Y{y_min} Z{bound + 10} F{speed*60}
	
	
	SET_VELOCITY_LIMIT VELOCITY={speed} ACCEL={accel} ACCEL_TO_DECEL={accel / 2}
	
	{% for i in range(iterations) %}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	{% endfor %}
	
	
	SET_VELOCITY_LIMIT VELOCITY={printer.configfile.settings.printer.max_velocity} ACCEL={printer.configfile.settings.printer.max_accel} ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel}
	
	
	G28 X Y
	
	
	
	G4 P1000
	GET_POSITION
	
	
	RESTORE_GCODE_STATE NAME=TEST_SPEED

[gcode_macro SETUP_KAMP_MESHING]
gcode = 
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=display_parameters   VALUE={params.DISPLAY_PARAMETERS|default(True)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=led_enable   VALUE={params.LED_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=status_macro VALUE='"{params.STATUS_MACRO|default('status_meshing')|string}"'
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_enable VALUE={params.FUZZ_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_min    VALUE={params.FUZZ_MIN|default(0)|float}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_max    VALUE={params.FUZZ_MAX|default(4)|float}
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=probe_dock_enable  VALUE={params.PROBE_DOCK_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=attach_macro VALUE='"{params.ATTACH_MACRO|default('Attach_Probe')|string}"'
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=detach_macro VALUE='"{params.DETACH_MACRO|default('Dock_Probe')|string}"'

[input_shaper]
shaper_freq_x = 86.8
shaper_type_x = zv
shaper_freq_y = 62.2
shaper_type_y = zv

[probe]
z_offset = -0.0400

[beacon model default]
model_coef = 1.409155451498927,
	1.7229833219997472,
	0.7624260199879447,
	0.3933310021549746,
	0.3504714980336664,
	0.3215136667184013,
	-0.12014580629124338,
	-0.22419779942999016,
	0.19713656245482147,
	0.188750402116144
model_domain = 3.120873231931901e-07,3.332026812812074e-07
model_range = 0.200000,5.000000
model_temp = 23.909578
model_offset = 0.02500

[bed_mesh default]
version = 1
points = 
	-0.062140, -0.036984, -0.007379, 0.031314, 0.058627, 0.084848, 0.107257, 0.111945, 0.135207, 0.152355, 0.170171
	-0.128044, -0.093273, -0.053917, -0.019434, 0.015362, 0.051030, 0.076081, 0.091292, 0.113629, 0.133648, 0.155842
	-0.171323, -0.136118, -0.096393, -0.057201, -0.010727, 0.024397, 0.048697, 0.072530, 0.099236, 0.126818, 0.150713
	-0.201543, -0.161727, -0.119034, -0.066854, -0.018463, 0.014217, 0.047420, 0.076211, 0.103883, 0.134441, 0.171920
	-0.229879, -0.188570, -0.139992, -0.085341, -0.040984, 0.002604, 0.042138, 0.073877, 0.104620, 0.133705, 0.171879
	-0.263766, -0.213518, -0.162008, -0.108459, -0.058518, -0.007646, 0.032310, 0.069869, 0.102956, 0.138912, 0.180918
	-0.296565, -0.242362, -0.188285, -0.127789, -0.071974, -0.019641, 0.027806, 0.070759, 0.105252, 0.142100, 0.184275
	-0.296242, -0.233747, -0.171416, -0.107834, -0.048348, 0.004540, 0.056827, 0.100566, 0.141602, 0.182628, 0.230079
	-0.281192, -0.228380, -0.164876, -0.101596, -0.030960, 0.023575, 0.079761, 0.121563, 0.171967, 0.216584, 0.265930
	-0.307454, -0.252371, -0.190633, -0.113183, -0.041936, 0.019598, 0.074971, 0.120663, 0.178367, 0.230549, 0.282552
	-0.324293, -0.258430, -0.193413, -0.119856, -0.045648, 0.021113, 0.080729, 0.133249, 0.192194, 0.246004, 0.297448
x_count = 11
y_count = 11
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 59.444
max_x = 240.556
min_y = 75.541944
max_y = 224.458048
=======================
Extruder max_extrude_ratio=4157.101129
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 145, in _read_config
    pconfig.check_unused_options(config)
  File "/home/pi/klipper/klippy/configfile.py", line 308, in check_unused_options
    raise error("Option '%s' is not valid in section '%s'"
configparser.Error: Option 'home_xy_position' is not valid in section 'beacon'
webhooks client 548579822272: New connection
webhooks client 548579822272: Client info {'program': 'Moonraker', 'version': 'v0.8.0-328-g5a60d64'}
Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/printer_data/config/printer.cfg', '-l', '/home/pi/printer_data/logs/klippy.log', '-I', '/home/pi/printer_data/comms/klippy.serial', '-a', '/home/pi/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-175-g7b490f3e-dirty'
Untracked files: klippy/extras/gcode_shell_command.py, klippy/extras/beacon.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper.git
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Sun Apr 28 07:01:57 2024 (1714284117.1 1041712.0)
===== Config file =====
[exclude_object]

[idle_timeout]
timeout = 3600

[force_move]
enable_force_move = True

[respond]
default_type = echo

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	CANCEL_PRINT

[pause_resume]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
variable_park = True
gcode = 
	TURN_OFF_HEATERS
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	PRINT_END
	BASE_CANCEL_PRINT

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32f446xx_2D0053000E51323130373733-if00

[temperature_sensor Spider]
sensor_type = temperature_mcu
min_temp = 10
max_temp = 100

[board_pins spider]
aliases = 
	
	X_STEP=PE11, X_DIR=PE10, X_ENABLE=PE9,
	Y_STEP=PD8, Y_DIR=PB12, Y_ENABLE=PD9,
	Z_STEP=PD14, Z_DIR=PD13, Z_ENABLE=PD15,
	E0_STEP=PD5, E0_DIR=PD6, E0_ENABLE=PD4,
	E1_STEP=PE6, E1_DIR=PC13, E1_ENABLE=PE5,
	E2_STEP=PE2, E2_DIR=PE4, E2_ENABLE=PE3,
	E3_STEP=PD12, E3_DIR=PC4, E3_ENABLE=PE8,
	E4_STEP=PE1, E4_DIR=PE0, E4_ENABLE=PC5,
	
	X_MIN=PB14, X_MAX=PA1,
	Y_MIN=PB13, Y_MAX=PA2,
	Z_MIN=PA0, Z_MAX=PA3,
	
	X_UART=PE7, Y_UART=PE15, Z_UART=PD10,
	E0_UART=PD7, E1_UART=PC14, E2_UART=PC15,
	E3_UART=PA15, E4_UART=PD11,
	
	E_HEATER=PB15, E_THERMISTOR=PC0,
	E1_HEATER=PC8, E1_THERMISTOR=PC1,
	E2_HEATER=PB3, E2_THERMISTOR=PC2,
	BED_HEATER=PB4, BED_THERMISTOR=PC3,
	FAN0=PB0, FAN1=PB1, FAN2=PB2,
	
	LED-R=PB6, LED-G=PB5, LED-B=PB7,
	
	EXP1_1=PC9, EXP1_3=PC11, EXP1_5=PC10, EXP1_7=PD0, EXP1_9=<GND>,
	EXP1_2=PA8, EXP1_4=PD2, EXP1_6=PC12, EXP1_8=PD1, EXP1_10=<5V>,
	
	EXP2_1=PA6, EXP2_3=PC6, EXP2_5=PC7, EXP2_7=PB10, EXP2_9=<GND>,
	EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<5V>

[mcu rpi]
serial = /tmp/klipper_host_mcu

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 10
max_temp = 100

[gcode_shell_command rpi_fan_50]
command = i2cset -y 1 0x01a 0x32
timeout = 30.
verbose = True

[gcode_shell_command rpi_fan_25]
command = i2cset -y 1 0x01a 0x19
timeout = 30.
verbose = True

[gcode_macro rpi_fan_50]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_50

[gcode_macro rpi_fan_25]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_25

[mcu sht36]
canbus_uuid = 943ff2eb48fd

[temperature_sensor sht36]
sensor_type = temperature_mcu
sensor_mcu = sht36

[printer]
kinematics = corexy
max_velocity = 800
max_accel = 20000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[extruder]
sensor_pin = sht36:PA3
sensor_type = PT1000
heater_pin = sht36:PA8
min_temp = 10
max_temp = 270
max_power = 1.0
min_extrude_temp = 10
control = pid
pid_kp = 20.362
pid_ki = 2.225
pid_kd = 46.579
pressure_advance_smooth_time = 0.040
max_extrude_only_velocity = 120
max_extrude_only_accel = 800
max_extrude_only_distance = 1150
max_extrude_cross_section = 9999
nozzle_diameter = 0.400
filament_diameter = 1.75
step_pin = sht36:PB4
dir_pin = !sht36:PB3
enable_pin = !sht36:PA15
full_steps_per_rotation = 200
rotation_distance = 22.66103
gear_ratio = 50:10
microsteps = 16
pressure_advance = 0.05

[temperature_sensor chamber]
sensor_type = NTC 100K MGB18-104F39050L32
sensor_pin = PC2
min_temp = -100
max_temp = 100
gcode_id = C

[heater_bed]
heater_pin = PB4
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PB0
max_power = 0.9
min_temp = -160
max_temp = 120
control = pid
pid_kp = 41.450
pid_ki = 1.322
pid_kd = 324.866

[multi_pin stepper_drivers_multipin]
pins = PB5, PB6, PB7

[controller_fan stepper_drivers]
pin = multi_pin:stepper_drivers_multipin
hardware_pwm = False
max_power = 1.0
fan_speed = 0.75
shutdown_speed = 0.0
stepper = stepper_x, stepper_y

[heater_fan controller_fan]
pin = PB2
cycle_time = 0.00004
off_below = 0.1
kick_start_time = 0.5
heater = heater_bed
heater_temp = 50.0
max_power = 1.0

[heater_fan hotend_fan]
pin = sht36:PB10
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 40.0

[fan]
pin = sht36:PB11
max_power = 0.85
cycle_time = 0.00005
kick_start_time = 0
off_below = 0.0
shutdown_speed = 0

[fan_generic stepper_fans]
pin = PA13
max_power = 0.5
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.0001

[fan_generic rebreather]
pin = PA14
max_power = 1.0
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.00010

[gcode_macro rebreather_start_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.5

[gcode_macro rebreather_end_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.7
	UPDATE_DELAYED_GCODE ID=rebreather_stop_delayed DURATION=900

[delayed_gcode rebreather_stop_delayed]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.0

[display]
lcd_type = uc1701
cs_pin = PC11
a0_pin = PD2
rst_pin = PC10
encoder_pins = ^PC6,^PC7
click_pin = ^!PA8
contrast = 63
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6
spi_software_sclk_pin = PA5
display_group = __voron_display_16x4

[gcode_macro M300]
gcode = SET_PIN PIN=BEEPER_pin VALUE={S}
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[neopixel mini12864]
pin = PC12
chain_count = 60
initial_red = 0.1
initial_green = 0.5
initial_blue = 0.0
color_order = RGB

[display_template _heater_temperature]
param_heater_name = "extruder"
text = 
	{% if param_heater_name in printer %}
	{% set heater = printer[param_heater_name] %}
	
	{% if param_heater_name == "heater_bed" %}
	{% if heater.target %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~bed_heat{frame}~
	{% else %}
	~bed~
	{% endif %}
	{% else %}
	~extruder~
	{% endif %}
	
	{ "%3.0f" % (heater.temperature,) }
	
	{% if heater.target and (heater.temperature - heater.target)|abs > 2 %}
	~right_arrow~
	{ "%0.0f" % (heater.target,) }
	{% endif %}
	~degrees~
	{% endif %}

[display_template _fan_speed]
text = 
	{% if 'fan' in printer %}
	{% set speed = printer.fan.speed %}
	{% if speed %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~fan{frame}~
	{% else %}
	~fan1~
	{% endif %}
	{ "{:>4.0%}".format(speed) }
	{% endif %}

[display_template _printing_time]
text = 
	{% set ptime = printer.idle_timeout.printing_time %}
	{ "%02d:%02d" % (ptime // (60 * 60), (ptime // 60) % 60) }

[display_template _print_status]
text = 
	{% if printer.display_status.message %}
	{ printer.display_status.message }
	{% elif printer.idle_timeout.printing_time %}
	{% set pos = printer.toolhead.position %}
	{ "X%-4.0fY%-4.0fZ%-5.2f" % (pos.x, pos.y, pos.z) }
	{% else %}
	Ready
	{% endif %}

[display_data __voron_display_16x4 extruder]
position = 0, 0
text = 
	{% set active_extruder = printer.toolhead.extruder %}
	{ render("_heater_temperature", param_heater_name=active_extruder) }

[display_data __voron_display_16x4 fan]
position = 0, 10
text = { render("_fan_speed") }

[display_data __voron_display_16x4 heater_bed]
position = 1, 0
text = { render("_heater_temperature", param_heater_name="heater_bed") }

[display_data __voron_display_16x4 chamber]
position = 1,10
text = 
	{% set chamber = printer['temperature_sensor chamber'] %}
	~chamber~
	{ "%3.0f" % (chamber.temperature,) }
	~degrees~

[display_data __voron_display_16x4 print_progress]
position = 2, 0
text = { "{:^10.0%}".format(printer.display_status.progress) }

[display_data __voron_display_16x4 progress_bar]
position = 2, 1
text = { draw_progress_bar(2, 0, 10, printer.display_status.progress) }

[display_data __voron_display_16x4 printing_time]
position = 2, 10
text = { "%6s" % (render("_printing_time").strip(),) }

[display_data __voron_display_16x4 print_status]
position = 3, 0
text = { render("_print_status") }

[display_glyph extruder]
data = 
	................
	................
	..************..
	.....******.....
	..************..
	.....******.....
	..************..
	................
	....********....
	....******.*....
	....********....
	................
	......****......
	.......**.......
	................
	................
hd44780_slot = 0
hd44780_data = 
	..*..
	.*.*.
	.*.*.
	.*.*.
	.*.*.
	*...*
	*...*
	.***.

[display_glyph bed]
data = 
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.....
	*****
	*.*.*
	*...*
	*.*.*
	*****
	.....
	.....

[display_glyph bed_heat1]
data = 
	................
	................
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.*..*
	*..*.
	.*..*
	*..*.
	.....
	*****
	.....
	.....

[display_glyph bed_heat2]
data = 
	................
	................
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	*..*.
	.*..*
	*..*.
	.*..*
	.....
	*****
	.....
	.....

[display_glyph fan1]
data = 
	................
	................
	....***.........
	...****....**...
	...****...****..
	....***..*****..
	.....*....****..
	.......**.......
	.......**.......
	..****....*.....
	..*****..***....
	..****...****...
	...**....****...
	.........***....
	................
	................

[display_glyph fan2]
data = 
	................
	................
	.......****.....
	.......****.....
	.......***......
	..**...**.......
	..***...........
	..****.**.****..
	..****.**.****..
	...........***..
	.......**...**..
	......***.......
	.....****.......
	.....****.......
	................
	................

[display_glyph chamber]
data = 
	................
	****************
	*....*....*....*
	*....*....*....*
	*....******....*
	*..............*
	*..............*
	*.....****.....*
	*.***.*..*.***.*
	*.....****.....*
	*......**......*
	*..............*
	*.************.*
	*...*......*...*
	****************
	................

[display_glyph feedrate]
data = 
	................
	................
	***.***.***.**..
	*...*...*...*.*.
	**..**..**..*.*.
	*...*...*...*.*.
	*...***.***.**..
	................
	**...*..***.***.
	*.*.*.*..*..*...
	**..***..*..**..
	*.*.*.*..*..*...
	*.*.*.*..*..***.
	................
	................
	................
hd44780_slot = 3
hd44780_data = 
	***..
	*....
	**...
	*.***
	..*.*
	..**.
	..*.*
	.....

[display_glyph fan]
hd44780_slot = 2
hd44780_data = 
	.....
	*..**
	**.*.
	..*..
	.*.**
	**..*
	.....
	.....

[display_glyph clock]
hd44780_slot = 4
hd44780_data = 
	.....
	.***.
	*..**
	*.*.*
	*...*
	.***.
	.....
	.....

[display_glyph degrees]
hd44780_slot = 5
hd44780_data = 
	.**..
	*..*.
	*..*.
	.**..
	.....
	.....
	.....
	.....

[display_glyph usb]
hd44780_slot = 6
hd44780_data = 
	.***.
	.***.
	.***.
	*****
	*****
	*****
	..*..
	..*..

[display_glyph sd]
hd44780_slot = 6
hd44780_data = 
	.....
	..***
	.****
	*****
	*****
	*****
	*****
	.....

[delayed_gcode setdisplayneopixel]
initial_duration = 1
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro red]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro orange]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro green]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro blue]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro white]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro yellow]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro purple]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[stepper_x]
step_pin = PE11
dir_pin = !PE10
enable_pin = !PE9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 300
position_max = 300
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PE7
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
interpolate = True
diag0_pin = ^!PB14
run_current = 1
driver_sgt = 1

[stepper_y]
step_pin = PD8
dir_pin = !PB12
enable_pin = !PD9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 310
position_max = 310
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PE15
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
diag0_pin = ^!PB13
interpolate = True
run_current = 1
driver_sgt = 1

[stepper_z]
step_pin = PE6
dir_pin = PC13
enable_pin = !PE5
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 240
position_min = -5
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 0.0

[tmc2209 stepper_z]
uart_pin = PC14
uart_address = 0
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z1]
step_pin = PE2
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z1]
uart_pin = PC15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z2]
step_pin = PD12
dir_pin = PC4
enable_pin = !PE8
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z2]
uart_pin = PA15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[tmc2209 extruder]
uart_pin = sht36:PB5
interpolate = false
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[gcode_arcs]
resolution = 1.0

[output_pin LIGHTS]
pin = PC8
pwm = true
shutdown_value = 0
value = 1
cycle_time = 0.01

[gcode_macro LIGHTS_ON]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.6

[gcode_macro LIGHTS_ON_20]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.20

[gcode_macro LIGHTS_OFF]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.0

[neopixel sb_leds]
pin = sht36:PB0
chain_count = 3
color_order = GRBW
initial_red = 0.0
initial_green = 0.0
initial_blue = 0.0
initial_white = 0.0

[gcode_macro _sb_vars]
variable_colors = {
	'logo': {
	'busy': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cleaning': {'r': 0.0, 'g': 0.02, 'b': 0.5, 'w': 0.0},
	'calibrating_z': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	'heating': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'homing': {'r': 0.0, 'g': 0.6, 'b': 0.2, 'w': 0.0},
	'leveling': {'r': 0.5, 'g': 0.1, 'b': 0.4, 'w': 0.0},
	'meshing': {'r': 0.2, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'printing': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'standby': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'red': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'orange': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'green': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'blue': {'r': 0.0, 'g': 0.0, 'b': 0.5, 'w': 0.0},
	'white': {'r': 1.0, 'g': 1.0, 'b': 1.0, 'w': 0.0},
	'yellow': {'r': 0.4, 'g': 0.4, 'b': 0.0, 'w': 0.0},
	'purple': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	},
	'nozzle': {
	'heating': {'r': 0.8, 'g': 0.35, 'b': 0.0, 'w':0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'on': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':1.0},
	'standby': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':0.8},
	},
	'thermal': {
	'hot': {'r': 1.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cold': {'r': 0.3, 'g': 0.0, 'b': 0.3, 'w': 0.0}
	}
	}
variable_logo_led_name = "sb_leds"
variable_logo_idx = "3"
variable_nozzle_led_name = "sb_leds"
variable_nozzle_idx = "1,2"
gcode = 

[gcode_macro _set_sb_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = params.LED|string %}
	{% set idx = (params.IDX|string).split(',') %}
	{% set transmit_last = params.TRANSMIT|default(1) %}
	
	{% for led_index in idx %}
	{% set transmit=transmit_last if loop.last else 0 %}
	set_led led={led} red={red} green={green} blue={blue} white={white} index={led_index} transmit={transmit}
	{% endfor %}

[gcode_macro _set_sb_leds_by_name]
gcode = 
	{% set leds_name = params.LEDS %}
	{% set color_name = params.COLOR %}
	{% set color = printer["gcode_macro _sb_vars"].colors[leds_name][color_name] %}
	{% set led = printer["gcode_macro _sb_vars"][leds_name + "_led_name"] %}
	{% set idx = printer["gcode_macro _sb_vars"][leds_name + "_idx"] %}
	{% set transmit = params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={color.r} green={color.g} blue={color.b} white={color.w} idx="{idx}" transmit={transmit}

[gcode_macro _set_logo_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].logo_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].logo_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro _set_nozzle_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].nozzle_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].nozzle_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro set_logo_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_logo_leds red=0 blue=0 green=0 white=0 transmit={transmit}

[gcode_macro set_nozzle_leds_on]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="on" transmit={transmit}

[gcode_macro set_nozzle_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="off" transmit={transmit}

[gcode_macro status_off]
gcode = 
	set_logo_leds_off transmit=0
	set_nozzle_leds_off

[gcode_macro status_ready]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="standby" transmit=1

[gcode_macro status_busy]
gcode = 
	_set_sb_leds_by_name leds="logo" color="busy" transmit=0
	set_nozzle_leds_on

[gcode_macro status_heating]
gcode = 
	_set_sb_leds_by_name leds="logo" color="heating" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="heating" transmit=1

[gcode_macro status_leveling]
gcode = 
	_set_sb_leds_by_name leds="logo" color="leveling" transmit=0
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="homing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	_set_sb_leds_by_name leds="logo" color="cleaning" transmit=0
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="meshing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	_set_sb_leds_by_name leds="logo" color="calibrating_z" transmit=0
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="printing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_orange]
gcode = 
	_set_sb_leds_by_name leds="logo" color="orange" transmit=0
	set_nozzle_leds_on

[gcode_macro status_red]
gcode = 
	_set_sb_leds_by_name leds="logo" color="red" transmit=0
	set_nozzle_leds_on

[gcode_macro status_purple]
gcode = 
	_set_sb_leds_by_name leds="logo" color="purple" transmit=0
	set_nozzle_leds_on

[gcode_macro status_green]
gcode = 
	_set_sb_leds_by_name leds="logo" color="green" transmit=0
	set_nozzle_leds_on

[gcode_macro status_white]
gcode = 
	_set_sb_leds_by_name leds="logo" color="white" transmit=0
	set_nozzle_leds_on

[gcode_macro status_yellow]
gcode = 
	_set_sb_leds_by_name leds="logo" color="yellow" transmit=0
	set_nozzle_leds_on

[gcode_macro status_blue]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	set_nozzle_leds_on

[delayed_gcode set_sb_leds_on_boot]
initial_duration = 1
gcode = 
	flicker
	status_ready

[gcode_macro flicker]
gcode = 
	{% set LEDTimes = [10, 20, 20, 240, 20, 40, 20, 100, 20, 20, 20, 260, 80, 20, 240, 60, 160, 20, 240, 20, 1000, 20, 20, 40, 100, 20, 274, 340, 860, 20, 1400, 20, 60, 20] %}
	{% set RGB_Red = 0.2 %}
	{% set RGB_Green = 0.2 %}
	{% set RGB_Blue = 0.2 %}
	{% set RGB_Strip = "sb_leds" %}
	{% set RGB_Strip1 = "mini12864" %}
	
	{% for toggletime in LEDTimes %}
	{% set ledTime = toggletime|string %}
	{% set loopCount = loop.index %}
	
	{% if loopCount is divisibleby 2 %}
	SET_LED LED={RGB_Strip} RED={RGB_Red} GREEN={RGB_Green} BLUE={RGB_Blue}
	G4 P{ledTime|int}
	{% else %}
	SET_LED LED={RGB_Strip}
	G4 P{ledTime|int}
	{% endif %}
	
	{% endfor %}
	
	{% for i in range(1,9) %}
	SET_LED LED={RGB_Strip} RED={RGB_Red+(i/10)} GREEN={RGB_Green+(i/10)}  BLUE={RGB_Blue+(i/10)} INDEX=1
	G4 P200
	{% endfor %}

[beacon]
serial = /dev/serial/by-id/usb-Beacon_Beacon_RevD_63E3DDD04E4B333448202020FF0A3315-if00
x_offset = 0
y_offset = -24
mesh_main_direction = x
mesh_runs = 2
home_xy_position = 117.5, 117.5
home_z_hop = 5
home_z_hop_speed = 30
home_xy_move_speed = 300
home_method = contact|proximity
home_method_when_homed = contact|proximity
home_autocalibrate = always|unhomed|never

[bed_mesh]
speed = 150
horizontal_move_z = 10
mesh_min = 10,10
mesh_max = 290,240
probe_count = 15,15
algorithm = bicubic
fade_start = 1
fade_end = 5
fade_target = 0

[z_tilt]
speed = 500
horizontal_move_z = 10
retries = 5
retry_tolerance = 0.004
z_positions = 
	-50, 18
	150, 348
	350, 18
points = 
	30, 5
	150, 245
	270, 5

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% if display_parameters == True %}
	{ action_respond_info("led_enable  : %d" % (led_enable))  }
	{ action_respond_info("status_macro: \'%s\'" % (status_macro))  }
	{ action_respond_info("fuzz_enable : %d" % (fuzz_enable))  }
	{ action_respond_info("fuzz_min    : %f" % (fuzz_min))  }
	{ action_respond_info("fuzz_max    : %f" % (fuzz_max))  }
	{ action_respond_info("probe_dock_enable: %d" % (probe_dock_enable))  }
	{ action_respond_info("attach_macro: \'%s\'" % (attach_macro))  }
	{ action_respond_info("detach_macro: \'%s\'" % (detach_macro))  }
	{% endif %}
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% if margin_enable == False %}
	{% set margin_size = 0 %}
	{% endif %}
	
	{ action_respond_info("{} object points, clamping to bed mesh [{!r} {!r}]".format(
	all_points | count,
	bed_mesh_min,
	bed_mesh_max,
	)) }
	
	{% if fuzz_enable == True %}
	{% set fuzz_range = range((fuzz_min * 100) | int, (fuzz_max * 100) | int + 1) %}
	{% set x_min = (bed_mesh_min[0] + fuzz_max - margin_size, x_min) | max - (fuzz_range | random / 100.0) %}
	{% set y_min = (bed_mesh_min[1] + fuzz_max - margin_size, y_min) | max - (fuzz_range | random / 100.0) %}
	{% set x_max = (bed_mesh_max[0] - fuzz_max + margin_size, x_max) | min + (fuzz_range | random / 100.0) %}
	{% set y_max = (bed_mesh_max[1] - fuzz_max + margin_size, y_max) | min + (fuzz_range | random / 100.0) %}
	{% else %}
	{% set x_min = [ bed_mesh_min[0], x_min - margin_size ] | max %}
	{% set y_min = [ bed_mesh_min[1], y_min - margin_size ] | max %}
	{% set x_max = [ bed_mesh_max[0], x_max + margin_size ] | min %}
	{% set y_max = [ bed_mesh_max[1], y_max + margin_size ] | min %}
	{% endif %}
	
	{ action_respond_info("Object bounds, clamped to the bed_mesh: {!r}, {!r}".format(
	(x_min, y_min),
	(x_max, y_max),
	)) }
	
	{% set points_x = (((x_max - x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((y_max - y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	{ action_respond_info( "Algorithm: {}".format(algorithm)) }
	
	{% set points_x = [points_x, min_points]|max  %}
	{% set points_y = [points_y, min_points]|max  %}
	{ action_respond_info( "Points: x: {}, y: {}".format(points_x, points_y) ) }
	
	{% if printer.configfile.settings.bed_mesh.relative_reference_index is defined %}
	{% set ref_index = (points_x * points_y / 2) | int %}
	{ action_respond_info( "Reference index: {}".format(ref_index) ) }
	{% else %}
	{% set ref_index = -1 %}
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	{% if led_enable == True %}
	{status_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={x_min},{y_min} mesh_max={x_max},{y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y} RELATIVE_REFERENCE_INDEX={ref_index}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}
variable_led_enable = False
variable_status_macro = 'status_meshing'
variable_fuzz_enable = False
variable_fuzz_min = 0
variable_fuzz_max = 4
variable_margin_enable = False
variable_margin_size = 5
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_display_parameters = True

[gcode_macro Z_TILT_ADJUST]
rename_existing = _Z_TILT_ADJUST
gcode = 
	{ action_respond_info("Z Tilt Adjust") }
	
	_Z_TILT_ADJUST {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	G28 Z0

[gcode_macro z_tilt_scan]
gcode = 
	z_tilt_adjust RETRY_TOLERANCE=1
	z_tilt_adjust HORIZONTAL_MOVE_Z=2

[gcode_macro MACROS_VARS]
variable_circ_fan_speed = 255
variable_probe_temp = 150
variable_starting_wled = 2
variable_heating_wled = 4
variable_ending_wled = 3
variable_ending_length = 25
variable_purge_length = 40
variable_filament_swap_length = 0.8
variable_pla_pa = 0.00525
variable_pet_pa = 0.00650
variable_abs_pa = 0.00460
variable_pet_za = 0.010
variable_move_away_home = 0
variable_homing_retract = 20
gcode = 

[gcode_macro MATERIAL_PA]
gcode = 
	{% set MATERIAL = params.MATERIAL|default("XXX")|string %}
	{% set TEXT ="Setting PA for " + MATERIAL %}
	{% set PLA = printer["gcode_macro MACROS_VARS"].pla_pa|default(0)%}
	{% set PET = printer["gcode_macro MACROS_VARS"].pet_pa|default(0)%}
	{% set ABS = printer["gcode_macro MACROS_VARS"].abs_pa|default(0)%}
	{% set PETZ = printer["gcode_macro MACROS_VARS"].pet_za|default(0)%}
	{% if MATERIAL == "PLA" %}
	SET_PRESSURE_ADVANCE ADVANCE={PLA}
	{% elif MATERIAL == "PET" %}
	SET_PRESSURE_ADVANCE ADVANCE={PET}
	SET_GCODE_OFFSET Z_ADJUST={PETZ} MOVE=1
	{% elif MATERIAL == "ABS" %}
	SET_PRESSURE_ADVANCE ADVANCE={ABS}
	{% else %}
	{% set TEXT ="No PA value for " + MATERIAL %}
	{% endif %}
	DISPLAYTEXT TEXT="{TEXT}"

[gcode_macro PURGE_LINE]
gcode = 
	DISPLAYTEXT TEXT="Prime Line"
	G1 X75 E25 F1000
	G92 E0;
	G90
	G0 X75 Y4 F6000
	G1 Z0.2 F200
	G91
	G1 X150 E30 F1200;
	G1 Y1
	G1 X-150 E30 F1200;
	G92 E0.0
	G1 Z1 F5000

[gcode_macro PRINT_START]
gcode = 
	{% set BED_TEMP = params.BED_TEMP|default(110)|float %}
	{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(250)|float %}
	{% set ENCLOSURE_TEMP = params.ENCLOSURE_TEMP|default(45)|int %}
	{% set PROBE_TEMP = printer["gcode_macro MACROS_VARS"].probe_temp|default(0)%}
	
	SET_TEMP HEATER="bed" TEMP={BED_TEMP}
	SET_TEMP HEATER="extruder" TEMP={PROBE_TEMP} WAIT=1
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	DISPLAYTEXT TEXT="Homing"
	G28
	{% endif %}
	DISPLAYTEXT TEXT="Heating Bed"
	SET_TEMP HEATER="bed" TEMP={BED_TEMP} WAIT=1
	
	{% if not printer.z_tilt.applied %}
	DISPLAYTEXT TEXT="Z tilt thingy"
	Z_TILT_ADJUST
	{% endif %}
	MATERIAL_PA MATERIAL={FILAMENT}
	DISPLAYTEXT TEXT="Heating Extruder"
	SET_TEMP HEATER="extruder" TEMP={EXTRUDER_TEMP} WAIT=1
	
	BED_MESH_CALIBRATE
	SET_FAN_SPEED FAN=rebreather SPEED=1
	SET_FAN_SPEED FAN=stepper_fans SPEED=0.25
	MATERIAL_PA MATERIAL={FILAMENT}
	G4 P1000
	PURGE_LINE
	
	
	DISPLAYTEXT TEXT="Printing..."

[gcode_macro G32]
gcode = 
	BED_MESH_CLEAR
	G28
	Z_TILT_ADJUST
	G28
	G0 X75 Y75 Z30 F3600

[gcode_macro PRINT_END]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	{% set FILAMENT = params.FILAMENT|default(PLA) %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	M400
	G92 E0
	G1 E-25.0 F1800
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	TURN_OFF_HEATERS
	M107
	G1 Z2 F3000
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	
	{% if FILAMENT == 'ABS' or params.FILAMENT == 'ASA' %}
	NEVERMORE_END_PRINT
	{% endif %}
	
	DISPLAYTEXT TEXT="Print Complete"

[gcode_macro SET_TEMP]
gcode = 
	{% set HEATER = params.HEATER|default("")|string %}
	{% set TEMP = params.TEMP|default(0)|int %}
	{% set WAIT = params.WAIT|default(0)|int %}
	
	{% if HEATER == "extruder" %}
	{% if WAIT == 1 %}
	M109 S{TEMP}
	{% else %}
	M104 S{TEMP}
	{% endif %}
	{% else %}
	{% if WAIT == 1 %}
	M190 S{TEMP}
	{% else %}
	M140 S{TEMP}
	{% endif %}
	{% endif %}

[gcode_macro ENDING_RETRACTION]
gcode = 
	{% set RETRACT = printer["gcode_macro MACROS_VARS"].ending_length|default(0)%}
	G1 E{RETRACT*-1} F1800

[gcode_macro PARK_AT_PRINT_END]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600

[gcode_macro Homing_Variables]
variable_move_away_home = 0
variable_x_homing_pos = 150
variable_y_homing_pos = 150
variable_homing_current = 0.8
variable_homing_retract_x = 150
variable_homing_retract_y = 20
variable_homing_retract_speed = 5000
variable_z_end_pos = 30
variable_is_sensorless = True
variable_display_parameters = True
gcode = 

[homing_override]
axes = xyz
gcode = 
	DISPLAY_PARAMETERS
	
	
	SET_KINEMATIC_POSITION Z=0
	MOVE_AWAY_BEFORE_HOMING PARAMS="Z"
	WAIT TIME=2
	
	{% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}
	
	{% if home_all or 'X' in params %}
	_HOME_X
	{% endif %}
	
	{% if home_all or 'Y' in params %}
	_HOME_Y
	{% endif %}
	
	{% if home_all or 'Z' in params %}
	_HOME_Z
	{% endif %}

[gcode_macro DISPLAY_PARAMETERS]
gcode = 
	{% set DISPLAY_PARAMS = printer["gcode_macro Homing_Variables"].display_parameters %}
	{% set is_sensorless = printer["gcode_macro Homing_Variables"].is_sensorless %}
	{% set x_homing_pos = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set y_homing_pos = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	{% set homing_current = printer["gcode_macro Homing_Variables"].homing_current %}
	{% set homing_retract_x = printer["gcode_macro Homing_Variables"].homing_retract_x %}
	{% set homing_retract_y = printer["gcode_macro Homing_Variables"].homing_retract_y %}
	{% set homing_retract_speed = printer["gcode_macro Homing_Variables"].homing_retract_speed %}
	{% set z_end_pos = printer["gcode_macro Homing_Variables"].z_end_pos %}
	
	{% if DISPLAY_PARAMS == True %}
	{ action_respond_info("is_sensorless  : %d" % (is_sensorless))  }
	{ action_respond_info("x_homing_pos  : %d" % (x_homing_pos))  }
	{ action_respond_info("y_homing_pos  : %d" % (y_homing_pos))  }
	{ action_respond_info("homing_current  : %d" % (homing_current))  }
	{ action_respond_info("homing_retract_x  : %d" % (homing_retract_x))  }
	{ action_respond_info("homing_retract_y  : %d" % (homing_retract_y))  }
	{ action_respond_info("homing_retract_speed  : %d" % (homing_retract_speed))  }
	{ action_respond_info("z_end_pos  : %d" % (z_end_pos))  }
	{% endif %}

[gcode_macro MOVE_AWAY_BEFORE_HOMING]
gcode = 
	{% set MAH = printer["gcode_macro Homing_Variables"].move_away_home|default(0)%}
	{% set PARAMS = params.PARAMS|default("")|string %}
	
	{% set home_all = 'X' not in PARAMS and 'Y' not in PARAMS and 'Z' not in PARAMS %}
	
	
	{% if home_all or 'X' in PARAMS %}
	G1 X-{MAH/2}  F6000
	{% endif %}
	
	{% if home_all or 'Y' in PARAMS %}
	G1  Y-{MAH/2} F6000
	{% endif %}
	
	{% if home_all or 'Z' in PARAMS %}
	G1 Z{MAH} F100
	{% endif %}

[gcode_macro _HOME_X]
gcode = 
	DISPLAYTEXT TEXT="Homing X Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_x|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION X=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="X"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 X
	
	G91
	G1 X-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Y]
gcode = 
	DISPLAYTEXT TEXT="Homing Y Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_y|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION Y=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="Y"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 Y
	
	G91
	G1 Y-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Z]
gcode = 
	{% set Ez = printer["gcode_macro Homing_Variables"].z_end_pos %}
	{% set Hx = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set Hy = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	
	DISPLAYTEXT TEXT="Homing Z Axis"
	
	G1 X{Hx} Y{Hy} F15000
	G28 Z
	G1 Z{Ez}

[gcode_macro ABSOLUTE_COORDINATES]
gcode = 
	G90

[gcode_macro RELATIVE_COORDINATES]
gcode = 
	G91

[gcode_macro DISPLAYTEXT]
gcode = 
	{% set TEXT = params.TEXT|default("")|string %}
	RESPOND MSG="{TEXT}"
	SET_DISPLAY_TEXT MSG="{TEXT}"

[gcode_macro DISPLAY_PROGRESS]
gcode = 
	{% set TOTAL_LAYERS = params.TOTAL_LAYERS|default("")|string %}
	{% set CURRENT_LAYER = params.CURRENT_LAYER|default("")|string %}
	RESPOND MSG="Total layers {TOTAL_LAYERS}, current layer {CURRENT_LAYER}"

[gcode_macro TEMPERATURE_WAIT]
rename_existing = _TEMPERATURE_WAIT
gcode = 
	{% set SENSOR = params.SENSOR|default("")|string %}
	{% set MINIMUM = params.MINIMUM|int %}
	{% set MSG = "Enclosure temperature has reached " + MINIMUM |string %}
	
	DISPLAYTEXT TEXT="Heatsoaking..."
	_TEMPERATURE_WAIT SENSOR="{SENSOR}" MINIMUM={MINIMUM}
	DISPLAYTEXT TEXT="{MSG}"

[gcode_macro WAIT]
gcode = 
	{% set TIME = params.TIME|default(0)|int %}
	G4 P{TIME*1000}

[gcode_macro CHOME]
gcode = 
	{% if printer.toolhead.homed_axes != "xyz" %}
	DISPLAYTEXT TEXT="Homing.."
	G28
	{% endif %}

[gcode_macro RESET_EXTRUDER]
gcode = 
	G92 E0

[gcode_macro PARK_TOOLHEAD]
gcode = 
	{% set th = printer.toolhead %}
	ABSOLUTE_COORDINATES
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y//2} F15000

[gcode_macro DUMP_VARIABLES]
gcode = 
	{% set filter_name = params.NAME|default('')|string|lower %}
	{% set filter_value = params.VALUE|default('')|string|lower %}
	{% set show_cfg = params.SHOW_CFG|default(0)|int %}
	
	{% set out = [] %}
	
	{% for key1 in printer %}
	{% for key2 in printer[key1] %}
	{% if (show_cfg or not (key1|lower == 'configfile' and key2|lower in ['config', 'settings'])) and (filter_name in key1|lower or filter_name in key2|lower) and filter_value in printer[key1][key2]|string|lower %}
	{% set dummy = out.append("printer['%s'].%s = %s" % (key1, key2, printer[key1][key2])) %}
	{% endif %}
	{% else %}
	{% if filter_name in key1|lower and filter_value in printer[key1]|string|lower %}
	{% set dummy = out.append("printer['%s'] = %s" % (key1, printer[key1])) %}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	{action_respond_info(out|join("\n"))}

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=UNLOAD_FILAMENT_state
	
	M82
	G92 E0
	G1 E2 F3600
	G1 E0 F3600
	G1 E3 F3600
	G1 E0 F3600
	G1 E4 F3600
	G1 E0 F3600
	
	M83
	G1 E-20 F3600
	G4 P3000
	G1 E{DISTANCE|float * -1} F3000
	RESTORE_GCODE_STATE NAME=UNLOAD_FILAMENT_state

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=LOAD_FILAMENT_state
	
	M83
	G92 E0
	G1 E{DISTANCE|float} F200
	
	
	
	
	G1 E50 F150
	
	
	G92 E0
	RESTORE_GCODE_STATE NAME=LOAD_FILAMENT_state

[gcode_macro PID_HOTEND]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro PID_BED]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=80

[gcode_macro Z_ENDSTOP]
gcode = 
	Z_ENDSTOP_CALIBRATE

[gcode_macro PROBE_CAL]
gcode = 
	
	G28
	PROBE_CALIBRATE

[gcode_macro IS_CAL]
gcode = 
	
	G28
	SHAPER_CALIBRATE

[gcode_macro SPEEDTEST]
gcode = 
	
	
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest_state
	
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{maxX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{maxX} Y{minY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest_state

[gcode_macro SPEEDTEST2]
gcode = 
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest2_state
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest2_state

[gcode_macro PRESSURE_ADVANCE_CALIBRATION]
description = Calibrate the pressure advance by printing a grid pattern
gcode = 
	
	
	
	{% set pa_start     = params.START|default(0.02)|float %}
	{% set pa_increment = params.INCREMENT|default(0.005)|float %}
	
	{% set do_raft = params.RAFT|default(1)|int %}
	
	{% set print_size      = params.SIZE|default(120)|int %}
	{% set num_bands       = params.BANDS_LIMIT|default(999)|int %}
	{% set lines_per_band  = params.LINES_PER_BAND|default(6)|int %}
	{% set e_multiplier    = params.EXTRUSION_MULTIPLIER|default(1.25 if do_raft == 1 else 1.5)|float %},
	{% set retract_length  = params.RETRACT|default(0.6)|float %}
	{% set initial_purge   = params.PURGE_MM|default(8)|int %}
	
	{% set feedrate_control = params.CONTROL_SPEED|default(30)|int * 60 %}
	{% set feedrate_outer   = params.OUTER_SPEED|default(40)|int * 60 %}
	{% set feedrate_inner   = params.INNER_SPEED|default(120)|int * 60 %}
	{% set feedrate_travel  = params.TRAVEL_SPEED|default(200)|int * 60 %}
	{% set feedrate_raft    = params.RAFT_SPEED|default(120)|int * 60 %}
	{% set feedrate_z       = 5 * 60 %}
	{% set feedrate_retract = 50 * 60 %}
	
	{% set spacing_line  = params.LINE_SPACING|default(0.4)|float %}
	{% set spacing_band  = 2 %}
	{% set spacing_raft  = 2 %}
	
	{% set fast_line_ratio_percent = 50 %}
	
	{% set lines_per_band    = [2, lines_per_band]|max %}
	{% set e_multiplier      = [1, e_multiplier]|max %}
	{% set num_lines_control = (lines_per_band / 2)|round(0, 'floor')|int %}
	{% set num_lines_test    = (lines_per_band / 2)|round(0, 'ceil')|int %}
	{% set spacing_line      = spacing_line * (1 + e_multiplier - 1.25) %}
	
	{% set max_x = printer.toolhead.axis_maximum.x|float %}
	{% set max_y = printer.toolhead.axis_maximum.y|float %}
	{% set nozzle_diameter = printer.configfile.config['extruder'].nozzle_diameter|float %}
	{% set line_width    = nozzle_diameter * 1.25 %}
	{% set line_height   = nozzle_diameter / 2 %}
	{% set z_hop_height  = 2 * line_height %}
	{% set e_per_mm      = (line_width * line_height) / (3.1415 * (1.75/2)**2) %}
	{% set spacing_purge = line_height * 0.8 %}
	
	{% set spacing_raft   = (spacing_raft / line_width)|round * line_width %}
	{% set num_raft_lines = ([print_size, max_x]|min / spacing_raft)|round(0, 'floor')|int %}
	{% set print_width    = num_raft_lines * spacing_raft %}
	
	{% set band_height      = lines_per_band * line_width + (lines_per_band - 1) * spacing_line + spacing_band %}
	{% set bands_per_height = (([print_size, max_y]|min  - spacing_purge) / band_height)|round(0, 'floor')|int %}
	{% set num_bands        = [num_bands, bands_per_height]|min %}
	{% set print_height     = num_bands * band_height - spacing_band - spacing_purge %}
	
	{% set slow_line_length = ((print_width * (1 - fast_line_ratio_percent / 100) / 2) / spacing_raft)|round * spacing_raft + spacing_raft / 2 %}
	{% set fast_line_length = print_width - slow_line_length * 2 %}
	{% set thick_raft_num1 = (slow_line_length / spacing_raft)|round|int %}
	{% set thick_raft_num2  = num_raft_lines - thick_raft_num1 + 1 %}
	
	{% set x_start = max_x / 2 - print_width  / 2 %}
	{% set y_start = max_y / 2 - print_height / 2 %}
	
	{action_respond_info("")}
	{action_respond_info("Starting Pressure Advance calibration print.")}
	{action_respond_info("")}
	{action_respond_info("This operation can not be interrupted by normal means. Hit the \"emergency stop\" button once the print starts exhibiting PA values that are obviously too high.")}
	{action_respond_info("")}
	{action_respond_info("PA of first band: %.4f" % pa_start)}
	{action_respond_info("PA of last band: %.4f" % (num_bands * pa_increment))}
	{action_respond_info("PA increment per band: %.4f" % pa_increment)}
	{action_respond_info("Number of bands: %d" % num_bands)}
	{action_respond_info("")}
	{action_respond_info("Inspect the printed model. "
	"Look at the top and bottom lines in each band, on the right side of the two vertical raft bars (where the print speeds change). "
	"Find the highest band from the bottom where the lines at its top still resemble the lines at its bottom, with no visible extrusion width irregularities. "
	"Your final Pressure Advance value would then be:"
	)}
	{action_respond_info("")}
	{action_respond_info("PA = %.4f + (%.4f * band_number)" % (pa_start, pa_increment))}
	{action_respond_info("")}
	{action_respond_info("Update your [extruder] config section and set \"pressure_advance\" to the value you calculated.")}
	{action_respond_info("")}
	
	
	
	
	
	
	
	
	
	SAVE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION
	{% set pa_saved = printer.configfile.settings['extruder'].pressure_advance %}
	SET_PRESSURE_ADVANCE ADVANCE={pa_start}
	
	
	
	
	M117 Priming
	G90
	G0 X{x_start} Y{y_start} Z{line_height} F{feedrate_travel}
	G91
	G1 E{initial_purge} F{5 * 60}
	G1 X{print_width}  E{print_width * e_per_mm} F{feedrate_raft / 2}
	G1 Y{line_width}   E{line_width * e_per_mm}  F{feedrate_raft / 2}
	G1 X-{print_width} E{print_width * e_per_mm} F{feedrate_raft / 2}
	
	
	
	
	{% if do_raft == 1 %}
	G0 F{feedrate_raft}
	
	{% for curr_raft_line in range(1, num_raft_lines + 2) %}
	
	{% if curr_raft_line == thick_raft_num1 or curr_raft_line == thick_raft_num2 %}
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	G1 Y{loop.cycle(-1.0, 1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	{% endif %}
	
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	
	
	{% if not loop.last %}
	{% set horizontal_move = spacing_raft - (2 * line_width if curr_raft_line == thick_raft_num1 - 1 or curr_raft_line == thick_raft_num2 - 1 else 0) %}
	G1 X{horizontal_move} E{horizontal_move * e_per_mm}
	{% endif %}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	{% endif %}
	
	
	
	
	M117 Printing bands
	G90
	G0 X{x_start} Y{y_start + 2 * line_width + spacing_purge} F{feedrate_travel}
	G0 Z{line_height + (line_height if do_raft == 1 else 0)} F{feedrate_z}
	G91
	G1 E{retract_length} F{feedrate_retract}
	
	
	{% for curr_band_num in range(1, num_bands + 1) %}
	{% set outer_loop = loop %}
	
	{% set curr_pa_value = pa_start + (curr_band_num - 1) * pa_increment %}
	SET_PRESSURE_ADVANCE ADVANCE={curr_pa_value}
	M117 Band {curr_band_num} PA {curr_pa_value|round(4)}
	
	
	{% for _ in range(num_lines_control) %}
	G1 X{print_width} E{print_width * e_per_mm * e_multiplier} F{feedrate_control}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	G0 X-{print_width} Y{spacing_line + line_width} F{feedrate_travel}
	
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endfor %}
	
	
	{% for _ in range(num_lines_test) %}
	{% for data in [{'mm': slow_line_length, 'f': feedrate_outer}, {'mm': fast_line_length, 'f': feedrate_inner}, {'mm': slow_line_length, 'f': feedrate_outer}] %}
	G1 X{data.mm} E{data.mm * e_per_mm * e_multiplier} F{data.f}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	{% if not (outer_loop.last and loop.last) %}
	G0 X-{print_width} Y{(spacing_line if not loop.last else spacing_band) + line_width} F{feedrate_travel}
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	
	
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z20 F{feedrate_z}
	G0 X-{print_width / 2} Y{[50, max_y - (y_start + print_height)]|min} F{feedrate_travel}
	
	M117
	SET_PRESSURE_ADVANCE ADVANCE={pa_saved}
	RESTORE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION

[gcode_macro TEST_SPEED]
gcode = 
	
	{% set speed  = params.SPEED|default(printer.configfile.settings.printer.max_velocity)|int %}
	
	{% set iterations = params.ITERATIONS|default(5)|int %}
	
	{% set accel  = params.ACCEL|default(printer.configfile.settings.printer.max_accel)|int %}
	
	{% set bound = params.BOUND|default(20)|int %}
	
	{% set smallpatternsize = SMALLPATTERNSIZE|default(20)|int %}
	
	
	
	{% set x_min = printer.toolhead.axis_minimum.x + bound %}
	{% set x_max = printer.toolhead.axis_maximum.x - bound %}
	{% set y_min = printer.toolhead.axis_minimum.y + bound %}
	{% set y_max = printer.toolhead.axis_maximum.y - bound %}
	
	
	
	{% set x_center = (printer.toolhead.axis_minimum.x|float + printer.toolhead.axis_maximum.x|float ) / 2 %}
	{% set y_center = (printer.toolhead.axis_minimum.y|float + printer.toolhead.axis_maximum.y|float ) / 2 %}
	
	
	{% set x_center_min = x_center - (smallpatternsize/2) %}
	{% set x_center_max = x_center + (smallpatternsize/2) %}
	{% set y_center_min = y_center - (smallpatternsize/2) %}
	{% set y_center_max = y_center + (smallpatternsize/2) %}
	
	
	SAVE_GCODE_STATE NAME=TEST_SPEED
	
	
	{ action_respond_info("TEST_SPEED: x_min %d, y_min %d, x_max %d, y_max %d" % (x_min, y_min, x_max, y_max)) }
	{ action_respond_info("TEST_SPEED: starting %d iterations at speed %d, accel %d" % (iterations, speed, accel)) }
	
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	G28 X Y
	{% endif %}
	
	
	
	
	
	
	
	
	
	
	
	
	G4 P1000
	GET_POSITION
	
	
	G0 X{x_min} Y{y_min} Z{bound + 10} F{speed*60}
	
	
	SET_VELOCITY_LIMIT VELOCITY={speed} ACCEL={accel} ACCEL_TO_DECEL={accel / 2}
	
	{% for i in range(iterations) %}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	{% endfor %}
	
	
	SET_VELOCITY_LIMIT VELOCITY={printer.configfile.settings.printer.max_velocity} ACCEL={printer.configfile.settings.printer.max_accel} ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel}
	
	
	G28 X Y
	
	
	
	G4 P1000
	GET_POSITION
	
	
	RESTORE_GCODE_STATE NAME=TEST_SPEED

[gcode_macro SETUP_KAMP_MESHING]
gcode = 
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=display_parameters   VALUE={params.DISPLAY_PARAMETERS|default(True)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=led_enable   VALUE={params.LED_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=status_macro VALUE='"{params.STATUS_MACRO|default('status_meshing')|string}"'
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_enable VALUE={params.FUZZ_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_min    VALUE={params.FUZZ_MIN|default(0)|float}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_max    VALUE={params.FUZZ_MAX|default(4)|float}
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=probe_dock_enable  VALUE={params.PROBE_DOCK_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=attach_macro VALUE='"{params.ATTACH_MACRO|default('Attach_Probe')|string}"'
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=detach_macro VALUE='"{params.DETACH_MACRO|default('Dock_Probe')|string}"'

[input_shaper]
shaper_freq_x = 86.8
shaper_type_x = zv
shaper_freq_y = 62.2
shaper_type_y = zv

[probe]
z_offset = -0.0400

[beacon model default]
model_coef = 1.409155451498927,
	1.7229833219997472,
	0.7624260199879447,
	0.3933310021549746,
	0.3504714980336664,
	0.3215136667184013,
	-0.12014580629124338,
	-0.22419779942999016,
	0.19713656245482147,
	0.188750402116144
model_domain = 3.120873231931901e-07,3.332026812812074e-07
model_range = 0.200000,5.000000
model_temp = 23.909578
model_offset = 0.02500

[bed_mesh default]
version = 1
points = 
	-0.062140, -0.036984, -0.007379, 0.031314, 0.058627, 0.084848, 0.107257, 0.111945, 0.135207, 0.152355, 0.170171
	-0.128044, -0.093273, -0.053917, -0.019434, 0.015362, 0.051030, 0.076081, 0.091292, 0.113629, 0.133648, 0.155842
	-0.171323, -0.136118, -0.096393, -0.057201, -0.010727, 0.024397, 0.048697, 0.072530, 0.099236, 0.126818, 0.150713
	-0.201543, -0.161727, -0.119034, -0.066854, -0.018463, 0.014217, 0.047420, 0.076211, 0.103883, 0.134441, 0.171920
	-0.229879, -0.188570, -0.139992, -0.085341, -0.040984, 0.002604, 0.042138, 0.073877, 0.104620, 0.133705, 0.171879
	-0.263766, -0.213518, -0.162008, -0.108459, -0.058518, -0.007646, 0.032310, 0.069869, 0.102956, 0.138912, 0.180918
	-0.296565, -0.242362, -0.188285, -0.127789, -0.071974, -0.019641, 0.027806, 0.070759, 0.105252, 0.142100, 0.184275
	-0.296242, -0.233747, -0.171416, -0.107834, -0.048348, 0.004540, 0.056827, 0.100566, 0.141602, 0.182628, 0.230079
	-0.281192, -0.228380, -0.164876, -0.101596, -0.030960, 0.023575, 0.079761, 0.121563, 0.171967, 0.216584, 0.265930
	-0.307454, -0.252371, -0.190633, -0.113183, -0.041936, 0.019598, 0.074971, 0.120663, 0.178367, 0.230549, 0.282552
	-0.324293, -0.258430, -0.193413, -0.119856, -0.045648, 0.021113, 0.080729, 0.133249, 0.192194, 0.246004, 0.297448
x_count = 11
y_count = 11
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 59.444
max_x = 240.556
min_y = 75.541944
max_y = 224.458048
=======================
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 141, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/pi/klipper/klippy/klippy.py", line 130, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/pi/klipper/klippy/extras/beacon.py", line 3532, in load_config
    beacon = BeaconProbe(config)
  File "/home/pi/klipper/klippy/extras/beacon.py", line 99, in __init__
    self.homing_helper = BeaconHomingHelper.create(self, config)
  File "/home/pi/klipper/klippy/extras/beacon.py", line 2240, in create
    return BeaconHomingHelper(beacon, config, home_xy_position)
  File "/home/pi/klipper/klippy/extras/beacon.py", line 2248, in __init__
    raise config.error(
configparser.Error: home_xy_position cannot be used with [homing_override]
webhooks client 547898048224: New connection
webhooks client 547898048224: Client info {'program': 'Moonraker', 'version': 'v0.8.0-328-g5a60d64'}
webhooks client 547898048224: Disconnected
webhooks client 547665082160: New connection
webhooks client 547665082160: Client info {'program': 'Moonraker', 'version': 'v0.8.0-337-g546a17f'}
Attempting MCU 'mcu' reset
Unable to issue reset command on MCU 'rpi'
Unable to issue reset command on MCU 'sht36'
webhooks client 547665082160: Disconnected
Restarting printer
Start printer at Sun Apr 28 07:03:51 2024 (1714284231.4 1041826.3)
===== Config file =====
[exclude_object]

[idle_timeout]
timeout = 3600

[force_move]
enable_force_move = True

[respond]
default_type = echo

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	CANCEL_PRINT

[pause_resume]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
variable_park = True
gcode = 
	TURN_OFF_HEATERS
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	PRINT_END
	BASE_CANCEL_PRINT

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32f446xx_2D0053000E51323130373733-if00

[temperature_sensor Spider]
sensor_type = temperature_mcu
min_temp = 10
max_temp = 100

[board_pins spider]
aliases = 
	
	X_STEP=PE11, X_DIR=PE10, X_ENABLE=PE9,
	Y_STEP=PD8, Y_DIR=PB12, Y_ENABLE=PD9,
	Z_STEP=PD14, Z_DIR=PD13, Z_ENABLE=PD15,
	E0_STEP=PD5, E0_DIR=PD6, E0_ENABLE=PD4,
	E1_STEP=PE6, E1_DIR=PC13, E1_ENABLE=PE5,
	E2_STEP=PE2, E2_DIR=PE4, E2_ENABLE=PE3,
	E3_STEP=PD12, E3_DIR=PC4, E3_ENABLE=PE8,
	E4_STEP=PE1, E4_DIR=PE0, E4_ENABLE=PC5,
	
	X_MIN=PB14, X_MAX=PA1,
	Y_MIN=PB13, Y_MAX=PA2,
	Z_MIN=PA0, Z_MAX=PA3,
	
	X_UART=PE7, Y_UART=PE15, Z_UART=PD10,
	E0_UART=PD7, E1_UART=PC14, E2_UART=PC15,
	E3_UART=PA15, E4_UART=PD11,
	
	E_HEATER=PB15, E_THERMISTOR=PC0,
	E1_HEATER=PC8, E1_THERMISTOR=PC1,
	E2_HEATER=PB3, E2_THERMISTOR=PC2,
	BED_HEATER=PB4, BED_THERMISTOR=PC3,
	FAN0=PB0, FAN1=PB1, FAN2=PB2,
	
	LED-R=PB6, LED-G=PB5, LED-B=PB7,
	
	EXP1_1=PC9, EXP1_3=PC11, EXP1_5=PC10, EXP1_7=PD0, EXP1_9=<GND>,
	EXP1_2=PA8, EXP1_4=PD2, EXP1_6=PC12, EXP1_8=PD1, EXP1_10=<5V>,
	
	EXP2_1=PA6, EXP2_3=PC6, EXP2_5=PC7, EXP2_7=PB10, EXP2_9=<GND>,
	EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<5V>

[mcu rpi]
serial = /tmp/klipper_host_mcu

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 10
max_temp = 100

[gcode_shell_command rpi_fan_50]
command = i2cset -y 1 0x01a 0x32
timeout = 30.
verbose = True

[gcode_shell_command rpi_fan_25]
command = i2cset -y 1 0x01a 0x19
timeout = 30.
verbose = True

[gcode_macro rpi_fan_50]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_50

[gcode_macro rpi_fan_25]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_25

[mcu sht36]
canbus_uuid = 943ff2eb48fd

[temperature_sensor sht36]
sensor_type = temperature_mcu
sensor_mcu = sht36

[printer]
kinematics = corexy
max_velocity = 800
max_accel = 20000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[extruder]
sensor_pin = sht36:PA3
sensor_type = PT1000
heater_pin = sht36:PA8
min_temp = 10
max_temp = 270
max_power = 1.0
min_extrude_temp = 10
control = pid
pid_kp = 20.362
pid_ki = 2.225
pid_kd = 46.579
pressure_advance_smooth_time = 0.040
max_extrude_only_velocity = 120
max_extrude_only_accel = 800
max_extrude_only_distance = 1150
max_extrude_cross_section = 9999
nozzle_diameter = 0.400
filament_diameter = 1.75
step_pin = sht36:PB4
dir_pin = !sht36:PB3
enable_pin = !sht36:PA15
full_steps_per_rotation = 200
rotation_distance = 22.66103
gear_ratio = 50:10
microsteps = 16
pressure_advance = 0.05

[temperature_sensor chamber]
sensor_type = NTC 100K MGB18-104F39050L32
sensor_pin = PC2
min_temp = -100
max_temp = 100
gcode_id = C

[heater_bed]
heater_pin = PB4
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PB0
max_power = 0.9
min_temp = -160
max_temp = 120
control = pid
pid_kp = 41.450
pid_ki = 1.322
pid_kd = 324.866

[multi_pin stepper_drivers_multipin]
pins = PB5, PB6, PB7

[controller_fan stepper_drivers]
pin = multi_pin:stepper_drivers_multipin
hardware_pwm = False
max_power = 1.0
fan_speed = 0.75
shutdown_speed = 0.0
stepper = stepper_x, stepper_y

[heater_fan controller_fan]
pin = PB2
cycle_time = 0.00004
off_below = 0.1
kick_start_time = 0.5
heater = heater_bed
heater_temp = 50.0
max_power = 1.0

[heater_fan hotend_fan]
pin = sht36:PB10
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 40.0

[fan]
pin = sht36:PB11
max_power = 0.85
cycle_time = 0.00005
kick_start_time = 0
off_below = 0.0
shutdown_speed = 0

[fan_generic stepper_fans]
pin = PA13
max_power = 0.5
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.0001

[fan_generic rebreather]
pin = PA14
max_power = 1.0
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.00010

[gcode_macro rebreather_start_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.5

[gcode_macro rebreather_end_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.7
	UPDATE_DELAYED_GCODE ID=rebreather_stop_delayed DURATION=900

[delayed_gcode rebreather_stop_delayed]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.0

[display]
lcd_type = uc1701
cs_pin = PC11
a0_pin = PD2
rst_pin = PC10
encoder_pins = ^PC6,^PC7
click_pin = ^!PA8
contrast = 63
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6
spi_software_sclk_pin = PA5
display_group = __voron_display_16x4

[gcode_macro M300]
gcode = SET_PIN PIN=BEEPER_pin VALUE={S}
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[neopixel mini12864]
pin = PC12
chain_count = 60
initial_red = 0.1
initial_green = 0.5
initial_blue = 0.0
color_order = RGB

[display_template _heater_temperature]
param_heater_name = "extruder"
text = 
	{% if param_heater_name in printer %}
	{% set heater = printer[param_heater_name] %}
	
	{% if param_heater_name == "heater_bed" %}
	{% if heater.target %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~bed_heat{frame}~
	{% else %}
	~bed~
	{% endif %}
	{% else %}
	~extruder~
	{% endif %}
	
	{ "%3.0f" % (heater.temperature,) }
	
	{% if heater.target and (heater.temperature - heater.target)|abs > 2 %}
	~right_arrow~
	{ "%0.0f" % (heater.target,) }
	{% endif %}
	~degrees~
	{% endif %}

[display_template _fan_speed]
text = 
	{% if 'fan' in printer %}
	{% set speed = printer.fan.speed %}
	{% if speed %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~fan{frame}~
	{% else %}
	~fan1~
	{% endif %}
	{ "{:>4.0%}".format(speed) }
	{% endif %}

[display_template _printing_time]
text = 
	{% set ptime = printer.idle_timeout.printing_time %}
	{ "%02d:%02d" % (ptime // (60 * 60), (ptime // 60) % 60) }

[display_template _print_status]
text = 
	{% if printer.display_status.message %}
	{ printer.display_status.message }
	{% elif printer.idle_timeout.printing_time %}
	{% set pos = printer.toolhead.position %}
	{ "X%-4.0fY%-4.0fZ%-5.2f" % (pos.x, pos.y, pos.z) }
	{% else %}
	Ready
	{% endif %}

[display_data __voron_display_16x4 extruder]
position = 0, 0
text = 
	{% set active_extruder = printer.toolhead.extruder %}
	{ render("_heater_temperature", param_heater_name=active_extruder) }

[display_data __voron_display_16x4 fan]
position = 0, 10
text = { render("_fan_speed") }

[display_data __voron_display_16x4 heater_bed]
position = 1, 0
text = { render("_heater_temperature", param_heater_name="heater_bed") }

[display_data __voron_display_16x4 chamber]
position = 1,10
text = 
	{% set chamber = printer['temperature_sensor chamber'] %}
	~chamber~
	{ "%3.0f" % (chamber.temperature,) }
	~degrees~

[display_data __voron_display_16x4 print_progress]
position = 2, 0
text = { "{:^10.0%}".format(printer.display_status.progress) }

[display_data __voron_display_16x4 progress_bar]
position = 2, 1
text = { draw_progress_bar(2, 0, 10, printer.display_status.progress) }

[display_data __voron_display_16x4 printing_time]
position = 2, 10
text = { "%6s" % (render("_printing_time").strip(),) }

[display_data __voron_display_16x4 print_status]
position = 3, 0
text = { render("_print_status") }

[display_glyph extruder]
data = 
	................
	................
	..************..
	.....******.....
	..************..
	.....******.....
	..************..
	................
	....********....
	....******.*....
	....********....
	................
	......****......
	.......**.......
	................
	................
hd44780_slot = 0
hd44780_data = 
	..*..
	.*.*.
	.*.*.
	.*.*.
	.*.*.
	*...*
	*...*
	.***.

[display_glyph bed]
data = 
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.....
	*****
	*.*.*
	*...*
	*.*.*
	*****
	.....
	.....

[display_glyph bed_heat1]
data = 
	................
	................
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.*..*
	*..*.
	.*..*
	*..*.
	.....
	*****
	.....
	.....

[display_glyph bed_heat2]
data = 
	................
	................
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	*..*.
	.*..*
	*..*.
	.*..*
	.....
	*****
	.....
	.....

[display_glyph fan1]
data = 
	................
	................
	....***.........
	...****....**...
	...****...****..
	....***..*****..
	.....*....****..
	.......**.......
	.......**.......
	..****....*.....
	..*****..***....
	..****...****...
	...**....****...
	.........***....
	................
	................

[display_glyph fan2]
data = 
	................
	................
	.......****.....
	.......****.....
	.......***......
	..**...**.......
	..***...........
	..****.**.****..
	..****.**.****..
	...........***..
	.......**...**..
	......***.......
	.....****.......
	.....****.......
	................
	................

[display_glyph chamber]
data = 
	................
	****************
	*....*....*....*
	*....*....*....*
	*....******....*
	*..............*
	*..............*
	*.....****.....*
	*.***.*..*.***.*
	*.....****.....*
	*......**......*
	*..............*
	*.************.*
	*...*......*...*
	****************
	................

[display_glyph feedrate]
data = 
	................
	................
	***.***.***.**..
	*...*...*...*.*.
	**..**..**..*.*.
	*...*...*...*.*.
	*...***.***.**..
	................
	**...*..***.***.
	*.*.*.*..*..*...
	**..***..*..**..
	*.*.*.*..*..*...
	*.*.*.*..*..***.
	................
	................
	................
hd44780_slot = 3
hd44780_data = 
	***..
	*....
	**...
	*.***
	..*.*
	..**.
	..*.*
	.....

[display_glyph fan]
hd44780_slot = 2
hd44780_data = 
	.....
	*..**
	**.*.
	..*..
	.*.**
	**..*
	.....
	.....

[display_glyph clock]
hd44780_slot = 4
hd44780_data = 
	.....
	.***.
	*..**
	*.*.*
	*...*
	.***.
	.....
	.....

[display_glyph degrees]
hd44780_slot = 5
hd44780_data = 
	.**..
	*..*.
	*..*.
	.**..
	.....
	.....
	.....
	.....

[display_glyph usb]
hd44780_slot = 6
hd44780_data = 
	.***.
	.***.
	.***.
	*****
	*****
	*****
	..*..
	..*..

[display_glyph sd]
hd44780_slot = 6
hd44780_data = 
	.....
	..***
	.****
	*****
	*****
	*****
	*****
	.....

[delayed_gcode setdisplayneopixel]
initial_duration = 1
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro red]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro orange]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro green]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro blue]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro white]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro yellow]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro purple]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[stepper_x]
step_pin = PE11
dir_pin = !PE10
enable_pin = !PE9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 300
position_max = 300
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PE7
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
interpolate = True
diag0_pin = ^!PB14
run_current = 1
driver_sgt = 1

[stepper_y]
step_pin = PD8
dir_pin = !PB12
enable_pin = !PD9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 310
position_max = 310
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PE15
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
diag0_pin = ^!PB13
interpolate = True
run_current = 1
driver_sgt = 1

[stepper_z]
step_pin = PE6
dir_pin = PC13
enable_pin = !PE5
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 240
position_min = -5
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 0.0

[tmc2209 stepper_z]
uart_pin = PC14
uart_address = 0
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z1]
step_pin = PE2
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z1]
uart_pin = PC15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z2]
step_pin = PD12
dir_pin = PC4
enable_pin = !PE8
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z2]
uart_pin = PA15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[tmc2209 extruder]
uart_pin = sht36:PB5
interpolate = false
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[gcode_arcs]
resolution = 1.0

[output_pin LIGHTS]
pin = PC8
pwm = true
shutdown_value = 0
value = 1
cycle_time = 0.01

[gcode_macro LIGHTS_ON]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.6

[gcode_macro LIGHTS_ON_20]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.20

[gcode_macro LIGHTS_OFF]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.0

[neopixel sb_leds]
pin = sht36:PB0
chain_count = 3
color_order = GRBW
initial_red = 0.0
initial_green = 0.0
initial_blue = 0.0
initial_white = 0.0

[gcode_macro _sb_vars]
variable_colors = {
	'logo': {
	'busy': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cleaning': {'r': 0.0, 'g': 0.02, 'b': 0.5, 'w': 0.0},
	'calibrating_z': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	'heating': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'homing': {'r': 0.0, 'g': 0.6, 'b': 0.2, 'w': 0.0},
	'leveling': {'r': 0.5, 'g': 0.1, 'b': 0.4, 'w': 0.0},
	'meshing': {'r': 0.2, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'printing': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'standby': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'red': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'orange': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'green': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'blue': {'r': 0.0, 'g': 0.0, 'b': 0.5, 'w': 0.0},
	'white': {'r': 1.0, 'g': 1.0, 'b': 1.0, 'w': 0.0},
	'yellow': {'r': 0.4, 'g': 0.4, 'b': 0.0, 'w': 0.0},
	'purple': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	},
	'nozzle': {
	'heating': {'r': 0.8, 'g': 0.35, 'b': 0.0, 'w':0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'on': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':1.0},
	'standby': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':0.8},
	},
	'thermal': {
	'hot': {'r': 1.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cold': {'r': 0.3, 'g': 0.0, 'b': 0.3, 'w': 0.0}
	}
	}
variable_logo_led_name = "sb_leds"
variable_logo_idx = "3"
variable_nozzle_led_name = "sb_leds"
variable_nozzle_idx = "1,2"
gcode = 

[gcode_macro _set_sb_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = params.LED|string %}
	{% set idx = (params.IDX|string).split(',') %}
	{% set transmit_last = params.TRANSMIT|default(1) %}
	
	{% for led_index in idx %}
	{% set transmit=transmit_last if loop.last else 0 %}
	set_led led={led} red={red} green={green} blue={blue} white={white} index={led_index} transmit={transmit}
	{% endfor %}

[gcode_macro _set_sb_leds_by_name]
gcode = 
	{% set leds_name = params.LEDS %}
	{% set color_name = params.COLOR %}
	{% set color = printer["gcode_macro _sb_vars"].colors[leds_name][color_name] %}
	{% set led = printer["gcode_macro _sb_vars"][leds_name + "_led_name"] %}
	{% set idx = printer["gcode_macro _sb_vars"][leds_name + "_idx"] %}
	{% set transmit = params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={color.r} green={color.g} blue={color.b} white={color.w} idx="{idx}" transmit={transmit}

[gcode_macro _set_logo_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].logo_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].logo_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro _set_nozzle_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].nozzle_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].nozzle_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro set_logo_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_logo_leds red=0 blue=0 green=0 white=0 transmit={transmit}

[gcode_macro set_nozzle_leds_on]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="on" transmit={transmit}

[gcode_macro set_nozzle_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="off" transmit={transmit}

[gcode_macro status_off]
gcode = 
	set_logo_leds_off transmit=0
	set_nozzle_leds_off

[gcode_macro status_ready]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="standby" transmit=1

[gcode_macro status_busy]
gcode = 
	_set_sb_leds_by_name leds="logo" color="busy" transmit=0
	set_nozzle_leds_on

[gcode_macro status_heating]
gcode = 
	_set_sb_leds_by_name leds="logo" color="heating" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="heating" transmit=1

[gcode_macro status_leveling]
gcode = 
	_set_sb_leds_by_name leds="logo" color="leveling" transmit=0
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="homing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	_set_sb_leds_by_name leds="logo" color="cleaning" transmit=0
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="meshing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	_set_sb_leds_by_name leds="logo" color="calibrating_z" transmit=0
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="printing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_orange]
gcode = 
	_set_sb_leds_by_name leds="logo" color="orange" transmit=0
	set_nozzle_leds_on

[gcode_macro status_red]
gcode = 
	_set_sb_leds_by_name leds="logo" color="red" transmit=0
	set_nozzle_leds_on

[gcode_macro status_purple]
gcode = 
	_set_sb_leds_by_name leds="logo" color="purple" transmit=0
	set_nozzle_leds_on

[gcode_macro status_green]
gcode = 
	_set_sb_leds_by_name leds="logo" color="green" transmit=0
	set_nozzle_leds_on

[gcode_macro status_white]
gcode = 
	_set_sb_leds_by_name leds="logo" color="white" transmit=0
	set_nozzle_leds_on

[gcode_macro status_yellow]
gcode = 
	_set_sb_leds_by_name leds="logo" color="yellow" transmit=0
	set_nozzle_leds_on

[gcode_macro status_blue]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	set_nozzle_leds_on

[delayed_gcode set_sb_leds_on_boot]
initial_duration = 1
gcode = 
	flicker
	status_ready

[gcode_macro flicker]
gcode = 
	{% set LEDTimes = [10, 20, 20, 240, 20, 40, 20, 100, 20, 20, 20, 260, 80, 20, 240, 60, 160, 20, 240, 20, 1000, 20, 20, 40, 100, 20, 274, 340, 860, 20, 1400, 20, 60, 20] %}
	{% set RGB_Red = 0.2 %}
	{% set RGB_Green = 0.2 %}
	{% set RGB_Blue = 0.2 %}
	{% set RGB_Strip = "sb_leds" %}
	{% set RGB_Strip1 = "mini12864" %}
	
	{% for toggletime in LEDTimes %}
	{% set ledTime = toggletime|string %}
	{% set loopCount = loop.index %}
	
	{% if loopCount is divisibleby 2 %}
	SET_LED LED={RGB_Strip} RED={RGB_Red} GREEN={RGB_Green} BLUE={RGB_Blue}
	G4 P{ledTime|int}
	{% else %}
	SET_LED LED={RGB_Strip}
	G4 P{ledTime|int}
	{% endif %}
	
	{% endfor %}
	
	{% for i in range(1,9) %}
	SET_LED LED={RGB_Strip} RED={RGB_Red+(i/10)} GREEN={RGB_Green+(i/10)}  BLUE={RGB_Blue+(i/10)} INDEX=1
	G4 P200
	{% endfor %}

[beacon]
serial = /dev/serial/by-id/usb-Beacon_Beacon_RevD_63E3DDD04E4B333448202020FF0A3315-if00
x_offset = 0
y_offset = -24
mesh_main_direction = x
mesh_runs = 2
home_xy_position = 117.5, 117.5
home_z_hop = 5
home_z_hop_speed = 30
home_xy_move_speed = 300
home_method = contact|proximity
home_method_when_homed = contact|proximity
home_autocalibrate = always|unhomed|never

[bed_mesh]
speed = 150
horizontal_move_z = 10
mesh_min = 10,10
mesh_max = 290,240
probe_count = 15,15
algorithm = bicubic
fade_start = 1
fade_end = 5
fade_target = 0

[z_tilt]
speed = 500
horizontal_move_z = 10
retries = 5
retry_tolerance = 0.004
z_positions = 
	-50, 18
	150, 348
	350, 18
points = 
	30, 5
	150, 245
	270, 5

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% if display_parameters == True %}
	{ action_respond_info("led_enable  : %d" % (led_enable))  }
	{ action_respond_info("status_macro: \'%s\'" % (status_macro))  }
	{ action_respond_info("fuzz_enable : %d" % (fuzz_enable))  }
	{ action_respond_info("fuzz_min    : %f" % (fuzz_min))  }
	{ action_respond_info("fuzz_max    : %f" % (fuzz_max))  }
	{ action_respond_info("probe_dock_enable: %d" % (probe_dock_enable))  }
	{ action_respond_info("attach_macro: \'%s\'" % (attach_macro))  }
	{ action_respond_info("detach_macro: \'%s\'" % (detach_macro))  }
	{% endif %}
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% if margin_enable == False %}
	{% set margin_size = 0 %}
	{% endif %}
	
	{ action_respond_info("{} object points, clamping to bed mesh [{!r} {!r}]".format(
	all_points | count,
	bed_mesh_min,
	bed_mesh_max,
	)) }
	
	{% if fuzz_enable == True %}
	{% set fuzz_range = range((fuzz_min * 100) | int, (fuzz_max * 100) | int + 1) %}
	{% set x_min = (bed_mesh_min[0] + fuzz_max - margin_size, x_min) | max - (fuzz_range | random / 100.0) %}
	{% set y_min = (bed_mesh_min[1] + fuzz_max - margin_size, y_min) | max - (fuzz_range | random / 100.0) %}
	{% set x_max = (bed_mesh_max[0] - fuzz_max + margin_size, x_max) | min + (fuzz_range | random / 100.0) %}
	{% set y_max = (bed_mesh_max[1] - fuzz_max + margin_size, y_max) | min + (fuzz_range | random / 100.0) %}
	{% else %}
	{% set x_min = [ bed_mesh_min[0], x_min - margin_size ] | max %}
	{% set y_min = [ bed_mesh_min[1], y_min - margin_size ] | max %}
	{% set x_max = [ bed_mesh_max[0], x_max + margin_size ] | min %}
	{% set y_max = [ bed_mesh_max[1], y_max + margin_size ] | min %}
	{% endif %}
	
	{ action_respond_info("Object bounds, clamped to the bed_mesh: {!r}, {!r}".format(
	(x_min, y_min),
	(x_max, y_max),
	)) }
	
	{% set points_x = (((x_max - x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((y_max - y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	{ action_respond_info( "Algorithm: {}".format(algorithm)) }
	
	{% set points_x = [points_x, min_points]|max  %}
	{% set points_y = [points_y, min_points]|max  %}
	{ action_respond_info( "Points: x: {}, y: {}".format(points_x, points_y) ) }
	
	{% if printer.configfile.settings.bed_mesh.relative_reference_index is defined %}
	{% set ref_index = (points_x * points_y / 2) | int %}
	{ action_respond_info( "Reference index: {}".format(ref_index) ) }
	{% else %}
	{% set ref_index = -1 %}
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	{% if led_enable == True %}
	{status_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={x_min},{y_min} mesh_max={x_max},{y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y} RELATIVE_REFERENCE_INDEX={ref_index}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}
variable_led_enable = False
variable_status_macro = 'status_meshing'
variable_fuzz_enable = False
variable_fuzz_min = 0
variable_fuzz_max = 4
variable_margin_enable = False
variable_margin_size = 5
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_display_parameters = True

[gcode_macro Z_TILT_ADJUST]
rename_existing = _Z_TILT_ADJUST
gcode = 
	{ action_respond_info("Z Tilt Adjust") }
	
	_Z_TILT_ADJUST {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	G28 Z0

[gcode_macro z_tilt_scan]
gcode = 
	z_tilt_adjust RETRY_TOLERANCE=1
	z_tilt_adjust HORIZONTAL_MOVE_Z=2

[gcode_macro MACROS_VARS]
variable_circ_fan_speed = 255
variable_probe_temp = 150
variable_starting_wled = 2
variable_heating_wled = 4
variable_ending_wled = 3
variable_ending_length = 25
variable_purge_length = 40
variable_filament_swap_length = 0.8
variable_pla_pa = 0.00525
variable_pet_pa = 0.00650
variable_abs_pa = 0.00460
variable_pet_za = 0.010
variable_move_away_home = 0
variable_homing_retract = 20
gcode = 

[gcode_macro MATERIAL_PA]
gcode = 
	{% set MATERIAL = params.MATERIAL|default("XXX")|string %}
	{% set TEXT ="Setting PA for " + MATERIAL %}
	{% set PLA = printer["gcode_macro MACROS_VARS"].pla_pa|default(0)%}
	{% set PET = printer["gcode_macro MACROS_VARS"].pet_pa|default(0)%}
	{% set ABS = printer["gcode_macro MACROS_VARS"].abs_pa|default(0)%}
	{% set PETZ = printer["gcode_macro MACROS_VARS"].pet_za|default(0)%}
	{% if MATERIAL == "PLA" %}
	SET_PRESSURE_ADVANCE ADVANCE={PLA}
	{% elif MATERIAL == "PET" %}
	SET_PRESSURE_ADVANCE ADVANCE={PET}
	SET_GCODE_OFFSET Z_ADJUST={PETZ} MOVE=1
	{% elif MATERIAL == "ABS" %}
	SET_PRESSURE_ADVANCE ADVANCE={ABS}
	{% else %}
	{% set TEXT ="No PA value for " + MATERIAL %}
	{% endif %}
	DISPLAYTEXT TEXT="{TEXT}"

[gcode_macro PURGE_LINE]
gcode = 
	DISPLAYTEXT TEXT="Prime Line"
	G1 X75 E25 F1000
	G92 E0;
	G90
	G0 X75 Y4 F6000
	G1 Z0.2 F200
	G91
	G1 X150 E30 F1200;
	G1 Y1
	G1 X-150 E30 F1200;
	G92 E0.0
	G1 Z1 F5000

[gcode_macro PRINT_START]
gcode = 
	{% set BED_TEMP = params.BED_TEMP|default(110)|float %}
	{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(250)|float %}
	{% set ENCLOSURE_TEMP = params.ENCLOSURE_TEMP|default(45)|int %}
	{% set PROBE_TEMP = printer["gcode_macro MACROS_VARS"].probe_temp|default(0)%}
	
	SET_TEMP HEATER="bed" TEMP={BED_TEMP}
	SET_TEMP HEATER="extruder" TEMP={PROBE_TEMP} WAIT=1
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	DISPLAYTEXT TEXT="Homing"
	G28
	{% endif %}
	DISPLAYTEXT TEXT="Heating Bed"
	SET_TEMP HEATER="bed" TEMP={BED_TEMP} WAIT=1
	
	{% if not printer.z_tilt.applied %}
	DISPLAYTEXT TEXT="Z tilt thingy"
	Z_TILT_ADJUST
	{% endif %}
	MATERIAL_PA MATERIAL={FILAMENT}
	DISPLAYTEXT TEXT="Heating Extruder"
	SET_TEMP HEATER="extruder" TEMP={EXTRUDER_TEMP} WAIT=1
	
	BED_MESH_CALIBRATE
	SET_FAN_SPEED FAN=rebreather SPEED=1
	SET_FAN_SPEED FAN=stepper_fans SPEED=0.25
	MATERIAL_PA MATERIAL={FILAMENT}
	G4 P1000
	PURGE_LINE
	
	
	DISPLAYTEXT TEXT="Printing..."

[gcode_macro G32]
gcode = 
	BED_MESH_CLEAR
	G28
	Z_TILT_ADJUST
	G28
	G0 X75 Y75 Z30 F3600

[gcode_macro PRINT_END]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	{% set FILAMENT = params.FILAMENT|default(PLA) %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	M400
	G92 E0
	G1 E-25.0 F1800
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	TURN_OFF_HEATERS
	M107
	G1 Z2 F3000
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	
	{% if FILAMENT == 'ABS' or params.FILAMENT == 'ASA' %}
	NEVERMORE_END_PRINT
	{% endif %}
	
	DISPLAYTEXT TEXT="Print Complete"

[gcode_macro SET_TEMP]
gcode = 
	{% set HEATER = params.HEATER|default("")|string %}
	{% set TEMP = params.TEMP|default(0)|int %}
	{% set WAIT = params.WAIT|default(0)|int %}
	
	{% if HEATER == "extruder" %}
	{% if WAIT == 1 %}
	M109 S{TEMP}
	{% else %}
	M104 S{TEMP}
	{% endif %}
	{% else %}
	{% if WAIT == 1 %}
	M190 S{TEMP}
	{% else %}
	M140 S{TEMP}
	{% endif %}
	{% endif %}

[gcode_macro ENDING_RETRACTION]
gcode = 
	{% set RETRACT = printer["gcode_macro MACROS_VARS"].ending_length|default(0)%}
	G1 E{RETRACT*-1} F1800

[gcode_macro PARK_AT_PRINT_END]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600

[gcode_macro Homing_Variables]
variable_move_away_home = 0
variable_x_homing_pos = 150
variable_y_homing_pos = 150
variable_homing_current = 0.8
variable_homing_retract_x = 150
variable_homing_retract_y = 20
variable_homing_retract_speed = 5000
variable_z_end_pos = 30
variable_is_sensorless = True
variable_display_parameters = True
gcode = 

[gcode_macro DISPLAY_PARAMETERS]
gcode = 
	{% set DISPLAY_PARAMS = printer["gcode_macro Homing_Variables"].display_parameters %}
	{% set is_sensorless = printer["gcode_macro Homing_Variables"].is_sensorless %}
	{% set x_homing_pos = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set y_homing_pos = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	{% set homing_current = printer["gcode_macro Homing_Variables"].homing_current %}
	{% set homing_retract_x = printer["gcode_macro Homing_Variables"].homing_retract_x %}
	{% set homing_retract_y = printer["gcode_macro Homing_Variables"].homing_retract_y %}
	{% set homing_retract_speed = printer["gcode_macro Homing_Variables"].homing_retract_speed %}
	{% set z_end_pos = printer["gcode_macro Homing_Variables"].z_end_pos %}
	
	{% if DISPLAY_PARAMS == True %}
	{ action_respond_info("is_sensorless  : %d" % (is_sensorless))  }
	{ action_respond_info("x_homing_pos  : %d" % (x_homing_pos))  }
	{ action_respond_info("y_homing_pos  : %d" % (y_homing_pos))  }
	{ action_respond_info("homing_current  : %d" % (homing_current))  }
	{ action_respond_info("homing_retract_x  : %d" % (homing_retract_x))  }
	{ action_respond_info("homing_retract_y  : %d" % (homing_retract_y))  }
	{ action_respond_info("homing_retract_speed  : %d" % (homing_retract_speed))  }
	{ action_respond_info("z_end_pos  : %d" % (z_end_pos))  }
	{% endif %}

[gcode_macro MOVE_AWAY_BEFORE_HOMING]
gcode = 
	{% set MAH = printer["gcode_macro Homing_Variables"].move_away_home|default(0)%}
	{% set PARAMS = params.PARAMS|default("")|string %}
	
	{% set home_all = 'X' not in PARAMS and 'Y' not in PARAMS and 'Z' not in PARAMS %}
	
	
	{% if home_all or 'X' in PARAMS %}
	G1 X-{MAH/2}  F6000
	{% endif %}
	
	{% if home_all or 'Y' in PARAMS %}
	G1  Y-{MAH/2} F6000
	{% endif %}
	
	{% if home_all or 'Z' in PARAMS %}
	G1 Z{MAH} F100
	{% endif %}

[gcode_macro _HOME_X]
gcode = 
	DISPLAYTEXT TEXT="Homing X Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_x|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION X=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="X"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 X
	
	G91
	G1 X-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Y]
gcode = 
	DISPLAYTEXT TEXT="Homing Y Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_y|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION Y=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="Y"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 Y
	
	G91
	G1 Y-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Z]
gcode = 
	{% set Ez = printer["gcode_macro Homing_Variables"].z_end_pos %}
	{% set Hx = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set Hy = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	
	DISPLAYTEXT TEXT="Homing Z Axis"
	
	G1 X{Hx} Y{Hy} F15000
	G28 Z
	G1 Z{Ez}

[gcode_macro ABSOLUTE_COORDINATES]
gcode = 
	G90

[gcode_macro RELATIVE_COORDINATES]
gcode = 
	G91

[gcode_macro DISPLAYTEXT]
gcode = 
	{% set TEXT = params.TEXT|default("")|string %}
	RESPOND MSG="{TEXT}"
	SET_DISPLAY_TEXT MSG="{TEXT}"

[gcode_macro DISPLAY_PROGRESS]
gcode = 
	{% set TOTAL_LAYERS = params.TOTAL_LAYERS|default("")|string %}
	{% set CURRENT_LAYER = params.CURRENT_LAYER|default("")|string %}
	RESPOND MSG="Total layers {TOTAL_LAYERS}, current layer {CURRENT_LAYER}"

[gcode_macro TEMPERATURE_WAIT]
rename_existing = _TEMPERATURE_WAIT
gcode = 
	{% set SENSOR = params.SENSOR|default("")|string %}
	{% set MINIMUM = params.MINIMUM|int %}
	{% set MSG = "Enclosure temperature has reached " + MINIMUM |string %}
	
	DISPLAYTEXT TEXT="Heatsoaking..."
	_TEMPERATURE_WAIT SENSOR="{SENSOR}" MINIMUM={MINIMUM}
	DISPLAYTEXT TEXT="{MSG}"

[gcode_macro WAIT]
gcode = 
	{% set TIME = params.TIME|default(0)|int %}
	G4 P{TIME*1000}

[gcode_macro CHOME]
gcode = 
	{% if printer.toolhead.homed_axes != "xyz" %}
	DISPLAYTEXT TEXT="Homing.."
	G28
	{% endif %}

[gcode_macro RESET_EXTRUDER]
gcode = 
	G92 E0

[gcode_macro PARK_TOOLHEAD]
gcode = 
	{% set th = printer.toolhead %}
	ABSOLUTE_COORDINATES
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y//2} F15000

[gcode_macro DUMP_VARIABLES]
gcode = 
	{% set filter_name = params.NAME|default('')|string|lower %}
	{% set filter_value = params.VALUE|default('')|string|lower %}
	{% set show_cfg = params.SHOW_CFG|default(0)|int %}
	
	{% set out = [] %}
	
	{% for key1 in printer %}
	{% for key2 in printer[key1] %}
	{% if (show_cfg or not (key1|lower == 'configfile' and key2|lower in ['config', 'settings'])) and (filter_name in key1|lower or filter_name in key2|lower) and filter_value in printer[key1][key2]|string|lower %}
	{% set dummy = out.append("printer['%s'].%s = %s" % (key1, key2, printer[key1][key2])) %}
	{% endif %}
	{% else %}
	{% if filter_name in key1|lower and filter_value in printer[key1]|string|lower %}
	{% set dummy = out.append("printer['%s'] = %s" % (key1, printer[key1])) %}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	{action_respond_info(out|join("\n"))}

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=UNLOAD_FILAMENT_state
	
	M82
	G92 E0
	G1 E2 F3600
	G1 E0 F3600
	G1 E3 F3600
	G1 E0 F3600
	G1 E4 F3600
	G1 E0 F3600
	
	M83
	G1 E-20 F3600
	G4 P3000
	G1 E{DISTANCE|float * -1} F3000
	RESTORE_GCODE_STATE NAME=UNLOAD_FILAMENT_state

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=LOAD_FILAMENT_state
	
	M83
	G92 E0
	G1 E{DISTANCE|float} F200
	
	
	
	
	G1 E50 F150
	
	
	G92 E0
	RESTORE_GCODE_STATE NAME=LOAD_FILAMENT_state

[gcode_macro PID_HOTEND]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro PID_BED]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=80

[gcode_macro Z_ENDSTOP]
gcode = 
	Z_ENDSTOP_CALIBRATE

[gcode_macro PROBE_CAL]
gcode = 
	
	G28
	PROBE_CALIBRATE

[gcode_macro IS_CAL]
gcode = 
	
	G28
	SHAPER_CALIBRATE

[gcode_macro SPEEDTEST]
gcode = 
	
	
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest_state
	
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{maxX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{maxX} Y{minY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest_state

[gcode_macro SPEEDTEST2]
gcode = 
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest2_state
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest2_state

[gcode_macro PRESSURE_ADVANCE_CALIBRATION]
description = Calibrate the pressure advance by printing a grid pattern
gcode = 
	
	
	
	{% set pa_start     = params.START|default(0.02)|float %}
	{% set pa_increment = params.INCREMENT|default(0.005)|float %}
	
	{% set do_raft = params.RAFT|default(1)|int %}
	
	{% set print_size      = params.SIZE|default(120)|int %}
	{% set num_bands       = params.BANDS_LIMIT|default(999)|int %}
	{% set lines_per_band  = params.LINES_PER_BAND|default(6)|int %}
	{% set e_multiplier    = params.EXTRUSION_MULTIPLIER|default(1.25 if do_raft == 1 else 1.5)|float %},
	{% set retract_length  = params.RETRACT|default(0.6)|float %}
	{% set initial_purge   = params.PURGE_MM|default(8)|int %}
	
	{% set feedrate_control = params.CONTROL_SPEED|default(30)|int * 60 %}
	{% set feedrate_outer   = params.OUTER_SPEED|default(40)|int * 60 %}
	{% set feedrate_inner   = params.INNER_SPEED|default(120)|int * 60 %}
	{% set feedrate_travel  = params.TRAVEL_SPEED|default(200)|int * 60 %}
	{% set feedrate_raft    = params.RAFT_SPEED|default(120)|int * 60 %}
	{% set feedrate_z       = 5 * 60 %}
	{% set feedrate_retract = 50 * 60 %}
	
	{% set spacing_line  = params.LINE_SPACING|default(0.4)|float %}
	{% set spacing_band  = 2 %}
	{% set spacing_raft  = 2 %}
	
	{% set fast_line_ratio_percent = 50 %}
	
	{% set lines_per_band    = [2, lines_per_band]|max %}
	{% set e_multiplier      = [1, e_multiplier]|max %}
	{% set num_lines_control = (lines_per_band / 2)|round(0, 'floor')|int %}
	{% set num_lines_test    = (lines_per_band / 2)|round(0, 'ceil')|int %}
	{% set spacing_line      = spacing_line * (1 + e_multiplier - 1.25) %}
	
	{% set max_x = printer.toolhead.axis_maximum.x|float %}
	{% set max_y = printer.toolhead.axis_maximum.y|float %}
	{% set nozzle_diameter = printer.configfile.config['extruder'].nozzle_diameter|float %}
	{% set line_width    = nozzle_diameter * 1.25 %}
	{% set line_height   = nozzle_diameter / 2 %}
	{% set z_hop_height  = 2 * line_height %}
	{% set e_per_mm      = (line_width * line_height) / (3.1415 * (1.75/2)**2) %}
	{% set spacing_purge = line_height * 0.8 %}
	
	{% set spacing_raft   = (spacing_raft / line_width)|round * line_width %}
	{% set num_raft_lines = ([print_size, max_x]|min / spacing_raft)|round(0, 'floor')|int %}
	{% set print_width    = num_raft_lines * spacing_raft %}
	
	{% set band_height      = lines_per_band * line_width + (lines_per_band - 1) * spacing_line + spacing_band %}
	{% set bands_per_height = (([print_size, max_y]|min  - spacing_purge) / band_height)|round(0, 'floor')|int %}
	{% set num_bands        = [num_bands, bands_per_height]|min %}
	{% set print_height     = num_bands * band_height - spacing_band - spacing_purge %}
	
	{% set slow_line_length = ((print_width * (1 - fast_line_ratio_percent / 100) / 2) / spacing_raft)|round * spacing_raft + spacing_raft / 2 %}
	{% set fast_line_length = print_width - slow_line_length * 2 %}
	{% set thick_raft_num1 = (slow_line_length / spacing_raft)|round|int %}
	{% set thick_raft_num2  = num_raft_lines - thick_raft_num1 + 1 %}
	
	{% set x_start = max_x / 2 - print_width  / 2 %}
	{% set y_start = max_y / 2 - print_height / 2 %}
	
	{action_respond_info("")}
	{action_respond_info("Starting Pressure Advance calibration print.")}
	{action_respond_info("")}
	{action_respond_info("This operation can not be interrupted by normal means. Hit the \"emergency stop\" button once the print starts exhibiting PA values that are obviously too high.")}
	{action_respond_info("")}
	{action_respond_info("PA of first band: %.4f" % pa_start)}
	{action_respond_info("PA of last band: %.4f" % (num_bands * pa_increment))}
	{action_respond_info("PA increment per band: %.4f" % pa_increment)}
	{action_respond_info("Number of bands: %d" % num_bands)}
	{action_respond_info("")}
	{action_respond_info("Inspect the printed model. "
	"Look at the top and bottom lines in each band, on the right side of the two vertical raft bars (where the print speeds change). "
	"Find the highest band from the bottom where the lines at its top still resemble the lines at its bottom, with no visible extrusion width irregularities. "
	"Your final Pressure Advance value would then be:"
	)}
	{action_respond_info("")}
	{action_respond_info("PA = %.4f + (%.4f * band_number)" % (pa_start, pa_increment))}
	{action_respond_info("")}
	{action_respond_info("Update your [extruder] config section and set \"pressure_advance\" to the value you calculated.")}
	{action_respond_info("")}
	
	
	
	
	
	
	
	
	
	SAVE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION
	{% set pa_saved = printer.configfile.settings['extruder'].pressure_advance %}
	SET_PRESSURE_ADVANCE ADVANCE={pa_start}
	
	
	
	
	M117 Priming
	G90
	G0 X{x_start} Y{y_start} Z{line_height} F{feedrate_travel}
	G91
	G1 E{initial_purge} F{5 * 60}
	G1 X{print_width}  E{print_width * e_per_mm} F{feedrate_raft / 2}
	G1 Y{line_width}   E{line_width * e_per_mm}  F{feedrate_raft / 2}
	G1 X-{print_width} E{print_width * e_per_mm} F{feedrate_raft / 2}
	
	
	
	
	{% if do_raft == 1 %}
	G0 F{feedrate_raft}
	
	{% for curr_raft_line in range(1, num_raft_lines + 2) %}
	
	{% if curr_raft_line == thick_raft_num1 or curr_raft_line == thick_raft_num2 %}
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	G1 Y{loop.cycle(-1.0, 1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	{% endif %}
	
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	
	
	{% if not loop.last %}
	{% set horizontal_move = spacing_raft - (2 * line_width if curr_raft_line == thick_raft_num1 - 1 or curr_raft_line == thick_raft_num2 - 1 else 0) %}
	G1 X{horizontal_move} E{horizontal_move * e_per_mm}
	{% endif %}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	{% endif %}
	
	
	
	
	M117 Printing bands
	G90
	G0 X{x_start} Y{y_start + 2 * line_width + spacing_purge} F{feedrate_travel}
	G0 Z{line_height + (line_height if do_raft == 1 else 0)} F{feedrate_z}
	G91
	G1 E{retract_length} F{feedrate_retract}
	
	
	{% for curr_band_num in range(1, num_bands + 1) %}
	{% set outer_loop = loop %}
	
	{% set curr_pa_value = pa_start + (curr_band_num - 1) * pa_increment %}
	SET_PRESSURE_ADVANCE ADVANCE={curr_pa_value}
	M117 Band {curr_band_num} PA {curr_pa_value|round(4)}
	
	
	{% for _ in range(num_lines_control) %}
	G1 X{print_width} E{print_width * e_per_mm * e_multiplier} F{feedrate_control}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	G0 X-{print_width} Y{spacing_line + line_width} F{feedrate_travel}
	
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endfor %}
	
	
	{% for _ in range(num_lines_test) %}
	{% for data in [{'mm': slow_line_length, 'f': feedrate_outer}, {'mm': fast_line_length, 'f': feedrate_inner}, {'mm': slow_line_length, 'f': feedrate_outer}] %}
	G1 X{data.mm} E{data.mm * e_per_mm * e_multiplier} F{data.f}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	{% if not (outer_loop.last and loop.last) %}
	G0 X-{print_width} Y{(spacing_line if not loop.last else spacing_band) + line_width} F{feedrate_travel}
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	
	
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z20 F{feedrate_z}
	G0 X-{print_width / 2} Y{[50, max_y - (y_start + print_height)]|min} F{feedrate_travel}
	
	M117
	SET_PRESSURE_ADVANCE ADVANCE={pa_saved}
	RESTORE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION

[gcode_macro TEST_SPEED]
gcode = 
	
	{% set speed  = params.SPEED|default(printer.configfile.settings.printer.max_velocity)|int %}
	
	{% set iterations = params.ITERATIONS|default(5)|int %}
	
	{% set accel  = params.ACCEL|default(printer.configfile.settings.printer.max_accel)|int %}
	
	{% set bound = params.BOUND|default(20)|int %}
	
	{% set smallpatternsize = SMALLPATTERNSIZE|default(20)|int %}
	
	
	
	{% set x_min = printer.toolhead.axis_minimum.x + bound %}
	{% set x_max = printer.toolhead.axis_maximum.x - bound %}
	{% set y_min = printer.toolhead.axis_minimum.y + bound %}
	{% set y_max = printer.toolhead.axis_maximum.y - bound %}
	
	
	
	{% set x_center = (printer.toolhead.axis_minimum.x|float + printer.toolhead.axis_maximum.x|float ) / 2 %}
	{% set y_center = (printer.toolhead.axis_minimum.y|float + printer.toolhead.axis_maximum.y|float ) / 2 %}
	
	
	{% set x_center_min = x_center - (smallpatternsize/2) %}
	{% set x_center_max = x_center + (smallpatternsize/2) %}
	{% set y_center_min = y_center - (smallpatternsize/2) %}
	{% set y_center_max = y_center + (smallpatternsize/2) %}
	
	
	SAVE_GCODE_STATE NAME=TEST_SPEED
	
	
	{ action_respond_info("TEST_SPEED: x_min %d, y_min %d, x_max %d, y_max %d" % (x_min, y_min, x_max, y_max)) }
	{ action_respond_info("TEST_SPEED: starting %d iterations at speed %d, accel %d" % (iterations, speed, accel)) }
	
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	G28 X Y
	{% endif %}
	
	
	
	
	
	
	
	
	
	
	
	
	G4 P1000
	GET_POSITION
	
	
	G0 X{x_min} Y{y_min} Z{bound + 10} F{speed*60}
	
	
	SET_VELOCITY_LIMIT VELOCITY={speed} ACCEL={accel} ACCEL_TO_DECEL={accel / 2}
	
	{% for i in range(iterations) %}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	{% endfor %}
	
	
	SET_VELOCITY_LIMIT VELOCITY={printer.configfile.settings.printer.max_velocity} ACCEL={printer.configfile.settings.printer.max_accel} ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel}
	
	
	G28 X Y
	
	
	
	G4 P1000
	GET_POSITION
	
	
	RESTORE_GCODE_STATE NAME=TEST_SPEED

[gcode_macro SETUP_KAMP_MESHING]
gcode = 
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=display_parameters   VALUE={params.DISPLAY_PARAMETERS|default(True)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=led_enable   VALUE={params.LED_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=status_macro VALUE='"{params.STATUS_MACRO|default('status_meshing')|string}"'
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_enable VALUE={params.FUZZ_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_min    VALUE={params.FUZZ_MIN|default(0)|float}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_max    VALUE={params.FUZZ_MAX|default(4)|float}
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=probe_dock_enable  VALUE={params.PROBE_DOCK_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=attach_macro VALUE='"{params.ATTACH_MACRO|default('Attach_Probe')|string}"'
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=detach_macro VALUE='"{params.DETACH_MACRO|default('Dock_Probe')|string}"'

[input_shaper]
shaper_freq_x = 86.8
shaper_type_x = zv
shaper_freq_y = 62.2
shaper_type_y = zv

[probe]
z_offset = -0.0400

[beacon model default]
model_coef = 1.409155451498927,
	1.7229833219997472,
	0.7624260199879447,
	0.3933310021549746,
	0.3504714980336664,
	0.3215136667184013,
	-0.12014580629124338,
	-0.22419779942999016,
	0.19713656245482147,
	0.188750402116144
model_domain = 3.120873231931901e-07,3.332026812812074e-07
model_range = 0.200000,5.000000
model_temp = 23.909578
model_offset = 0.02500

[bed_mesh default]
version = 1
points = 
	-0.062140, -0.036984, -0.007379, 0.031314, 0.058627, 0.084848, 0.107257, 0.111945, 0.135207, 0.152355, 0.170171
	-0.128044, -0.093273, -0.053917, -0.019434, 0.015362, 0.051030, 0.076081, 0.091292, 0.113629, 0.133648, 0.155842
	-0.171323, -0.136118, -0.096393, -0.057201, -0.010727, 0.024397, 0.048697, 0.072530, 0.099236, 0.126818, 0.150713
	-0.201543, -0.161727, -0.119034, -0.066854, -0.018463, 0.014217, 0.047420, 0.076211, 0.103883, 0.134441, 0.171920
	-0.229879, -0.188570, -0.139992, -0.085341, -0.040984, 0.002604, 0.042138, 0.073877, 0.104620, 0.133705, 0.171879
	-0.263766, -0.213518, -0.162008, -0.108459, -0.058518, -0.007646, 0.032310, 0.069869, 0.102956, 0.138912, 0.180918
	-0.296565, -0.242362, -0.188285, -0.127789, -0.071974, -0.019641, 0.027806, 0.070759, 0.105252, 0.142100, 0.184275
	-0.296242, -0.233747, -0.171416, -0.107834, -0.048348, 0.004540, 0.056827, 0.100566, 0.141602, 0.182628, 0.230079
	-0.281192, -0.228380, -0.164876, -0.101596, -0.030960, 0.023575, 0.079761, 0.121563, 0.171967, 0.216584, 0.265930
	-0.307454, -0.252371, -0.190633, -0.113183, -0.041936, 0.019598, 0.074971, 0.120663, 0.178367, 0.230549, 0.282552
	-0.324293, -0.258430, -0.193413, -0.119856, -0.045648, 0.021113, 0.080729, 0.133249, 0.192194, 0.246004, 0.297448
x_count = 11
y_count = 11
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 59.444
max_x = 240.556
min_y = 75.541944
max_y = 224.458048
=======================
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 141, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/pi/klipper/klippy/klippy.py", line 130, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/pi/klipper/klippy/extras/beacon.py", line 3532, in load_config
    beacon = BeaconProbe(config)
  File "/home/pi/klipper/klippy/extras/beacon.py", line 99, in __init__
    self.homing_helper = BeaconHomingHelper.create(self, config)
  File "/home/pi/klipper/klippy/extras/beacon.py", line 2240, in create
    return BeaconHomingHelper(beacon, config, home_xy_position)
  File "/home/pi/klipper/klippy/extras/beacon.py", line 2255, in __init__
    self.method = config.getchoice(
  File "/home/pi/klipper/klippy/configfile.py", line 77, in getchoice
    raise error("Choice '%s' for option '%s' in section '%s'"
configparser.Error: Choice 'contact|proximity' for option 'home_method' in section 'beacon' is not a valid choice
webhooks client 547899376256: New connection
webhooks client 547899376256: Client info {'program': 'Moonraker', 'version': 'v0.8.0-337-g546a17f'}
Attempting MCU 'mcu' reset
Unable to issue reset command on MCU 'rpi'
Unable to issue reset command on MCU 'sht36'
webhooks client 547899376256: Disconnected
Restarting printer
Start printer at Sun Apr 28 07:06:03 2024 (1714284363.0 1041957.9)
===== Config file =====
[exclude_object]

[idle_timeout]
timeout = 3600

[force_move]
enable_force_move = True

[respond]
default_type = echo

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	CANCEL_PRINT

[pause_resume]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
variable_park = True
gcode = 
	TURN_OFF_HEATERS
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	PRINT_END
	BASE_CANCEL_PRINT

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32f446xx_2D0053000E51323130373733-if00

[temperature_sensor Spider]
sensor_type = temperature_mcu
min_temp = 10
max_temp = 100

[board_pins spider]
aliases = 
	
	X_STEP=PE11, X_DIR=PE10, X_ENABLE=PE9,
	Y_STEP=PD8, Y_DIR=PB12, Y_ENABLE=PD9,
	Z_STEP=PD14, Z_DIR=PD13, Z_ENABLE=PD15,
	E0_STEP=PD5, E0_DIR=PD6, E0_ENABLE=PD4,
	E1_STEP=PE6, E1_DIR=PC13, E1_ENABLE=PE5,
	E2_STEP=PE2, E2_DIR=PE4, E2_ENABLE=PE3,
	E3_STEP=PD12, E3_DIR=PC4, E3_ENABLE=PE8,
	E4_STEP=PE1, E4_DIR=PE0, E4_ENABLE=PC5,
	
	X_MIN=PB14, X_MAX=PA1,
	Y_MIN=PB13, Y_MAX=PA2,
	Z_MIN=PA0, Z_MAX=PA3,
	
	X_UART=PE7, Y_UART=PE15, Z_UART=PD10,
	E0_UART=PD7, E1_UART=PC14, E2_UART=PC15,
	E3_UART=PA15, E4_UART=PD11,
	
	E_HEATER=PB15, E_THERMISTOR=PC0,
	E1_HEATER=PC8, E1_THERMISTOR=PC1,
	E2_HEATER=PB3, E2_THERMISTOR=PC2,
	BED_HEATER=PB4, BED_THERMISTOR=PC3,
	FAN0=PB0, FAN1=PB1, FAN2=PB2,
	
	LED-R=PB6, LED-G=PB5, LED-B=PB7,
	
	EXP1_1=PC9, EXP1_3=PC11, EXP1_5=PC10, EXP1_7=PD0, EXP1_9=<GND>,
	EXP1_2=PA8, EXP1_4=PD2, EXP1_6=PC12, EXP1_8=PD1, EXP1_10=<5V>,
	
	EXP2_1=PA6, EXP2_3=PC6, EXP2_5=PC7, EXP2_7=PB10, EXP2_9=<GND>,
	EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<5V>

[mcu rpi]
serial = /tmp/klipper_host_mcu

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 10
max_temp = 100

[gcode_shell_command rpi_fan_50]
command = i2cset -y 1 0x01a 0x32
timeout = 30.
verbose = True

[gcode_shell_command rpi_fan_25]
command = i2cset -y 1 0x01a 0x19
timeout = 30.
verbose = True

[gcode_macro rpi_fan_50]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_50

[gcode_macro rpi_fan_25]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_25

[mcu sht36]
canbus_uuid = 943ff2eb48fd

[temperature_sensor sht36]
sensor_type = temperature_mcu
sensor_mcu = sht36

[printer]
kinematics = corexy
max_velocity = 800
max_accel = 20000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[extruder]
sensor_pin = sht36:PA3
sensor_type = PT1000
heater_pin = sht36:PA8
min_temp = 10
max_temp = 270
max_power = 1.0
min_extrude_temp = 10
control = pid
pid_kp = 20.362
pid_ki = 2.225
pid_kd = 46.579
pressure_advance_smooth_time = 0.040
max_extrude_only_velocity = 120
max_extrude_only_accel = 800
max_extrude_only_distance = 1150
max_extrude_cross_section = 9999
nozzle_diameter = 0.400
filament_diameter = 1.75
step_pin = sht36:PB4
dir_pin = !sht36:PB3
enable_pin = !sht36:PA15
full_steps_per_rotation = 200
rotation_distance = 22.66103
gear_ratio = 50:10
microsteps = 16
pressure_advance = 0.05

[temperature_sensor chamber]
sensor_type = NTC 100K MGB18-104F39050L32
sensor_pin = PC2
min_temp = -100
max_temp = 100
gcode_id = C

[heater_bed]
heater_pin = PB4
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PB0
max_power = 0.9
min_temp = -160
max_temp = 120
control = pid
pid_kp = 41.450
pid_ki = 1.322
pid_kd = 324.866

[multi_pin stepper_drivers_multipin]
pins = PB5, PB6, PB7

[controller_fan stepper_drivers]
pin = multi_pin:stepper_drivers_multipin
hardware_pwm = False
max_power = 1.0
fan_speed = 0.75
shutdown_speed = 0.0
stepper = stepper_x, stepper_y

[heater_fan controller_fan]
pin = PB2
cycle_time = 0.00004
off_below = 0.1
kick_start_time = 0.5
heater = heater_bed
heater_temp = 50.0
max_power = 1.0

[heater_fan hotend_fan]
pin = sht36:PB10
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 40.0

[fan]
pin = sht36:PB11
max_power = 0.85
cycle_time = 0.00005
kick_start_time = 0
off_below = 0.0
shutdown_speed = 0

[fan_generic stepper_fans]
pin = PA13
max_power = 0.5
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.0001

[fan_generic rebreather]
pin = PA14
max_power = 1.0
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.00010

[gcode_macro rebreather_start_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.5

[gcode_macro rebreather_end_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.7
	UPDATE_DELAYED_GCODE ID=rebreather_stop_delayed DURATION=900

[delayed_gcode rebreather_stop_delayed]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.0

[display]
lcd_type = uc1701
cs_pin = PC11
a0_pin = PD2
rst_pin = PC10
encoder_pins = ^PC6,^PC7
click_pin = ^!PA8
contrast = 63
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6
spi_software_sclk_pin = PA5
display_group = __voron_display_16x4

[gcode_macro M300]
gcode = SET_PIN PIN=BEEPER_pin VALUE={S}
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[neopixel mini12864]
pin = PC12
chain_count = 60
initial_red = 0.1
initial_green = 0.5
initial_blue = 0.0
color_order = RGB

[display_template _heater_temperature]
param_heater_name = "extruder"
text = 
	{% if param_heater_name in printer %}
	{% set heater = printer[param_heater_name] %}
	
	{% if param_heater_name == "heater_bed" %}
	{% if heater.target %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~bed_heat{frame}~
	{% else %}
	~bed~
	{% endif %}
	{% else %}
	~extruder~
	{% endif %}
	
	{ "%3.0f" % (heater.temperature,) }
	
	{% if heater.target and (heater.temperature - heater.target)|abs > 2 %}
	~right_arrow~
	{ "%0.0f" % (heater.target,) }
	{% endif %}
	~degrees~
	{% endif %}

[display_template _fan_speed]
text = 
	{% if 'fan' in printer %}
	{% set speed = printer.fan.speed %}
	{% if speed %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~fan{frame}~
	{% else %}
	~fan1~
	{% endif %}
	{ "{:>4.0%}".format(speed) }
	{% endif %}

[display_template _printing_time]
text = 
	{% set ptime = printer.idle_timeout.printing_time %}
	{ "%02d:%02d" % (ptime // (60 * 60), (ptime // 60) % 60) }

[display_template _print_status]
text = 
	{% if printer.display_status.message %}
	{ printer.display_status.message }
	{% elif printer.idle_timeout.printing_time %}
	{% set pos = printer.toolhead.position %}
	{ "X%-4.0fY%-4.0fZ%-5.2f" % (pos.x, pos.y, pos.z) }
	{% else %}
	Ready
	{% endif %}

[display_data __voron_display_16x4 extruder]
position = 0, 0
text = 
	{% set active_extruder = printer.toolhead.extruder %}
	{ render("_heater_temperature", param_heater_name=active_extruder) }

[display_data __voron_display_16x4 fan]
position = 0, 10
text = { render("_fan_speed") }

[display_data __voron_display_16x4 heater_bed]
position = 1, 0
text = { render("_heater_temperature", param_heater_name="heater_bed") }

[display_data __voron_display_16x4 chamber]
position = 1,10
text = 
	{% set chamber = printer['temperature_sensor chamber'] %}
	~chamber~
	{ "%3.0f" % (chamber.temperature,) }
	~degrees~

[display_data __voron_display_16x4 print_progress]
position = 2, 0
text = { "{:^10.0%}".format(printer.display_status.progress) }

[display_data __voron_display_16x4 progress_bar]
position = 2, 1
text = { draw_progress_bar(2, 0, 10, printer.display_status.progress) }

[display_data __voron_display_16x4 printing_time]
position = 2, 10
text = { "%6s" % (render("_printing_time").strip(),) }

[display_data __voron_display_16x4 print_status]
position = 3, 0
text = { render("_print_status") }

[display_glyph extruder]
data = 
	................
	................
	..************..
	.....******.....
	..************..
	.....******.....
	..************..
	................
	....********....
	....******.*....
	....********....
	................
	......****......
	.......**.......
	................
	................
hd44780_slot = 0
hd44780_data = 
	..*..
	.*.*.
	.*.*.
	.*.*.
	.*.*.
	*...*
	*...*
	.***.

[display_glyph bed]
data = 
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.....
	*****
	*.*.*
	*...*
	*.*.*
	*****
	.....
	.....

[display_glyph bed_heat1]
data = 
	................
	................
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.*..*
	*..*.
	.*..*
	*..*.
	.....
	*****
	.....
	.....

[display_glyph bed_heat2]
data = 
	................
	................
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	*..*.
	.*..*
	*..*.
	.*..*
	.....
	*****
	.....
	.....

[display_glyph fan1]
data = 
	................
	................
	....***.........
	...****....**...
	...****...****..
	....***..*****..
	.....*....****..
	.......**.......
	.......**.......
	..****....*.....
	..*****..***....
	..****...****...
	...**....****...
	.........***....
	................
	................

[display_glyph fan2]
data = 
	................
	................
	.......****.....
	.......****.....
	.......***......
	..**...**.......
	..***...........
	..****.**.****..
	..****.**.****..
	...........***..
	.......**...**..
	......***.......
	.....****.......
	.....****.......
	................
	................

[display_glyph chamber]
data = 
	................
	****************
	*....*....*....*
	*....*....*....*
	*....******....*
	*..............*
	*..............*
	*.....****.....*
	*.***.*..*.***.*
	*.....****.....*
	*......**......*
	*..............*
	*.************.*
	*...*......*...*
	****************
	................

[display_glyph feedrate]
data = 
	................
	................
	***.***.***.**..
	*...*...*...*.*.
	**..**..**..*.*.
	*...*...*...*.*.
	*...***.***.**..
	................
	**...*..***.***.
	*.*.*.*..*..*...
	**..***..*..**..
	*.*.*.*..*..*...
	*.*.*.*..*..***.
	................
	................
	................
hd44780_slot = 3
hd44780_data = 
	***..
	*....
	**...
	*.***
	..*.*
	..**.
	..*.*
	.....

[display_glyph fan]
hd44780_slot = 2
hd44780_data = 
	.....
	*..**
	**.*.
	..*..
	.*.**
	**..*
	.....
	.....

[display_glyph clock]
hd44780_slot = 4
hd44780_data = 
	.....
	.***.
	*..**
	*.*.*
	*...*
	.***.
	.....
	.....

[display_glyph degrees]
hd44780_slot = 5
hd44780_data = 
	.**..
	*..*.
	*..*.
	.**..
	.....
	.....
	.....
	.....

[display_glyph usb]
hd44780_slot = 6
hd44780_data = 
	.***.
	.***.
	.***.
	*****
	*****
	*****
	..*..
	..*..

[display_glyph sd]
hd44780_slot = 6
hd44780_data = 
	.....
	..***
	.****
	*****
	*****
	*****
	*****
	.....

[delayed_gcode setdisplayneopixel]
initial_duration = 1
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro red]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro orange]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro green]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro blue]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro white]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro yellow]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro purple]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[stepper_x]
step_pin = PE11
dir_pin = !PE10
enable_pin = !PE9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 300
position_max = 300
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PE7
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
interpolate = True
diag0_pin = ^!PB14
run_current = 1
driver_sgt = 1

[stepper_y]
step_pin = PD8
dir_pin = !PB12
enable_pin = !PD9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 310
position_max = 310
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PE15
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
diag0_pin = ^!PB13
interpolate = True
run_current = 1
driver_sgt = 1

[stepper_z]
step_pin = PE6
dir_pin = PC13
enable_pin = !PE5
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 240
position_min = -5
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 0.0

[tmc2209 stepper_z]
uart_pin = PC14
uart_address = 0
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z1]
step_pin = PE2
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z1]
uart_pin = PC15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z2]
step_pin = PD12
dir_pin = PC4
enable_pin = !PE8
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z2]
uart_pin = PA15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[tmc2209 extruder]
uart_pin = sht36:PB5
interpolate = false
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[gcode_arcs]
resolution = 1.0

[output_pin LIGHTS]
pin = PC8
pwm = true
shutdown_value = 0
value = 1
cycle_time = 0.01

[gcode_macro LIGHTS_ON]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.6

[gcode_macro LIGHTS_ON_20]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.20

[gcode_macro LIGHTS_OFF]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.0

[neopixel sb_leds]
pin = sht36:PB0
chain_count = 3
color_order = GRBW
initial_red = 0.0
initial_green = 0.0
initial_blue = 0.0
initial_white = 0.0

[gcode_macro _sb_vars]
variable_colors = {
	'logo': {
	'busy': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cleaning': {'r': 0.0, 'g': 0.02, 'b': 0.5, 'w': 0.0},
	'calibrating_z': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	'heating': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'homing': {'r': 0.0, 'g': 0.6, 'b': 0.2, 'w': 0.0},
	'leveling': {'r': 0.5, 'g': 0.1, 'b': 0.4, 'w': 0.0},
	'meshing': {'r': 0.2, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'printing': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'standby': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'red': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'orange': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'green': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'blue': {'r': 0.0, 'g': 0.0, 'b': 0.5, 'w': 0.0},
	'white': {'r': 1.0, 'g': 1.0, 'b': 1.0, 'w': 0.0},
	'yellow': {'r': 0.4, 'g': 0.4, 'b': 0.0, 'w': 0.0},
	'purple': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	},
	'nozzle': {
	'heating': {'r': 0.8, 'g': 0.35, 'b': 0.0, 'w':0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'on': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':1.0},
	'standby': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':0.8},
	},
	'thermal': {
	'hot': {'r': 1.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cold': {'r': 0.3, 'g': 0.0, 'b': 0.3, 'w': 0.0}
	}
	}
variable_logo_led_name = "sb_leds"
variable_logo_idx = "3"
variable_nozzle_led_name = "sb_leds"
variable_nozzle_idx = "1,2"
gcode = 

[gcode_macro _set_sb_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = params.LED|string %}
	{% set idx = (params.IDX|string).split(',') %}
	{% set transmit_last = params.TRANSMIT|default(1) %}
	
	{% for led_index in idx %}
	{% set transmit=transmit_last if loop.last else 0 %}
	set_led led={led} red={red} green={green} blue={blue} white={white} index={led_index} transmit={transmit}
	{% endfor %}

[gcode_macro _set_sb_leds_by_name]
gcode = 
	{% set leds_name = params.LEDS %}
	{% set color_name = params.COLOR %}
	{% set color = printer["gcode_macro _sb_vars"].colors[leds_name][color_name] %}
	{% set led = printer["gcode_macro _sb_vars"][leds_name + "_led_name"] %}
	{% set idx = printer["gcode_macro _sb_vars"][leds_name + "_idx"] %}
	{% set transmit = params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={color.r} green={color.g} blue={color.b} white={color.w} idx="{idx}" transmit={transmit}

[gcode_macro _set_logo_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].logo_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].logo_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro _set_nozzle_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].nozzle_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].nozzle_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro set_logo_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_logo_leds red=0 blue=0 green=0 white=0 transmit={transmit}

[gcode_macro set_nozzle_leds_on]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="on" transmit={transmit}

[gcode_macro set_nozzle_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="off" transmit={transmit}

[gcode_macro status_off]
gcode = 
	set_logo_leds_off transmit=0
	set_nozzle_leds_off

[gcode_macro status_ready]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="standby" transmit=1

[gcode_macro status_busy]
gcode = 
	_set_sb_leds_by_name leds="logo" color="busy" transmit=0
	set_nozzle_leds_on

[gcode_macro status_heating]
gcode = 
	_set_sb_leds_by_name leds="logo" color="heating" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="heating" transmit=1

[gcode_macro status_leveling]
gcode = 
	_set_sb_leds_by_name leds="logo" color="leveling" transmit=0
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="homing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	_set_sb_leds_by_name leds="logo" color="cleaning" transmit=0
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="meshing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	_set_sb_leds_by_name leds="logo" color="calibrating_z" transmit=0
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="printing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_orange]
gcode = 
	_set_sb_leds_by_name leds="logo" color="orange" transmit=0
	set_nozzle_leds_on

[gcode_macro status_red]
gcode = 
	_set_sb_leds_by_name leds="logo" color="red" transmit=0
	set_nozzle_leds_on

[gcode_macro status_purple]
gcode = 
	_set_sb_leds_by_name leds="logo" color="purple" transmit=0
	set_nozzle_leds_on

[gcode_macro status_green]
gcode = 
	_set_sb_leds_by_name leds="logo" color="green" transmit=0
	set_nozzle_leds_on

[gcode_macro status_white]
gcode = 
	_set_sb_leds_by_name leds="logo" color="white" transmit=0
	set_nozzle_leds_on

[gcode_macro status_yellow]
gcode = 
	_set_sb_leds_by_name leds="logo" color="yellow" transmit=0
	set_nozzle_leds_on

[gcode_macro status_blue]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	set_nozzle_leds_on

[delayed_gcode set_sb_leds_on_boot]
initial_duration = 1
gcode = 
	flicker
	status_ready

[gcode_macro flicker]
gcode = 
	{% set LEDTimes = [10, 20, 20, 240, 20, 40, 20, 100, 20, 20, 20, 260, 80, 20, 240, 60, 160, 20, 240, 20, 1000, 20, 20, 40, 100, 20, 274, 340, 860, 20, 1400, 20, 60, 20] %}
	{% set RGB_Red = 0.2 %}
	{% set RGB_Green = 0.2 %}
	{% set RGB_Blue = 0.2 %}
	{% set RGB_Strip = "sb_leds" %}
	{% set RGB_Strip1 = "mini12864" %}
	
	{% for toggletime in LEDTimes %}
	{% set ledTime = toggletime|string %}
	{% set loopCount = loop.index %}
	
	{% if loopCount is divisibleby 2 %}
	SET_LED LED={RGB_Strip} RED={RGB_Red} GREEN={RGB_Green} BLUE={RGB_Blue}
	G4 P{ledTime|int}
	{% else %}
	SET_LED LED={RGB_Strip}
	G4 P{ledTime|int}
	{% endif %}
	
	{% endfor %}
	
	{% for i in range(1,9) %}
	SET_LED LED={RGB_Strip} RED={RGB_Red+(i/10)} GREEN={RGB_Green+(i/10)}  BLUE={RGB_Blue+(i/10)} INDEX=1
	G4 P200
	{% endfor %}

[beacon]
serial = /dev/serial/by-id/usb-Beacon_Beacon_RevD_63E3DDD04E4B333448202020FF0A3315-if00
x_offset = 0
y_offset = -24
mesh_main_direction = x
mesh_runs = 2
home_xy_position = 117.5, 117.5
home_z_hop = 5
home_z_hop_speed = 30
home_xy_move_speed = 300
home_method = contact
home_method_when_homed = contact
home_autocalibrate = always

[bed_mesh]
speed = 150
horizontal_move_z = 10
mesh_min = 10,10
mesh_max = 290,240
probe_count = 15,15
algorithm = bicubic
fade_start = 1
fade_end = 5
fade_target = 0

[z_tilt]
speed = 500
horizontal_move_z = 10
retries = 5
retry_tolerance = 0.004
z_positions = 
	-50, 18
	150, 348
	350, 18
points = 
	30, 5
	150, 245
	270, 5

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% if display_parameters == True %}
	{ action_respond_info("led_enable  : %d" % (led_enable))  }
	{ action_respond_info("status_macro: \'%s\'" % (status_macro))  }
	{ action_respond_info("fuzz_enable : %d" % (fuzz_enable))  }
	{ action_respond_info("fuzz_min    : %f" % (fuzz_min))  }
	{ action_respond_info("fuzz_max    : %f" % (fuzz_max))  }
	{ action_respond_info("probe_dock_enable: %d" % (probe_dock_enable))  }
	{ action_respond_info("attach_macro: \'%s\'" % (attach_macro))  }
	{ action_respond_info("detach_macro: \'%s\'" % (detach_macro))  }
	{% endif %}
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% if margin_enable == False %}
	{% set margin_size = 0 %}
	{% endif %}
	
	{ action_respond_info("{} object points, clamping to bed mesh [{!r} {!r}]".format(
	all_points | count,
	bed_mesh_min,
	bed_mesh_max,
	)) }
	
	{% if fuzz_enable == True %}
	{% set fuzz_range = range((fuzz_min * 100) | int, (fuzz_max * 100) | int + 1) %}
	{% set x_min = (bed_mesh_min[0] + fuzz_max - margin_size, x_min) | max - (fuzz_range | random / 100.0) %}
	{% set y_min = (bed_mesh_min[1] + fuzz_max - margin_size, y_min) | max - (fuzz_range | random / 100.0) %}
	{% set x_max = (bed_mesh_max[0] - fuzz_max + margin_size, x_max) | min + (fuzz_range | random / 100.0) %}
	{% set y_max = (bed_mesh_max[1] - fuzz_max + margin_size, y_max) | min + (fuzz_range | random / 100.0) %}
	{% else %}
	{% set x_min = [ bed_mesh_min[0], x_min - margin_size ] | max %}
	{% set y_min = [ bed_mesh_min[1], y_min - margin_size ] | max %}
	{% set x_max = [ bed_mesh_max[0], x_max + margin_size ] | min %}
	{% set y_max = [ bed_mesh_max[1], y_max + margin_size ] | min %}
	{% endif %}
	
	{ action_respond_info("Object bounds, clamped to the bed_mesh: {!r}, {!r}".format(
	(x_min, y_min),
	(x_max, y_max),
	)) }
	
	{% set points_x = (((x_max - x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((y_max - y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	{ action_respond_info( "Algorithm: {}".format(algorithm)) }
	
	{% set points_x = [points_x, min_points]|max  %}
	{% set points_y = [points_y, min_points]|max  %}
	{ action_respond_info( "Points: x: {}, y: {}".format(points_x, points_y) ) }
	
	{% if printer.configfile.settings.bed_mesh.relative_reference_index is defined %}
	{% set ref_index = (points_x * points_y / 2) | int %}
	{ action_respond_info( "Reference index: {}".format(ref_index) ) }
	{% else %}
	{% set ref_index = -1 %}
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	{% if led_enable == True %}
	{status_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={x_min},{y_min} mesh_max={x_max},{y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y} RELATIVE_REFERENCE_INDEX={ref_index}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}
variable_led_enable = False
variable_status_macro = 'status_meshing'
variable_fuzz_enable = False
variable_fuzz_min = 0
variable_fuzz_max = 4
variable_margin_enable = False
variable_margin_size = 5
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_display_parameters = True

[gcode_macro Z_TILT_ADJUST]
rename_existing = _Z_TILT_ADJUST
gcode = 
	{ action_respond_info("Z Tilt Adjust") }
	
	_Z_TILT_ADJUST {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	G28 Z0

[gcode_macro z_tilt_scan]
gcode = 
	z_tilt_adjust RETRY_TOLERANCE=1
	z_tilt_adjust HORIZONTAL_MOVE_Z=2

[gcode_macro MACROS_VARS]
variable_circ_fan_speed = 255
variable_probe_temp = 150
variable_starting_wled = 2
variable_heating_wled = 4
variable_ending_wled = 3
variable_ending_length = 25
variable_purge_length = 40
variable_filament_swap_length = 0.8
variable_pla_pa = 0.00525
variable_pet_pa = 0.00650
variable_abs_pa = 0.00460
variable_pet_za = 0.010
variable_move_away_home = 0
variable_homing_retract = 20
gcode = 

[gcode_macro MATERIAL_PA]
gcode = 
	{% set MATERIAL = params.MATERIAL|default("XXX")|string %}
	{% set TEXT ="Setting PA for " + MATERIAL %}
	{% set PLA = printer["gcode_macro MACROS_VARS"].pla_pa|default(0)%}
	{% set PET = printer["gcode_macro MACROS_VARS"].pet_pa|default(0)%}
	{% set ABS = printer["gcode_macro MACROS_VARS"].abs_pa|default(0)%}
	{% set PETZ = printer["gcode_macro MACROS_VARS"].pet_za|default(0)%}
	{% if MATERIAL == "PLA" %}
	SET_PRESSURE_ADVANCE ADVANCE={PLA}
	{% elif MATERIAL == "PET" %}
	SET_PRESSURE_ADVANCE ADVANCE={PET}
	SET_GCODE_OFFSET Z_ADJUST={PETZ} MOVE=1
	{% elif MATERIAL == "ABS" %}
	SET_PRESSURE_ADVANCE ADVANCE={ABS}
	{% else %}
	{% set TEXT ="No PA value for " + MATERIAL %}
	{% endif %}
	DISPLAYTEXT TEXT="{TEXT}"

[gcode_macro PURGE_LINE]
gcode = 
	DISPLAYTEXT TEXT="Prime Line"
	G1 X75 E25 F1000
	G92 E0;
	G90
	G0 X75 Y4 F6000
	G1 Z0.2 F200
	G91
	G1 X150 E30 F1200;
	G1 Y1
	G1 X-150 E30 F1200;
	G92 E0.0
	G1 Z1 F5000

[gcode_macro PRINT_START]
gcode = 
	{% set BED_TEMP = params.BED_TEMP|default(110)|float %}
	{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(250)|float %}
	{% set ENCLOSURE_TEMP = params.ENCLOSURE_TEMP|default(45)|int %}
	{% set PROBE_TEMP = printer["gcode_macro MACROS_VARS"].probe_temp|default(0)%}
	
	SET_TEMP HEATER="bed" TEMP={BED_TEMP}
	SET_TEMP HEATER="extruder" TEMP={PROBE_TEMP} WAIT=1
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	DISPLAYTEXT TEXT="Homing"
	G28
	{% endif %}
	DISPLAYTEXT TEXT="Heating Bed"
	SET_TEMP HEATER="bed" TEMP={BED_TEMP} WAIT=1
	
	{% if not printer.z_tilt.applied %}
	DISPLAYTEXT TEXT="Z tilt thingy"
	Z_TILT_ADJUST
	{% endif %}
	MATERIAL_PA MATERIAL={FILAMENT}
	DISPLAYTEXT TEXT="Heating Extruder"
	SET_TEMP HEATER="extruder" TEMP={EXTRUDER_TEMP} WAIT=1
	
	BED_MESH_CALIBRATE
	SET_FAN_SPEED FAN=rebreather SPEED=1
	SET_FAN_SPEED FAN=stepper_fans SPEED=0.25
	MATERIAL_PA MATERIAL={FILAMENT}
	G4 P1000
	PURGE_LINE
	
	
	DISPLAYTEXT TEXT="Printing..."

[gcode_macro G32]
gcode = 
	BED_MESH_CLEAR
	G28
	Z_TILT_ADJUST
	G28
	G0 X75 Y75 Z30 F3600

[gcode_macro PRINT_END]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	{% set FILAMENT = params.FILAMENT|default(PLA) %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	M400
	G92 E0
	G1 E-25.0 F1800
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	TURN_OFF_HEATERS
	M107
	G1 Z2 F3000
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	
	{% if FILAMENT == 'ABS' or params.FILAMENT == 'ASA' %}
	NEVERMORE_END_PRINT
	{% endif %}
	
	DISPLAYTEXT TEXT="Print Complete"

[gcode_macro SET_TEMP]
gcode = 
	{% set HEATER = params.HEATER|default("")|string %}
	{% set TEMP = params.TEMP|default(0)|int %}
	{% set WAIT = params.WAIT|default(0)|int %}
	
	{% if HEATER == "extruder" %}
	{% if WAIT == 1 %}
	M109 S{TEMP}
	{% else %}
	M104 S{TEMP}
	{% endif %}
	{% else %}
	{% if WAIT == 1 %}
	M190 S{TEMP}
	{% else %}
	M140 S{TEMP}
	{% endif %}
	{% endif %}

[gcode_macro ENDING_RETRACTION]
gcode = 
	{% set RETRACT = printer["gcode_macro MACROS_VARS"].ending_length|default(0)%}
	G1 E{RETRACT*-1} F1800

[gcode_macro PARK_AT_PRINT_END]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600

[gcode_macro Homing_Variables]
variable_move_away_home = 0
variable_x_homing_pos = 150
variable_y_homing_pos = 150
variable_homing_current = 0.8
variable_homing_retract_x = 150
variable_homing_retract_y = 20
variable_homing_retract_speed = 5000
variable_z_end_pos = 30
variable_is_sensorless = True
variable_display_parameters = True
gcode = 

[gcode_macro DISPLAY_PARAMETERS]
gcode = 
	{% set DISPLAY_PARAMS = printer["gcode_macro Homing_Variables"].display_parameters %}
	{% set is_sensorless = printer["gcode_macro Homing_Variables"].is_sensorless %}
	{% set x_homing_pos = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set y_homing_pos = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	{% set homing_current = printer["gcode_macro Homing_Variables"].homing_current %}
	{% set homing_retract_x = printer["gcode_macro Homing_Variables"].homing_retract_x %}
	{% set homing_retract_y = printer["gcode_macro Homing_Variables"].homing_retract_y %}
	{% set homing_retract_speed = printer["gcode_macro Homing_Variables"].homing_retract_speed %}
	{% set z_end_pos = printer["gcode_macro Homing_Variables"].z_end_pos %}
	
	{% if DISPLAY_PARAMS == True %}
	{ action_respond_info("is_sensorless  : %d" % (is_sensorless))  }
	{ action_respond_info("x_homing_pos  : %d" % (x_homing_pos))  }
	{ action_respond_info("y_homing_pos  : %d" % (y_homing_pos))  }
	{ action_respond_info("homing_current  : %d" % (homing_current))  }
	{ action_respond_info("homing_retract_x  : %d" % (homing_retract_x))  }
	{ action_respond_info("homing_retract_y  : %d" % (homing_retract_y))  }
	{ action_respond_info("homing_retract_speed  : %d" % (homing_retract_speed))  }
	{ action_respond_info("z_end_pos  : %d" % (z_end_pos))  }
	{% endif %}

[gcode_macro MOVE_AWAY_BEFORE_HOMING]
gcode = 
	{% set MAH = printer["gcode_macro Homing_Variables"].move_away_home|default(0)%}
	{% set PARAMS = params.PARAMS|default("")|string %}
	
	{% set home_all = 'X' not in PARAMS and 'Y' not in PARAMS and 'Z' not in PARAMS %}
	
	
	{% if home_all or 'X' in PARAMS %}
	G1 X-{MAH/2}  F6000
	{% endif %}
	
	{% if home_all or 'Y' in PARAMS %}
	G1  Y-{MAH/2} F6000
	{% endif %}
	
	{% if home_all or 'Z' in PARAMS %}
	G1 Z{MAH} F100
	{% endif %}

[gcode_macro _HOME_X]
gcode = 
	DISPLAYTEXT TEXT="Homing X Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_x|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION X=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="X"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 X
	
	G91
	G1 X-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Y]
gcode = 
	DISPLAYTEXT TEXT="Homing Y Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_y|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION Y=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="Y"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 Y
	
	G91
	G1 Y-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Z]
gcode = 
	{% set Ez = printer["gcode_macro Homing_Variables"].z_end_pos %}
	{% set Hx = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set Hy = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	
	DISPLAYTEXT TEXT="Homing Z Axis"
	
	G1 X{Hx} Y{Hy} F15000
	G28 Z
	G1 Z{Ez}

[gcode_macro ABSOLUTE_COORDINATES]
gcode = 
	G90

[gcode_macro RELATIVE_COORDINATES]
gcode = 
	G91

[gcode_macro DISPLAYTEXT]
gcode = 
	{% set TEXT = params.TEXT|default("")|string %}
	RESPOND MSG="{TEXT}"
	SET_DISPLAY_TEXT MSG="{TEXT}"

[gcode_macro DISPLAY_PROGRESS]
gcode = 
	{% set TOTAL_LAYERS = params.TOTAL_LAYERS|default("")|string %}
	{% set CURRENT_LAYER = params.CURRENT_LAYER|default("")|string %}
	RESPOND MSG="Total layers {TOTAL_LAYERS}, current layer {CURRENT_LAYER}"

[gcode_macro TEMPERATURE_WAIT]
rename_existing = _TEMPERATURE_WAIT
gcode = 
	{% set SENSOR = params.SENSOR|default("")|string %}
	{% set MINIMUM = params.MINIMUM|int %}
	{% set MSG = "Enclosure temperature has reached " + MINIMUM |string %}
	
	DISPLAYTEXT TEXT="Heatsoaking..."
	_TEMPERATURE_WAIT SENSOR="{SENSOR}" MINIMUM={MINIMUM}
	DISPLAYTEXT TEXT="{MSG}"

[gcode_macro WAIT]
gcode = 
	{% set TIME = params.TIME|default(0)|int %}
	G4 P{TIME*1000}

[gcode_macro CHOME]
gcode = 
	{% if printer.toolhead.homed_axes != "xyz" %}
	DISPLAYTEXT TEXT="Homing.."
	G28
	{% endif %}

[gcode_macro RESET_EXTRUDER]
gcode = 
	G92 E0

[gcode_macro PARK_TOOLHEAD]
gcode = 
	{% set th = printer.toolhead %}
	ABSOLUTE_COORDINATES
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y//2} F15000

[gcode_macro DUMP_VARIABLES]
gcode = 
	{% set filter_name = params.NAME|default('')|string|lower %}
	{% set filter_value = params.VALUE|default('')|string|lower %}
	{% set show_cfg = params.SHOW_CFG|default(0)|int %}
	
	{% set out = [] %}
	
	{% for key1 in printer %}
	{% for key2 in printer[key1] %}
	{% if (show_cfg or not (key1|lower == 'configfile' and key2|lower in ['config', 'settings'])) and (filter_name in key1|lower or filter_name in key2|lower) and filter_value in printer[key1][key2]|string|lower %}
	{% set dummy = out.append("printer['%s'].%s = %s" % (key1, key2, printer[key1][key2])) %}
	{% endif %}
	{% else %}
	{% if filter_name in key1|lower and filter_value in printer[key1]|string|lower %}
	{% set dummy = out.append("printer['%s'] = %s" % (key1, printer[key1])) %}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	{action_respond_info(out|join("\n"))}

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=UNLOAD_FILAMENT_state
	
	M82
	G92 E0
	G1 E2 F3600
	G1 E0 F3600
	G1 E3 F3600
	G1 E0 F3600
	G1 E4 F3600
	G1 E0 F3600
	
	M83
	G1 E-20 F3600
	G4 P3000
	G1 E{DISTANCE|float * -1} F3000
	RESTORE_GCODE_STATE NAME=UNLOAD_FILAMENT_state

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=LOAD_FILAMENT_state
	
	M83
	G92 E0
	G1 E{DISTANCE|float} F200
	
	
	
	
	G1 E50 F150
	
	
	G92 E0
	RESTORE_GCODE_STATE NAME=LOAD_FILAMENT_state

[gcode_macro PID_HOTEND]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro PID_BED]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=80

[gcode_macro Z_ENDSTOP]
gcode = 
	Z_ENDSTOP_CALIBRATE

[gcode_macro PROBE_CAL]
gcode = 
	
	G28
	PROBE_CALIBRATE

[gcode_macro IS_CAL]
gcode = 
	
	G28
	SHAPER_CALIBRATE

[gcode_macro SPEEDTEST]
gcode = 
	
	
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest_state
	
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{maxX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{maxX} Y{minY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest_state

[gcode_macro SPEEDTEST2]
gcode = 
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest2_state
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest2_state

[gcode_macro PRESSURE_ADVANCE_CALIBRATION]
description = Calibrate the pressure advance by printing a grid pattern
gcode = 
	
	
	
	{% set pa_start     = params.START|default(0.02)|float %}
	{% set pa_increment = params.INCREMENT|default(0.005)|float %}
	
	{% set do_raft = params.RAFT|default(1)|int %}
	
	{% set print_size      = params.SIZE|default(120)|int %}
	{% set num_bands       = params.BANDS_LIMIT|default(999)|int %}
	{% set lines_per_band  = params.LINES_PER_BAND|default(6)|int %}
	{% set e_multiplier    = params.EXTRUSION_MULTIPLIER|default(1.25 if do_raft == 1 else 1.5)|float %},
	{% set retract_length  = params.RETRACT|default(0.6)|float %}
	{% set initial_purge   = params.PURGE_MM|default(8)|int %}
	
	{% set feedrate_control = params.CONTROL_SPEED|default(30)|int * 60 %}
	{% set feedrate_outer   = params.OUTER_SPEED|default(40)|int * 60 %}
	{% set feedrate_inner   = params.INNER_SPEED|default(120)|int * 60 %}
	{% set feedrate_travel  = params.TRAVEL_SPEED|default(200)|int * 60 %}
	{% set feedrate_raft    = params.RAFT_SPEED|default(120)|int * 60 %}
	{% set feedrate_z       = 5 * 60 %}
	{% set feedrate_retract = 50 * 60 %}
	
	{% set spacing_line  = params.LINE_SPACING|default(0.4)|float %}
	{% set spacing_band  = 2 %}
	{% set spacing_raft  = 2 %}
	
	{% set fast_line_ratio_percent = 50 %}
	
	{% set lines_per_band    = [2, lines_per_band]|max %}
	{% set e_multiplier      = [1, e_multiplier]|max %}
	{% set num_lines_control = (lines_per_band / 2)|round(0, 'floor')|int %}
	{% set num_lines_test    = (lines_per_band / 2)|round(0, 'ceil')|int %}
	{% set spacing_line      = spacing_line * (1 + e_multiplier - 1.25) %}
	
	{% set max_x = printer.toolhead.axis_maximum.x|float %}
	{% set max_y = printer.toolhead.axis_maximum.y|float %}
	{% set nozzle_diameter = printer.configfile.config['extruder'].nozzle_diameter|float %}
	{% set line_width    = nozzle_diameter * 1.25 %}
	{% set line_height   = nozzle_diameter / 2 %}
	{% set z_hop_height  = 2 * line_height %}
	{% set e_per_mm      = (line_width * line_height) / (3.1415 * (1.75/2)**2) %}
	{% set spacing_purge = line_height * 0.8 %}
	
	{% set spacing_raft   = (spacing_raft / line_width)|round * line_width %}
	{% set num_raft_lines = ([print_size, max_x]|min / spacing_raft)|round(0, 'floor')|int %}
	{% set print_width    = num_raft_lines * spacing_raft %}
	
	{% set band_height      = lines_per_band * line_width + (lines_per_band - 1) * spacing_line + spacing_band %}
	{% set bands_per_height = (([print_size, max_y]|min  - spacing_purge) / band_height)|round(0, 'floor')|int %}
	{% set num_bands        = [num_bands, bands_per_height]|min %}
	{% set print_height     = num_bands * band_height - spacing_band - spacing_purge %}
	
	{% set slow_line_length = ((print_width * (1 - fast_line_ratio_percent / 100) / 2) / spacing_raft)|round * spacing_raft + spacing_raft / 2 %}
	{% set fast_line_length = print_width - slow_line_length * 2 %}
	{% set thick_raft_num1 = (slow_line_length / spacing_raft)|round|int %}
	{% set thick_raft_num2  = num_raft_lines - thick_raft_num1 + 1 %}
	
	{% set x_start = max_x / 2 - print_width  / 2 %}
	{% set y_start = max_y / 2 - print_height / 2 %}
	
	{action_respond_info("")}
	{action_respond_info("Starting Pressure Advance calibration print.")}
	{action_respond_info("")}
	{action_respond_info("This operation can not be interrupted by normal means. Hit the \"emergency stop\" button once the print starts exhibiting PA values that are obviously too high.")}
	{action_respond_info("")}
	{action_respond_info("PA of first band: %.4f" % pa_start)}
	{action_respond_info("PA of last band: %.4f" % (num_bands * pa_increment))}
	{action_respond_info("PA increment per band: %.4f" % pa_increment)}
	{action_respond_info("Number of bands: %d" % num_bands)}
	{action_respond_info("")}
	{action_respond_info("Inspect the printed model. "
	"Look at the top and bottom lines in each band, on the right side of the two vertical raft bars (where the print speeds change). "
	"Find the highest band from the bottom where the lines at its top still resemble the lines at its bottom, with no visible extrusion width irregularities. "
	"Your final Pressure Advance value would then be:"
	)}
	{action_respond_info("")}
	{action_respond_info("PA = %.4f + (%.4f * band_number)" % (pa_start, pa_increment))}
	{action_respond_info("")}
	{action_respond_info("Update your [extruder] config section and set \"pressure_advance\" to the value you calculated.")}
	{action_respond_info("")}
	
	
	
	
	
	
	
	
	
	SAVE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION
	{% set pa_saved = printer.configfile.settings['extruder'].pressure_advance %}
	SET_PRESSURE_ADVANCE ADVANCE={pa_start}
	
	
	
	
	M117 Priming
	G90
	G0 X{x_start} Y{y_start} Z{line_height} F{feedrate_travel}
	G91
	G1 E{initial_purge} F{5 * 60}
	G1 X{print_width}  E{print_width * e_per_mm} F{feedrate_raft / 2}
	G1 Y{line_width}   E{line_width * e_per_mm}  F{feedrate_raft / 2}
	G1 X-{print_width} E{print_width * e_per_mm} F{feedrate_raft / 2}
	
	
	
	
	{% if do_raft == 1 %}
	G0 F{feedrate_raft}
	
	{% for curr_raft_line in range(1, num_raft_lines + 2) %}
	
	{% if curr_raft_line == thick_raft_num1 or curr_raft_line == thick_raft_num2 %}
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	G1 Y{loop.cycle(-1.0, 1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	{% endif %}
	
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	
	
	{% if not loop.last %}
	{% set horizontal_move = spacing_raft - (2 * line_width if curr_raft_line == thick_raft_num1 - 1 or curr_raft_line == thick_raft_num2 - 1 else 0) %}
	G1 X{horizontal_move} E{horizontal_move * e_per_mm}
	{% endif %}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	{% endif %}
	
	
	
	
	M117 Printing bands
	G90
	G0 X{x_start} Y{y_start + 2 * line_width + spacing_purge} F{feedrate_travel}
	G0 Z{line_height + (line_height if do_raft == 1 else 0)} F{feedrate_z}
	G91
	G1 E{retract_length} F{feedrate_retract}
	
	
	{% for curr_band_num in range(1, num_bands + 1) %}
	{% set outer_loop = loop %}
	
	{% set curr_pa_value = pa_start + (curr_band_num - 1) * pa_increment %}
	SET_PRESSURE_ADVANCE ADVANCE={curr_pa_value}
	M117 Band {curr_band_num} PA {curr_pa_value|round(4)}
	
	
	{% for _ in range(num_lines_control) %}
	G1 X{print_width} E{print_width * e_per_mm * e_multiplier} F{feedrate_control}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	G0 X-{print_width} Y{spacing_line + line_width} F{feedrate_travel}
	
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endfor %}
	
	
	{% for _ in range(num_lines_test) %}
	{% for data in [{'mm': slow_line_length, 'f': feedrate_outer}, {'mm': fast_line_length, 'f': feedrate_inner}, {'mm': slow_line_length, 'f': feedrate_outer}] %}
	G1 X{data.mm} E{data.mm * e_per_mm * e_multiplier} F{data.f}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	{% if not (outer_loop.last and loop.last) %}
	G0 X-{print_width} Y{(spacing_line if not loop.last else spacing_band) + line_width} F{feedrate_travel}
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	
	
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z20 F{feedrate_z}
	G0 X-{print_width / 2} Y{[50, max_y - (y_start + print_height)]|min} F{feedrate_travel}
	
	M117
	SET_PRESSURE_ADVANCE ADVANCE={pa_saved}
	RESTORE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION

[gcode_macro TEST_SPEED]
gcode = 
	
	{% set speed  = params.SPEED|default(printer.configfile.settings.printer.max_velocity)|int %}
	
	{% set iterations = params.ITERATIONS|default(5)|int %}
	
	{% set accel  = params.ACCEL|default(printer.configfile.settings.printer.max_accel)|int %}
	
	{% set bound = params.BOUND|default(20)|int %}
	
	{% set smallpatternsize = SMALLPATTERNSIZE|default(20)|int %}
	
	
	
	{% set x_min = printer.toolhead.axis_minimum.x + bound %}
	{% set x_max = printer.toolhead.axis_maximum.x - bound %}
	{% set y_min = printer.toolhead.axis_minimum.y + bound %}
	{% set y_max = printer.toolhead.axis_maximum.y - bound %}
	
	
	
	{% set x_center = (printer.toolhead.axis_minimum.x|float + printer.toolhead.axis_maximum.x|float ) / 2 %}
	{% set y_center = (printer.toolhead.axis_minimum.y|float + printer.toolhead.axis_maximum.y|float ) / 2 %}
	
	
	{% set x_center_min = x_center - (smallpatternsize/2) %}
	{% set x_center_max = x_center + (smallpatternsize/2) %}
	{% set y_center_min = y_center - (smallpatternsize/2) %}
	{% set y_center_max = y_center + (smallpatternsize/2) %}
	
	
	SAVE_GCODE_STATE NAME=TEST_SPEED
	
	
	{ action_respond_info("TEST_SPEED: x_min %d, y_min %d, x_max %d, y_max %d" % (x_min, y_min, x_max, y_max)) }
	{ action_respond_info("TEST_SPEED: starting %d iterations at speed %d, accel %d" % (iterations, speed, accel)) }
	
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	G28 X Y
	{% endif %}
	
	
	
	
	
	
	
	
	
	
	
	
	G4 P1000
	GET_POSITION
	
	
	G0 X{x_min} Y{y_min} Z{bound + 10} F{speed*60}
	
	
	SET_VELOCITY_LIMIT VELOCITY={speed} ACCEL={accel} ACCEL_TO_DECEL={accel / 2}
	
	{% for i in range(iterations) %}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	{% endfor %}
	
	
	SET_VELOCITY_LIMIT VELOCITY={printer.configfile.settings.printer.max_velocity} ACCEL={printer.configfile.settings.printer.max_accel} ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel}
	
	
	G28 X Y
	
	
	
	G4 P1000
	GET_POSITION
	
	
	RESTORE_GCODE_STATE NAME=TEST_SPEED

[gcode_macro SETUP_KAMP_MESHING]
gcode = 
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=display_parameters   VALUE={params.DISPLAY_PARAMETERS|default(True)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=led_enable   VALUE={params.LED_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=status_macro VALUE='"{params.STATUS_MACRO|default('status_meshing')|string}"'
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_enable VALUE={params.FUZZ_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_min    VALUE={params.FUZZ_MIN|default(0)|float}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_max    VALUE={params.FUZZ_MAX|default(4)|float}
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=probe_dock_enable  VALUE={params.PROBE_DOCK_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=attach_macro VALUE='"{params.ATTACH_MACRO|default('Attach_Probe')|string}"'
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=detach_macro VALUE='"{params.DETACH_MACRO|default('Dock_Probe')|string}"'

[input_shaper]
shaper_freq_x = 86.8
shaper_type_x = zv
shaper_freq_y = 62.2
shaper_type_y = zv

[probe]
z_offset = -0.0400

[beacon model default]
model_coef = 1.409155451498927,
	1.7229833219997472,
	0.7624260199879447,
	0.3933310021549746,
	0.3504714980336664,
	0.3215136667184013,
	-0.12014580629124338,
	-0.22419779942999016,
	0.19713656245482147,
	0.188750402116144
model_domain = 3.120873231931901e-07,3.332026812812074e-07
model_range = 0.200000,5.000000
model_temp = 23.909578
model_offset = 0.02500

[bed_mesh default]
version = 1
points = 
	-0.062140, -0.036984, -0.007379, 0.031314, 0.058627, 0.084848, 0.107257, 0.111945, 0.135207, 0.152355, 0.170171
	-0.128044, -0.093273, -0.053917, -0.019434, 0.015362, 0.051030, 0.076081, 0.091292, 0.113629, 0.133648, 0.155842
	-0.171323, -0.136118, -0.096393, -0.057201, -0.010727, 0.024397, 0.048697, 0.072530, 0.099236, 0.126818, 0.150713
	-0.201543, -0.161727, -0.119034, -0.066854, -0.018463, 0.014217, 0.047420, 0.076211, 0.103883, 0.134441, 0.171920
	-0.229879, -0.188570, -0.139992, -0.085341, -0.040984, 0.002604, 0.042138, 0.073877, 0.104620, 0.133705, 0.171879
	-0.263766, -0.213518, -0.162008, -0.108459, -0.058518, -0.007646, 0.032310, 0.069869, 0.102956, 0.138912, 0.180918
	-0.296565, -0.242362, -0.188285, -0.127789, -0.071974, -0.019641, 0.027806, 0.070759, 0.105252, 0.142100, 0.184275
	-0.296242, -0.233747, -0.171416, -0.107834, -0.048348, 0.004540, 0.056827, 0.100566, 0.141602, 0.182628, 0.230079
	-0.281192, -0.228380, -0.164876, -0.101596, -0.030960, 0.023575, 0.079761, 0.121563, 0.171967, 0.216584, 0.265930
	-0.307454, -0.252371, -0.190633, -0.113183, -0.041936, 0.019598, 0.074971, 0.120663, 0.178367, 0.230549, 0.282552
	-0.324293, -0.258430, -0.193413, -0.119856, -0.045648, 0.021113, 0.080729, 0.133249, 0.192194, 0.246004, 0.297448
x_count = 11
y_count = 11
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 59.444
max_x = 240.556
min_y = 75.541944
max_y = 224.458048
=======================
Extruder max_extrude_ratio=4157.101129
mcu 'mcu': Starting serial connect
webhooks client 547900840880: New connection
webhooks client 547900840880: Client info {'program': 'Moonraker', 'version': 'v0.8.0-337-g546a17f'}
Loaded MCU 'mcu' 124 commands (v0.12.0-25-g99d7af87 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_i2c3=PA8,PC9 BUS_PINS_sdio=PC12,PD2,PC8,PC9,PC10,PC11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 CLOCK_FREQ=180000000 MCU=stm32f446xx PWM_MAX=255 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'rpi': Starting connect
Loaded MCU 'rpi' 118 commands (v0.12.0-25-g99d7af87 / gcc: (Debian 10.2.1-6) 10.2.1 20210110 binutils: (GNU Binutils for Debian) 2.35.2)
MCU 'rpi' config: ADC_MAX=4095 CLOCK_FREQ=50000000 MCU=linux PCA9685_MAX=4096 PWM_MAX=32768 STATS_SUMSQ_BASE=256
mcu 'sht36': Starting CAN connect
Created a socket
Loaded MCU 'sht36' 114 commands (v0.12.0-25-g99d7af87 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'sht36' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c1_PF1_PF0=PF1,PF0 BUS_PINS_i2c1a=PF1,PF0 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 CANBUS_FREQUENCY=500000 CLOCK_FREQ=48000000 INITIAL_PINS=!PC13 MCU=stm32f072xb PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PB8,PB9 RESERVE_PINS_crystal=PF0,PF1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu_temperature 'mcu' nominal base=-283.415638 slope=1348.148148
mcu_temperature 'sht36' nominal base=27.820587 slope=5.135038
mcu 'beacon': Starting serial connect
Loaded MCU 'beacon' 45 commands (Beacon 1.98.6 / )
MCU 'beacon' config: ADC_MAX=4095 BEACON_ADC_SMOOTH_COUNT=16 BEACON_REV=D CLOCK_FREQ=32000000 MCU=beacon STATS_SUMSQ_BASE=256
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'rpi' printer configuration...
Configured MCU 'rpi' (1024 moves)
Sending MCU 'sht36' printer configuration...
Configured MCU 'sht36' (904 moves)
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (10.0, 34.0)    | (10.0, 10.0)
  1   | (30.0, 34.0)    | (30.0, 10.0)
  2   | (50.0, 34.0)    | (50.0, 10.0)
  3   | (70.0, 34.0)    | (70.0, 10.0)
  4   | (90.0, 34.0)    | (90.0, 10.0)
  5   | (110.0, 34.0)   | (110.0, 10.0)
  6   | (130.0, 34.0)   | (130.0, 10.0)
  7   | (150.0, 34.0)   | (150.0, 10.0)
  8   | (170.0, 34.0)   | (170.0, 10.0)
  9   | (190.0, 34.0)   | (190.0, 10.0)
  10  | (210.0, 34.0)   | (210.0, 10.0)
  11  | (230.0, 34.0)   | (230.0, 10.0)
  12  | (250.0, 34.0)   | (250.0, 10.0)
  13  | (270.0, 34.0)   | (270.0, 10.0)
  14  | (290.0, 34.0)   | (290.0, 10.0)
  15  | (290.0, 50.4)   | (290.0, 26.4)
  16  | (270.0, 50.4)   | (270.0, 26.4)
  17  | (250.0, 50.4)   | (250.0, 26.4)
  18  | (230.0, 50.4)   | (230.0, 26.4)
  19  | (210.0, 50.4)   | (210.0, 26.4)
  20  | (190.0, 50.4)   | (190.0, 26.4)
  21  | (170.0, 50.4)   | (170.0, 26.4)
  22  | (150.0, 50.4)   | (150.0, 26.4)
  23  | (130.0, 50.4)   | (130.0, 26.4)
  24  | (110.0, 50.4)   | (110.0, 26.4)
  25  | (90.0, 50.4)    | (90.0, 26.4)
  26  | (70.0, 50.4)    | (70.0, 26.4)
  27  | (50.0, 50.4)    | (50.0, 26.4)
  28  | (30.0, 50.4)    | (30.0, 26.4)
  29  | (10.0, 50.4)    | (10.0, 26.4)
  30  | (10.0, 66.8)    | (10.0, 42.8)
  31  | (30.0, 66.8)    | (30.0, 42.8)
  32  | (50.0, 66.8)    | (50.0, 42.8)
  33  | (70.0, 66.8)    | (70.0, 42.8)
  34  | (90.0, 66.8)    | (90.0, 42.8)
  35  | (110.0, 66.8)   | (110.0, 42.8)
  36  | (130.0, 66.8)   | (130.0, 42.8)
  37  | (150.0, 66.8)   | (150.0, 42.8)
  38  | (170.0, 66.8)   | (170.0, 42.8)
  39  | (190.0, 66.8)   | (190.0, 42.8)
  40  | (210.0, 66.8)   | (210.0, 42.8)
  41  | (230.0, 66.8)   | (230.0, 42.8)
  42  | (250.0, 66.8)   | (250.0, 42.8)
  43  | (270.0, 66.8)   | (270.0, 42.8)
  44  | (290.0, 66.8)   | (290.0, 42.8)
  45  | (290.0, 83.3)   | (290.0, 59.3)
  46  | (270.0, 83.3)   | (270.0, 59.3)
  47  | (250.0, 83.3)   | (250.0, 59.3)
  48  | (230.0, 83.3)   | (230.0, 59.3)
  49  | (210.0, 83.3)   | (210.0, 59.3)
  50  | (190.0, 83.3)   | (190.0, 59.3)
  51  | (170.0, 83.3)   | (170.0, 59.3)
  52  | (150.0, 83.3)   | (150.0, 59.3)
  53  | (130.0, 83.3)   | (130.0, 59.3)
  54  | (110.0, 83.3)   | (110.0, 59.3)
  55  | (90.0, 83.3)    | (90.0, 59.3)
  56  | (70.0, 83.3)    | (70.0, 59.3)
  57  | (50.0, 83.3)    | (50.0, 59.3)
  58  | (30.0, 83.3)    | (30.0, 59.3)
  59  | (10.0, 83.3)    | (10.0, 59.3)
  60  | (10.0, 99.7)    | (10.0, 75.7)
  61  | (30.0, 99.7)    | (30.0, 75.7)
  62  | (50.0, 99.7)    | (50.0, 75.7)
  63  | (70.0, 99.7)    | (70.0, 75.7)
  64  | (90.0, 99.7)    | (90.0, 75.7)
  65  | (110.0, 99.7)   | (110.0, 75.7)
  66  | (130.0, 99.7)   | (130.0, 75.7)
  67  | (150.0, 99.7)   | (150.0, 75.7)
  68  | (170.0, 99.7)   | (170.0, 75.7)
  69  | (190.0, 99.7)   | (190.0, 75.7)
  70  | (210.0, 99.7)   | (210.0, 75.7)
  71  | (230.0, 99.7)   | (230.0, 75.7)
  72  | (250.0, 99.7)   | (250.0, 75.7)
  73  | (270.0, 99.7)   | (270.0, 75.7)
  74  | (290.0, 99.7)   | (290.0, 75.7)
  75  | (290.0, 116.1)  | (290.0, 92.1)
  76  | (270.0, 116.1)  | (270.0, 92.1)
  77  | (250.0, 116.1)  | (250.0, 92.1)
  78  | (230.0, 116.1)  | (230.0, 92.1)
  79  | (210.0, 116.1)  | (210.0, 92.1)
  80  | (190.0, 116.1)  | (190.0, 92.1)
  81  | (170.0, 116.1)  | (170.0, 92.1)
  82  | (150.0, 116.1)  | (150.0, 92.1)
  83  | (130.0, 116.1)  | (130.0, 92.1)
  84  | (110.0, 116.1)  | (110.0, 92.1)
  85  | (90.0, 116.1)   | (90.0, 92.1)
  86  | (70.0, 116.1)   | (70.0, 92.1)
  87  | (50.0, 116.1)   | (50.0, 92.1)
  88  | (30.0, 116.1)   | (30.0, 92.1)
  89  | (10.0, 116.1)   | (10.0, 92.1)
  90  | (10.0, 132.5)   | (10.0, 108.5)
  91  | (30.0, 132.5)   | (30.0, 108.5)
  92  | (50.0, 132.5)   | (50.0, 108.5)
  93  | (70.0, 132.5)   | (70.0, 108.5)
  94  | (90.0, 132.5)   | (90.0, 108.5)
  95  | (110.0, 132.5)  | (110.0, 108.5)
  96  | (130.0, 132.5)  | (130.0, 108.5)
  97  | (150.0, 132.5)  | (150.0, 108.5)
  98  | (170.0, 132.5)  | (170.0, 108.5)
  99  | (190.0, 132.5)  | (190.0, 108.5)
  100 | (210.0, 132.5)  | (210.0, 108.5)
  101 | (230.0, 132.5)  | (230.0, 108.5)
  102 | (250.0, 132.5)  | (250.0, 108.5)
  103 | (270.0, 132.5)  | (270.0, 108.5)
  104 | (290.0, 132.5)  | (290.0, 108.5)
  105 | (290.0, 148.9)  | (290.0, 124.9)
  106 | (270.0, 148.9)  | (270.0, 124.9)
  107 | (250.0, 148.9)  | (250.0, 124.9)
  108 | (230.0, 148.9)  | (230.0, 124.9)
  109 | (210.0, 148.9)  | (210.0, 124.9)
  110 | (190.0, 148.9)  | (190.0, 124.9)
  111 | (170.0, 148.9)  | (170.0, 124.9)
  112 | (150.0, 148.9)  | (150.0, 124.9)
  113 | (130.0, 148.9)  | (130.0, 124.9)
  114 | (110.0, 148.9)  | (110.0, 124.9)
  115 | (90.0, 148.9)   | (90.0, 124.9)
  116 | (70.0, 148.9)   | (70.0, 124.9)
  117 | (50.0, 148.9)   | (50.0, 124.9)
  118 | (30.0, 148.9)   | (30.0, 124.9)
  119 | (10.0, 148.9)   | (10.0, 124.9)
  120 | (10.0, 165.4)   | (10.0, 141.4)
  121 | (30.0, 165.4)   | (30.0, 141.4)
  122 | (50.0, 165.4)   | (50.0, 141.4)
  123 | (70.0, 165.4)   | (70.0, 141.4)
  124 | (90.0, 165.4)   | (90.0, 141.4)
  125 | (110.0, 165.4)  | (110.0, 141.4)
  126 | (130.0, 165.4)  | (130.0, 141.4)
  127 | (150.0, 165.4)  | (150.0, 141.4)
  128 | (170.0, 165.4)  | (170.0, 141.4)
  129 | (190.0, 165.4)  | (190.0, 141.4)
  130 | (210.0, 165.4)  | (210.0, 141.4)
  131 | (230.0, 165.4)  | (230.0, 141.4)
  132 | (250.0, 165.4)  | (250.0, 141.4)
  133 | (270.0, 165.4)  | (270.0, 141.4)
  134 | (290.0, 165.4)  | (290.0, 141.4)
  135 | (290.0, 181.8)  | (290.0, 157.8)
  136 | (270.0, 181.8)  | (270.0, 157.8)
  137 | (250.0, 181.8)  | (250.0, 157.8)
  138 | (230.0, 181.8)  | (230.0, 157.8)
  139 | (210.0, 181.8)  | (210.0, 157.8)
  140 | (190.0, 181.8)  | (190.0, 157.8)
  141 | (170.0, 181.8)  | (170.0, 157.8)
  142 | (150.0, 181.8)  | (150.0, 157.8)
  143 | (130.0, 181.8)  | (130.0, 157.8)
  144 | (110.0, 181.8)  | (110.0, 157.8)
  145 | (90.0, 181.8)   | (90.0, 157.8)
  146 | (70.0, 181.8)   | (70.0, 157.8)
  147 | (50.0, 181.8)   | (50.0, 157.8)
  148 | (30.0, 181.8)   | (30.0, 157.8)
  149 | (10.0, 181.8)   | (10.0, 157.8)
  150 | (10.0, 198.2)   | (10.0, 174.2)
  151 | (30.0, 198.2)   | (30.0, 174.2)
  152 | (50.0, 198.2)   | (50.0, 174.2)
  153 | (70.0, 198.2)   | (70.0, 174.2)
  154 | (90.0, 198.2)   | (90.0, 174.2)
  155 | (110.0, 198.2)  | (110.0, 174.2)
  156 | (130.0, 198.2)  | (130.0, 174.2)
  157 | (150.0, 198.2)  | (150.0, 174.2)
  158 | (170.0, 198.2)  | (170.0, 174.2)
  159 | (190.0, 198.2)  | (190.0, 174.2)
  160 | (210.0, 198.2)  | (210.0, 174.2)
  161 | (230.0, 198.2)  | (230.0, 174.2)
  162 | (250.0, 198.2)  | (250.0, 174.2)
  163 | (270.0, 198.2)  | (270.0, 174.2)
  164 | (290.0, 198.2)  | (290.0, 174.2)
  165 | (290.0, 214.6)  | (290.0, 190.6)
  166 | (270.0, 214.6)  | (270.0, 190.6)
  167 | (250.0, 214.6)  | (250.0, 190.6)
  168 | (230.0, 214.6)  | (230.0, 190.6)
  169 | (210.0, 214.6)  | (210.0, 190.6)
  170 | (190.0, 214.6)  | (190.0, 190.6)
  171 | (170.0, 214.6)  | (170.0, 190.6)
  172 | (150.0, 214.6)  | (150.0, 190.6)
  173 | (130.0, 214.6)  | (130.0, 190.6)
  174 | (110.0, 214.6)  | (110.0, 190.6)
  175 | (90.0, 214.6)   | (90.0, 190.6)
  176 | (70.0, 214.6)   | (70.0, 190.6)
  177 | (50.0, 214.6)   | (50.0, 190.6)
  178 | (30.0, 214.6)   | (30.0, 190.6)
  179 | (10.0, 214.6)   | (10.0, 190.6)
  180 | (10.0, 231.0)   | (10.0, 207.0)
  181 | (30.0, 231.0)   | (30.0, 207.0)
  182 | (50.0, 231.0)   | (50.0, 207.0)
  183 | (70.0, 231.0)   | (70.0, 207.0)
  184 | (90.0, 231.0)   | (90.0, 207.0)
  185 | (110.0, 231.0)  | (110.0, 207.0)
  186 | (130.0, 231.0)  | (130.0, 207.0)
  187 | (150.0, 231.0)  | (150.0, 207.0)
  188 | (170.0, 231.0)  | (170.0, 207.0)
  189 | (190.0, 231.0)  | (190.0, 207.0)
  190 | (210.0, 231.0)  | (210.0, 207.0)
  191 | (230.0, 231.0)  | (230.0, 207.0)
  192 | (250.0, 231.0)  | (250.0, 207.0)
  193 | (270.0, 231.0)  | (270.0, 207.0)
  194 | (290.0, 231.0)  | (290.0, 207.0)
  195 | (290.0, 247.5)  | (290.0, 223.5)
  196 | (270.0, 247.5)  | (270.0, 223.5)
  197 | (250.0, 247.5)  | (250.0, 223.5)
  198 | (230.0, 247.5)  | (230.0, 223.5)
  199 | (210.0, 247.5)  | (210.0, 223.5)
  200 | (190.0, 247.5)  | (190.0, 223.5)
  201 | (170.0, 247.5)  | (170.0, 223.5)
  202 | (150.0, 247.5)  | (150.0, 223.5)
  203 | (130.0, 247.5)  | (130.0, 223.5)
  204 | (110.0, 247.5)  | (110.0, 223.5)
  205 | (90.0, 247.5)   | (90.0, 223.5)
  206 | (70.0, 247.5)   | (70.0, 223.5)
  207 | (50.0, 247.5)   | (50.0, 223.5)
  208 | (30.0, 247.5)   | (30.0, 223.5)
  209 | (10.0, 247.5)   | (10.0, 223.5)
  210 | (10.0, 263.9)   | (10.0, 239.9)
  211 | (30.0, 263.9)   | (30.0, 239.9)
  212 | (50.0, 263.9)   | (50.0, 239.9)
  213 | (70.0, 263.9)   | (70.0, 239.9)
  214 | (90.0, 263.9)   | (90.0, 239.9)
  215 | (110.0, 263.9)  | (110.0, 239.9)
  216 | (130.0, 263.9)  | (130.0, 239.9)
  217 | (150.0, 263.9)  | (150.0, 239.9)
  218 | (170.0, 263.9)  | (170.0, 239.9)
  219 | (190.0, 263.9)  | (190.0, 239.9)
  220 | (210.0, 263.9)  | (210.0, 239.9)
  221 | (230.0, 263.9)  | (230.0, 239.9)
  222 | (250.0, 263.9)  | (250.0, 239.9)
  223 | (270.0, 263.9)  | (270.0, 239.9)
  224 | (290.0, 263.9)  | (290.0, 239.9)
beacon: loaded fmin=2963903.55 from nvm
beacon: loaded fmin_temp=20.66 from nvm
beacon: built tempco model version 0 {'amfg': 1.0, 'tcc': -2.1429828e-05, 'tcfl': -1.8980091e-10, 'tctl': 3.673837e-16, 'fmin': 2963903.546333313, 'fmin_temp': 20.657632580403686}
Sending MCU 'beacon' printer configuration...
Configured MCU 'beacon' (0 moves)
Starting heater checks for extruder
Stats 1041963.8: gcodein=0  mcu: mcu_awake=0.018 mcu_task_avg=0.000023 mcu_task_stddev=0.000080 bytes_write=6909 bytes_read=6854 bytes_retransmit=9 bytes_invalid=0 send_seq=327 receive_seq=326 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=551 freq=180002616 rpi: mcu_awake=0.003 mcu_task_avg=0.000019 mcu_task_stddev=0.000013 bytes_write=834 bytes_read=5463 bytes_retransmit=0 bytes_invalid=0 send_seq=114 receive_seq=114 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998506 adj=49997278 sht36: mcu_awake=0.016 mcu_task_avg=0.000021 mcu_task_stddev=0.000033 bytes_write=1329 bytes_read=4730 bytes_retransmit=0 bytes_invalid=0 send_seq=142 receive_seq=142 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=48000772 adj=48000044  Spider: temp=46.5 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=345 bytes_read=2173 bytes_retransmit=0 bytes_invalid=0 send_seq=58 receive_seq=58 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=32000588 adj=32000364 coil_temp=28.6 refs=0 mcu_temp=29.26 supply_voltage=3.002 sysload=0.26 cputime=6.313 memavail=3296476 print_time=383.119 buffer_time=2.873 print_stall=0 extruder: target=0 temp=32.3 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 547900840880
webhooks: registering remote method 'reboot_machine' for connection id: 547900840880
webhooks: registering remote method 'pause_job_queue' for connection id: 547900840880
webhooks: registering remote method 'start_job_queue' for connection id: 547900840880
webhooks: registering remote method 'timelapse_newframe' for connection id: 547900840880
webhooks: registering remote method 'timelapse_saveFrames' for connection id: 547900840880
webhooks: registering remote method 'timelapse_render' for connection id: 547900840880
Stats 1041964.8: gcodein=0  mcu: mcu_awake=0.018 mcu_task_avg=0.000023 mcu_task_stddev=0.000080 bytes_write=7566 bytes_read=7110 bytes_retransmit=9 bytes_invalid=0 send_seq=342 receive_seq=342 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002244 rpi: mcu_awake=0.003 mcu_task_avg=0.000019 mcu_task_stddev=0.000013 bytes_write=840 bytes_read=5479 bytes_retransmit=0 bytes_invalid=0 send_seq=115 receive_seq=115 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998651 adj=49999618 sht36: mcu_awake=0.016 mcu_task_avg=0.000021 mcu_task_stddev=0.000033 bytes_write=1652 bytes_read=5051 bytes_retransmit=0 bytes_invalid=0 send_seq=166 receive_seq=166 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=48000512 adj=48000236  Spider: temp=45.6 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=351 bytes_read=2529 bytes_retransmit=0 bytes_invalid=0 send_seq=59 receive_seq=59 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999702 adj=32000002 coil_temp=28.6 refs=0 mcu_temp=29.27 supply_voltage=3.002 sysload=0.26 cputime=6.395 memavail=3294988 print_time=383.299 buffer_time=2.052 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041965.8: gcodein=0  mcu: mcu_awake=0.018 mcu_task_avg=0.000023 mcu_task_stddev=0.000080 bytes_write=7572 bytes_read=7248 bytes_retransmit=9 bytes_invalid=0 send_seq=343 receive_seq=343 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002200 rpi: mcu_awake=0.003 mcu_task_avg=0.000019 mcu_task_stddev=0.000013 bytes_write=846 bytes_read=5495 bytes_retransmit=0 bytes_invalid=0 send_seq=116 receive_seq=116 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998816 adj=50000104 sht36: mcu_awake=0.016 mcu_task_avg=0.000021 mcu_task_stddev=0.000033 bytes_write=1901 bytes_read=5330 bytes_retransmit=0 bytes_invalid=0 send_seq=185 receive_seq=185 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=47999962 adj=47999965  Spider: temp=45.8 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=357 bytes_read=2885 bytes_retransmit=0 bytes_invalid=0 send_seq=60 receive_seq=60 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999533 adj=31998607 coil_temp=28.6 refs=0 mcu_temp=29.27 supply_voltage=3.002 sysload=0.26 cputime=6.434 memavail=3295240 print_time=384.793 buffer_time=2.546 print_stall=0 extruder: target=0 temp=32.2 pwm=0.000
Stats 1041966.8: gcodein=0  mcu: mcu_awake=0.018 mcu_task_avg=0.000023 mcu_task_stddev=0.000080 bytes_write=7578 bytes_read=7435 bytes_retransmit=9 bytes_invalid=0 send_seq=344 receive_seq=344 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002333 rpi: mcu_awake=0.003 mcu_task_avg=0.000019 mcu_task_stddev=0.000013 bytes_write=852 bytes_read=5511 bytes_retransmit=0 bytes_invalid=0 send_seq=117 receive_seq=117 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998816 adj=50000225 sht36: mcu_awake=0.016 mcu_task_avg=0.000021 mcu_task_stddev=0.000033 bytes_write=2015 bytes_read=5505 bytes_retransmit=0 bytes_invalid=0 send_seq=194 receive_seq=194 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=47999786 adj=47998823  Spider: temp=45.7 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=363 bytes_read=3241 bytes_retransmit=0 bytes_invalid=0 send_seq=61 receive_seq=61 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999474 adj=31998375 coil_temp=28.6 refs=0 mcu_temp=29.28 supply_voltage=3.002 sysload=0.26 cputime=6.469 memavail=3295324 print_time=386.213 buffer_time=2.966 print_stall=0 extruder: target=0 temp=32.3 pwm=0.000
Stats 1041967.8: gcodein=0  mcu: mcu_awake=0.018 mcu_task_avg=0.000023 mcu_task_stddev=0.000080 bytes_write=7584 bytes_read=7583 bytes_retransmit=9 bytes_invalid=0 send_seq=345 receive_seq=345 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002578 rpi: mcu_awake=0.003 mcu_task_avg=0.000019 mcu_task_stddev=0.000013 bytes_write=858 bytes_read=5527 bytes_retransmit=0 bytes_invalid=0 send_seq=118 receive_seq=118 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999001 adj=49999465 sht36: mcu_awake=0.016 mcu_task_avg=0.000021 mcu_task_stddev=0.000033 bytes_write=2129 bytes_read=5695 bytes_retransmit=0 bytes_invalid=0 send_seq=203 receive_seq=203 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=47999744 adj=47998548  Spider: temp=45.7 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=369 bytes_read=3597 bytes_retransmit=0 bytes_invalid=0 send_seq=62 receive_seq=62 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999424 adj=31998455 coil_temp=28.6 refs=0 mcu_temp=29.28 supply_voltage=3.002 sysload=0.24 cputime=6.536 memavail=3298112 print_time=386.293 buffer_time=2.045 print_stall=0 extruder: target=0 temp=32.3 pwm=0.000
Stats 1041968.8: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000044 mcu_task_stddev=0.000242 bytes_write=7590 bytes_read=7747 bytes_retransmit=9 bytes_invalid=0 send_seq=346 receive_seq=346 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002952 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000011 bytes_write=864 bytes_read=5556 bytes_retransmit=0 bytes_invalid=0 send_seq=119 receive_seq=119 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998981 adj=49999727 sht36: mcu_awake=0.010 mcu_task_avg=0.000032 mcu_task_stddev=0.000053 bytes_write=2189 bytes_read=5863 bytes_retransmit=0 bytes_invalid=0 send_seq=208 receive_seq=208 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=47999730 adj=47998304  Spider: temp=45.7 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=375 bytes_read=3953 bytes_retransmit=0 bytes_invalid=0 send_seq=63 receive_seq=63 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999486 adj=31998249 coil_temp=28.6 refs=0 mcu_temp=29.28 supply_voltage=3.002 sysload=0.24 cputime=6.601 memavail=3293588 print_time=387.313 buffer_time=2.065 print_stall=0 extruder: target=0 temp=32.2 pwm=0.000
Unknown command:"_SET_TIMELAPSE_SETUP"
Unknown command:"HYPERLAPSE"
Stats 1041969.8: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000044 mcu_task_stddev=0.000242 bytes_write=8812 bytes_read=8966 bytes_retransmit=9 bytes_invalid=0 send_seq=406 receive_seq=406 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002771 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000011 bytes_write=870 bytes_read=5572 bytes_retransmit=0 bytes_invalid=0 send_seq=120 receive_seq=120 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998963 adj=49999394 sht36: mcu_awake=0.010 mcu_task_avg=0.000032 mcu_task_stddev=0.000053 bytes_write=2249 bytes_read=6002 bytes_retransmit=0 bytes_invalid=0 send_seq=213 receive_seq=213 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=47999712 adj=47998000  Spider: temp=45.7 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=381 bytes_read=4309 bytes_retransmit=0 bytes_invalid=0 send_seq=64 receive_seq=64 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999478 adj=31998220 coil_temp=28.6 refs=0 mcu_temp=29.28 supply_voltage=3.002 sysload=0.24 cputime=6.710 memavail=3291556 print_time=388.310 buffer_time=2.061 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1041970.8: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000044 mcu_task_stddev=0.000242 bytes_write=8952 bytes_read=9262 bytes_retransmit=9 bytes_invalid=0 send_seq=415 receive_seq=415 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002613 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000011 bytes_write=876 bytes_read=5588 bytes_retransmit=0 bytes_invalid=0 send_seq=121 receive_seq=121 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998945 adj=49999498 sht36: mcu_awake=0.010 mcu_task_avg=0.000032 mcu_task_stddev=0.000053 bytes_write=2369 bytes_read=6228 bytes_retransmit=0 bytes_invalid=0 send_seq=226 receive_seq=226 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=47999687 adj=47998101  Spider: temp=45.8 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=387 bytes_read=4665 bytes_retransmit=0 bytes_invalid=0 send_seq=65 receive_seq=65 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999440 adj=31998298 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.24 cputime=6.755 memavail=3289436 print_time=388.310 buffer_time=1.061 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041971.8: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000044 mcu_task_stddev=0.000242 bytes_write=9287 bytes_read=9568 bytes_retransmit=9 bytes_invalid=0 send_seq=426 receive_seq=426 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002649 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000011 bytes_write=882 bytes_read=5604 bytes_retransmit=0 bytes_invalid=0 send_seq=122 receive_seq=122 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998950 adj=49999584 sht36: mcu_awake=0.010 mcu_task_avg=0.000032 mcu_task_stddev=0.000053 bytes_write=2447 bytes_read=6412 bytes_retransmit=0 bytes_invalid=0 send_seq=234 receive_seq=234 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999690 adj=47998163  Spider: temp=45.7 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=393 bytes_read=5021 bytes_retransmit=0 bytes_invalid=0 send_seq=66 receive_seq=66 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999429 adj=31998279 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.24 cputime=6.798 memavail=3292252 print_time=388.310 buffer_time=0.060 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
TMC 'stepper_x' reports GSTAT:      00000002 drv_err=1(ErrorShutdown!)
TMC 'stepper_x' reports GSTAT:      00000000
TMC 'stepper_y' reports DRV_STATUS: c41f0011 sg_result=17 csactual=31 otpw=1(OvertempWarning!) olb=1(OpenLoad_B!) stst=1
Stats 1041972.8: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000044 mcu_task_stddev=0.000242 bytes_write=11143 bytes_read=11255 bytes_retransmit=9 bytes_invalid=0 send_seq=553 receive_seq=553 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002492 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000011 bytes_write=888 bytes_read=5620 bytes_retransmit=0 bytes_invalid=0 send_seq=123 receive_seq=123 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998973 adj=49999565 sht36: mcu_awake=0.010 mcu_task_avg=0.000032 mcu_task_stddev=0.000053 bytes_write=2453 bytes_read=6515 bytes_retransmit=0 bytes_invalid=0 send_seq=235 receive_seq=235 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999672 adj=47998141  Spider: temp=45.8 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=399 bytes_read=5377 bytes_retransmit=0 bytes_invalid=0 send_seq=67 receive_seq=67 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999425 adj=31998228 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.22 cputime=6.882 memavail=3297836 print_time=388.932 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
TMC 'stepper_x' reports DRV_STATUS: 851f0039 sg_result=57 csactual=31 stallguard=1 otpw=1(OvertempWarning!) stst=1
Stats 1041973.8: gcodein=0  mcu: mcu_awake=0.009 mcu_task_avg=0.000012 mcu_task_stddev=0.000018 bytes_write=11828 bytes_read=11704 bytes_retransmit=9 bytes_invalid=0 send_seq=579 receive_seq=579 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002430 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000010 bytes_write=894 bytes_read=5649 bytes_retransmit=0 bytes_invalid=0 send_seq=124 receive_seq=124 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999060 adj=49999815 sht36: mcu_awake=0.005 mcu_task_avg=0.000028 mcu_task_stddev=0.000045 bytes_write=2459 bytes_read=6648 bytes_retransmit=0 bytes_invalid=0 send_seq=236 receive_seq=236 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999710 adj=47998234  Spider: temp=46.0 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=405 bytes_read=5733 bytes_retransmit=0 bytes_invalid=0 send_seq=68 receive_seq=68 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999410 adj=31998318 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.22 cputime=6.937 memavail=3299128 print_time=388.932 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041974.8: gcodein=0  mcu: mcu_awake=0.009 mcu_task_avg=0.000012 mcu_task_stddev=0.000018 bytes_write=12022 bytes_read=12082 bytes_retransmit=9 bytes_invalid=0 send_seq=594 receive_seq=594 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002491 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000010 bytes_write=900 bytes_read=5665 bytes_retransmit=0 bytes_invalid=0 send_seq=125 receive_seq=125 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999089 adj=50000011 sht36: mcu_awake=0.005 mcu_task_avg=0.000028 mcu_task_stddev=0.000045 bytes_write=2465 bytes_read=6765 bytes_retransmit=0 bytes_invalid=0 send_seq=237 receive_seq=237 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999726 adj=47998578  Spider: temp=45.8 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=411 bytes_read=6089 bytes_retransmit=0 bytes_invalid=0 send_seq=69 receive_seq=69 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999471 adj=31998413 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.22 cputime=7.012 memavail=3296888 print_time=388.932 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041975.8: gcodein=0  mcu: mcu_awake=0.009 mcu_task_avg=0.000012 mcu_task_stddev=0.000018 bytes_write=12211 bytes_read=12499 bytes_retransmit=9 bytes_invalid=0 send_seq=608 receive_seq=608 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002525 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000010 bytes_write=906 bytes_read=5681 bytes_retransmit=0 bytes_invalid=0 send_seq=126 receive_seq=126 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999160 adj=49999654 sht36: mcu_awake=0.005 mcu_task_avg=0.000028 mcu_task_stddev=0.000045 bytes_write=2471 bytes_read=6868 bytes_retransmit=0 bytes_invalid=0 send_seq=238 receive_seq=238 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999743 adj=47998691  Spider: temp=45.6 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=417 bytes_read=6445 bytes_retransmit=0 bytes_invalid=0 send_seq=70 receive_seq=70 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999464 adj=31998752 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.22 cputime=7.080 memavail=3296188 print_time=388.932 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1041976.8: gcodein=0  mcu: mcu_awake=0.009 mcu_task_avg=0.000012 mcu_task_stddev=0.000018 bytes_write=12405 bytes_read=12877 bytes_retransmit=9 bytes_invalid=0 send_seq=623 receive_seq=623 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002518 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000010 bytes_write=912 bytes_read=5697 bytes_retransmit=0 bytes_invalid=0 send_seq=127 receive_seq=127 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999172 adj=49999617 sht36: mcu_awake=0.005 mcu_task_avg=0.000028 mcu_task_stddev=0.000045 bytes_write=2477 bytes_read=6986 bytes_retransmit=0 bytes_invalid=0 send_seq=239 receive_seq=239 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999779 adj=47998816  Spider: temp=45.5 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=423 bytes_read=6801 bytes_retransmit=0 bytes_invalid=0 send_seq=71 receive_seq=71 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999470 adj=31998764 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.22 cputime=7.149 memavail=3295516 print_time=388.932 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041977.8: gcodein=0  mcu: mcu_awake=0.009 mcu_task_avg=0.000012 mcu_task_stddev=0.000018 bytes_write=12599 bytes_read=13255 bytes_retransmit=9 bytes_invalid=0 send_seq=638 receive_seq=638 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002521 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000010 bytes_write=918 bytes_read=5713 bytes_retransmit=0 bytes_invalid=0 send_seq=128 receive_seq=128 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999173 adj=49999398 sht36: mcu_awake=0.005 mcu_task_avg=0.000028 mcu_task_stddev=0.000045 bytes_write=2483 bytes_read=7103 bytes_retransmit=0 bytes_invalid=0 send_seq=240 receive_seq=240 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999769 adj=47999055  Spider: temp=45.6 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=429 bytes_read=7157 bytes_retransmit=0 bytes_invalid=0 send_seq=72 receive_seq=72 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999488 adj=31998860 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.20 cputime=7.218 memavail=3296444 print_time=388.932 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041978.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=12793 bytes_read=13692 bytes_retransmit=9 bytes_invalid=0 send_seq=653 receive_seq=653 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002523 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000019 bytes_write=924 bytes_read=5742 bytes_retransmit=0 bytes_invalid=0 send_seq=129 receive_seq=129 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999181 adj=49999169 sht36: mcu_awake=0.005 mcu_task_avg=0.000028 mcu_task_stddev=0.000045 bytes_write=2489 bytes_read=7206 bytes_retransmit=0 bytes_invalid=0 send_seq=241 receive_seq=241 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999758 adj=47999015  Spider: temp=45.3 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=435 bytes_read=7513 bytes_retransmit=0 bytes_invalid=0 send_seq=73 receive_seq=73 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999478 adj=31998981 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.20 cputime=7.287 memavail=3299248 print_time=388.932 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1041979.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=12987 bytes_read=14070 bytes_retransmit=9 bytes_invalid=0 send_seq=668 receive_seq=668 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002499 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000019 bytes_write=930 bytes_read=5758 bytes_retransmit=0 bytes_invalid=0 send_seq=130 receive_seq=130 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999155 adj=49999031 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2495 bytes_read=7338 bytes_retransmit=0 bytes_invalid=0 send_seq=242 receive_seq=242 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999756 adj=47998976  Spider: temp=45.2 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=441 bytes_read=7869 bytes_retransmit=0 bytes_invalid=0 send_seq=74 receive_seq=74 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999467 adj=31998944 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.20 cputime=7.347 memavail=3293956 print_time=388.932 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.8 pwm=0.000
Stats 1041980.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=14152 bytes_read=14549 bytes_retransmit=9 bytes_invalid=0 send_seq=701 receive_seq=701 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002418 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000019 bytes_write=936 bytes_read=5774 bytes_retransmit=0 bytes_invalid=0 send_seq=131 receive_seq=131 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999136 adj=49998789 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2501 bytes_read=7455 bytes_retransmit=0 bytes_invalid=0 send_seq=243 receive_seq=243 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999730 adj=47999029  Spider: temp=45.3 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.0 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=447 bytes_read=8225 bytes_retransmit=0 bytes_invalid=0 send_seq=75 receive_seq=75 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999458 adj=31998933 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.20 cputime=7.395 memavail=3293016 print_time=397.250 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041981.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=14776 bytes_read=15243 bytes_retransmit=9 bytes_invalid=0 send_seq=736 receive_seq=736 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002381 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000019 bytes_write=942 bytes_read=5790 bytes_retransmit=0 bytes_invalid=0 send_seq=132 receive_seq=132 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999115 adj=49998706 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2507 bytes_read=7558 bytes_retransmit=0 bytes_invalid=0 send_seq=244 receive_seq=244 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999715 adj=47999031  Spider: temp=45.2 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=453 bytes_read=8581 bytes_retransmit=0 bytes_invalid=0 send_seq=76 receive_seq=76 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999455 adj=31998995 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.20 cputime=7.449 memavail=3296548 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041982.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=15383 bytes_read=15661 bytes_retransmit=9 bytes_invalid=0 send_seq=759 receive_seq=759 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002428 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000019 bytes_write=948 bytes_read=5806 bytes_retransmit=0 bytes_invalid=0 send_seq=133 receive_seq=133 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999095 adj=49998601 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2513 bytes_read=7676 bytes_retransmit=0 bytes_invalid=0 send_seq=245 receive_seq=245 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999701 adj=47999014  Spider: temp=45.1 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=465 bytes_read=8953 bytes_retransmit=0 bytes_invalid=0 send_seq=78 receive_seq=78 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999433 adj=31999026 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.27 cputime=7.488 memavail=3298788 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041983.8: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000014 mcu_task_stddev=0.000026 bytes_write=15577 bytes_read=16054 bytes_retransmit=9 bytes_invalid=0 send_seq=774 receive_seq=774 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002401 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=954 bytes_read=5835 bytes_retransmit=0 bytes_invalid=0 send_seq=134 receive_seq=134 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999078 adj=49998366 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2519 bytes_read=7793 bytes_retransmit=0 bytes_invalid=0 send_seq=246 receive_seq=246 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999688 adj=47998875  Spider: temp=45.1 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=471 bytes_read=9309 bytes_retransmit=0 bytes_invalid=0 send_seq=79 receive_seq=79 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999423 adj=31998852 coil_temp=28.6 refs=0 mcu_temp=29.29 supply_voltage=3.002 sysload=0.27 cputime=7.526 memavail=3301016 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1041984.8: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000014 mcu_task_stddev=0.000026 bytes_write=15771 bytes_read=16476 bytes_retransmit=9 bytes_invalid=0 send_seq=789 receive_seq=789 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002382 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=960 bytes_read=5851 bytes_retransmit=0 bytes_invalid=0 send_seq=135 receive_seq=135 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999070 adj=49998326 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2525 bytes_read=7910 bytes_retransmit=0 bytes_invalid=0 send_seq=247 receive_seq=247 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999678 adj=47998887  Spider: temp=45.1 raspberry_pi: temp=40.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=477 bytes_read=9665 bytes_retransmit=0 bytes_invalid=0 send_seq=80 receive_seq=80 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999417 adj=31998860 coil_temp=28.6 refs=0 mcu_temp=29.30 supply_voltage=3.002 sysload=0.27 cputime=7.576 memavail=3300248 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1041985.8: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000014 mcu_task_stddev=0.000026 bytes_write=15965 bytes_read=16854 bytes_retransmit=9 bytes_invalid=0 send_seq=804 receive_seq=804 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002408 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=966 bytes_read=5867 bytes_retransmit=0 bytes_invalid=0 send_seq=136 receive_seq=136 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999096 adj=49998332 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2531 bytes_read=8028 bytes_retransmit=0 bytes_invalid=0 send_seq=248 receive_seq=248 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999697 adj=47998900  Spider: temp=44.9 raspberry_pi: temp=39.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=483 bytes_read=10021 bytes_retransmit=0 bytes_invalid=0 send_seq=81 receive_seq=81 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999415 adj=31998882 coil_temp=28.6 refs=0 mcu_temp=29.30 supply_voltage=3.002 sysload=0.27 cputime=7.651 memavail=3300248 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1041986.8: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000014 mcu_task_stddev=0.000026 bytes_write=16149 bytes_read=17222 bytes_retransmit=9 bytes_invalid=0 send_seq=817 receive_seq=817 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002395 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=972 bytes_read=5883 bytes_retransmit=0 bytes_invalid=0 send_seq=137 receive_seq=137 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999126 adj=49998471 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2537 bytes_read=8145 bytes_retransmit=0 bytes_invalid=0 send_seq=249 receive_seq=249 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999700 adj=47999011  Spider: temp=45.0 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=489 bytes_read=10377 bytes_retransmit=0 bytes_invalid=0 send_seq=82 receive_seq=82 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999428 adj=31998865 coil_temp=28.7 refs=0 mcu_temp=29.30 supply_voltage=3.002 sysload=0.27 cputime=7.720 memavail=3299996 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.8 pwm=0.000
Stats 1041987.8: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000014 mcu_task_stddev=0.000026 bytes_write=16338 bytes_read=17639 bytes_retransmit=9 bytes_invalid=0 send_seq=831 receive_seq=831 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002388 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=978 bytes_read=5899 bytes_retransmit=0 bytes_invalid=0 send_seq=138 receive_seq=138 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999144 adj=49998682 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2543 bytes_read=8248 bytes_retransmit=0 bytes_invalid=0 send_seq=250 receive_seq=250 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999707 adj=47999064  Spider: temp=44.9 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=495 bytes_read=10733 bytes_retransmit=0 bytes_invalid=0 send_seq=83 receive_seq=83 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999425 adj=31998998 coil_temp=28.7 refs=0 mcu_temp=29.32 supply_voltage=3.002 sysload=0.72 cputime=7.791 memavail=3299240 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041988.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=16532 bytes_read=18029 bytes_retransmit=9 bytes_invalid=0 send_seq=846 receive_seq=846 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002408 rpi: mcu_awake=0.000 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=984 bytes_read=5928 bytes_retransmit=0 bytes_invalid=0 send_seq=139 receive_seq=139 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999150 adj=49998767 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2549 bytes_read=8366 bytes_retransmit=0 bytes_invalid=0 send_seq=251 receive_seq=251 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999706 adj=47999121  Spider: temp=44.9 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.0 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=501 bytes_read=11089 bytes_retransmit=0 bytes_invalid=0 send_seq=84 receive_seq=84 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999426 adj=31998985 coil_temp=28.7 refs=0 mcu_temp=29.32 supply_voltage=3.002 sysload=0.72 cputime=7.861 memavail=3298512 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041989.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=16721 bytes_read=18392 bytes_retransmit=9 bytes_invalid=0 send_seq=860 receive_seq=860 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002417 rpi: mcu_awake=0.000 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=990 bytes_read=5944 bytes_retransmit=0 bytes_invalid=0 send_seq=140 receive_seq=140 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999157 adj=49998698 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2555 bytes_read=8497 bytes_retransmit=0 bytes_invalid=0 send_seq=252 receive_seq=252 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999701 adj=47999065  Spider: temp=44.7 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=507 bytes_read=11445 bytes_retransmit=0 bytes_invalid=0 send_seq=85 receive_seq=85 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999425 adj=31998973 coil_temp=28.7 refs=0 mcu_temp=29.32 supply_voltage=3.002 sysload=0.72 cputime=7.931 memavail=3298512 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041990.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=16915 bytes_read=18811 bytes_retransmit=9 bytes_invalid=0 send_seq=875 receive_seq=875 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002418 rpi: mcu_awake=0.000 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=996 bytes_read=5960 bytes_retransmit=0 bytes_invalid=0 send_seq=141 receive_seq=141 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999156 adj=49998677 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2561 bytes_read=8600 bytes_retransmit=0 bytes_invalid=0 send_seq=253 receive_seq=253 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999699 adj=47999008  Spider: temp=44.7 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=513 bytes_read=11801 bytes_retransmit=0 bytes_invalid=0 send_seq=86 receive_seq=86 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999426 adj=31998960 coil_temp=28.7 refs=0 mcu_temp=29.33 supply_voltage=3.002 sysload=0.72 cputime=8.003 memavail=3298512 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1041991.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=17104 bytes_read=19184 bytes_retransmit=9 bytes_invalid=0 send_seq=889 receive_seq=889 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002426 rpi: mcu_awake=0.000 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1002 bytes_read=5976 bytes_retransmit=0 bytes_invalid=0 send_seq=142 receive_seq=142 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999164 adj=49998621 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2567 bytes_read=8718 bytes_retransmit=0 bytes_invalid=0 send_seq=254 receive_seq=254 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999708 adj=47999005  Spider: temp=44.5 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=519 bytes_read=12157 bytes_retransmit=0 bytes_invalid=0 send_seq=87 receive_seq=87 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999423 adj=31998972 coil_temp=28.7 refs=0 mcu_temp=29.34 supply_voltage=3.002 sysload=0.72 cputime=8.075 memavail=3298512 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041992.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=17298 bytes_read=19562 bytes_retransmit=9 bytes_invalid=0 send_seq=904 receive_seq=904 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002472 rpi: mcu_awake=0.000 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1008 bytes_read=5992 bytes_retransmit=0 bytes_invalid=0 send_seq=143 receive_seq=143 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999164 adj=49998629 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2573 bytes_read=8835 bytes_retransmit=0 bytes_invalid=0 send_seq=255 receive_seq=255 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999707 adj=47999072  Spider: temp=44.7 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=525 bytes_read=12513 bytes_retransmit=0 bytes_invalid=0 send_seq=88 receive_seq=88 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999419 adj=31998945 coil_temp=28.7 refs=0 mcu_temp=29.35 supply_voltage=3.002 sysload=0.83 cputime=8.151 memavail=3298512 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.7 pwm=0.000
Stats 1041993.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=17492 bytes_read=19999 bytes_retransmit=9 bytes_invalid=0 send_seq=919 receive_seq=919 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002443 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1014 bytes_read=6021 bytes_retransmit=0 bytes_invalid=0 send_seq=144 receive_seq=144 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999165 adj=49998496 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2579 bytes_read=8938 bytes_retransmit=0 bytes_invalid=0 send_seq=256 receive_seq=256 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999703 adj=47998967  Spider: temp=44.7 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=531 bytes_read=12869 bytes_retransmit=0 bytes_invalid=0 send_seq=89 receive_seq=89 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999413 adj=31998866 coil_temp=28.7 refs=0 mcu_temp=29.35 supply_voltage=3.002 sysload=0.83 cputime=8.203 memavail=3298264 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.7 pwm=0.000
Stats 1041994.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=17686 bytes_read=20377 bytes_retransmit=9 bytes_invalid=0 send_seq=934 receive_seq=934 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002422 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1020 bytes_read=6037 bytes_retransmit=0 bytes_invalid=0 send_seq=145 receive_seq=145 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999149 adj=49998565 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2585 bytes_read=9070 bytes_retransmit=0 bytes_invalid=0 send_seq=257 receive_seq=257 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999697 adj=47999016  Spider: temp=44.3 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=537 bytes_read=13225 bytes_retransmit=0 bytes_invalid=0 send_seq=90 receive_seq=90 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999407 adj=31998887 coil_temp=28.7 refs=0 mcu_temp=29.34 supply_voltage=3.002 sysload=0.83 cputime=8.238 memavail=3298264 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1041995.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=17880 bytes_read=20755 bytes_retransmit=9 bytes_invalid=0 send_seq=949 receive_seq=949 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002405 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1026 bytes_read=6053 bytes_retransmit=0 bytes_invalid=0 send_seq=146 receive_seq=146 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999136 adj=49998461 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2591 bytes_read=9187 bytes_retransmit=0 bytes_invalid=0 send_seq=258 receive_seq=258 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999692 adj=47999019  Spider: temp=44.6 raspberry_pi: temp=39.9 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=543 bytes_read=13581 bytes_retransmit=0 bytes_invalid=0 send_seq=91 receive_seq=91 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999404 adj=31998892 coil_temp=28.7 refs=0 mcu_temp=29.35 supply_voltage=3.002 sysload=0.83 cputime=8.273 memavail=3298264 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1041996.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=18074 bytes_read=21177 bytes_retransmit=9 bytes_invalid=0 send_seq=964 receive_seq=964 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002393 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1032 bytes_read=6069 bytes_retransmit=0 bytes_invalid=0 send_seq=147 receive_seq=147 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999126 adj=49998394 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2597 bytes_read=9290 bytes_retransmit=0 bytes_invalid=0 send_seq=259 receive_seq=259 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999686 adj=47999026  Spider: temp=44.4 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=549 bytes_read=13937 bytes_retransmit=0 bytes_invalid=0 send_seq=92 receive_seq=92 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999402 adj=31998915 coil_temp=28.7 refs=0 mcu_temp=29.34 supply_voltage=3.002 sysload=0.83 cputime=8.309 memavail=3298264 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041997.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=18268 bytes_read=21555 bytes_retransmit=9 bytes_invalid=0 send_seq=979 receive_seq=979 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002377 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1038 bytes_read=6085 bytes_retransmit=0 bytes_invalid=0 send_seq=148 receive_seq=148 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999117 adj=49998357 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2603 bytes_read=9408 bytes_retransmit=0 bytes_invalid=0 send_seq=260 receive_seq=260 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999681 adj=47999010  Spider: temp=44.3 raspberry_pi: temp=40.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=555 bytes_read=14293 bytes_retransmit=0 bytes_invalid=0 send_seq=93 receive_seq=93 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999401 adj=31998933 coil_temp=28.7 refs=0 mcu_temp=29.34 supply_voltage=3.002 sysload=0.84 cputime=8.345 memavail=3298264 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1041998.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=18462 bytes_read=21948 bytes_retransmit=9 bytes_invalid=0 send_seq=994 receive_seq=994 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002379 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=1044 bytes_read=6114 bytes_retransmit=0 bytes_invalid=0 send_seq=149 receive_seq=149 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999111 adj=49998348 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2609 bytes_read=9525 bytes_retransmit=0 bytes_invalid=0 send_seq=261 receive_seq=261 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999674 adj=47999021  Spider: temp=44.2 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=561 bytes_read=14649 bytes_retransmit=0 bytes_invalid=0 send_seq=94 receive_seq=94 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999398 adj=31998959 coil_temp=28.7 refs=0 mcu_temp=29.35 supply_voltage=3.002 sysload=0.84 cputime=8.406 memavail=3298276 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1041999.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=18656 bytes_read=22370 bytes_retransmit=9 bytes_invalid=0 send_seq=1009 receive_seq=1009 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002379 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=1050 bytes_read=6130 bytes_retransmit=0 bytes_invalid=0 send_seq=150 receive_seq=150 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999124 adj=49998317 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2615 bytes_read=9642 bytes_retransmit=0 bytes_invalid=0 send_seq=262 receive_seq=262 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999679 adj=47998957  Spider: temp=44.2 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=567 bytes_read=15005 bytes_retransmit=0 bytes_invalid=0 send_seq=95 receive_seq=95 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999400 adj=31998937 coil_temp=28.7 refs=0 mcu_temp=29.35 supply_voltage=3.002 sysload=0.84 cputime=8.483 memavail=3298276 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042000.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=18845 bytes_read=22743 bytes_retransmit=9 bytes_invalid=0 send_seq=1023 receive_seq=1023 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002387 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=1056 bytes_read=6146 bytes_retransmit=0 bytes_invalid=0 send_seq=151 receive_seq=151 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999134 adj=49998465 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2621 bytes_read=9760 bytes_retransmit=0 bytes_invalid=0 send_seq=263 receive_seq=263 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999679 adj=47999026  Spider: temp=44.0 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=573 bytes_read=15361 bytes_retransmit=0 bytes_invalid=0 send_seq=96 receive_seq=96 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999401 adj=31998963 coil_temp=28.7 refs=0 mcu_temp=29.36 supply_voltage=3.002 sysload=0.84 cputime=8.558 memavail=3298276 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.6 pwm=0.000
Stats 1042001.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=19039 bytes_read=23121 bytes_retransmit=9 bytes_invalid=0 send_seq=1038 receive_seq=1038 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002396 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=1062 bytes_read=6162 bytes_retransmit=0 bytes_invalid=0 send_seq=152 receive_seq=152 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999143 adj=49998535 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2627 bytes_read=9877 bytes_retransmit=0 bytes_invalid=0 send_seq=264 receive_seq=264 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999679 adj=47999011  Spider: temp=44.1 raspberry_pi: temp=40.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=579 bytes_read=15717 bytes_retransmit=0 bytes_invalid=0 send_seq=97 receive_seq=97 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999400 adj=31998969 coil_temp=28.7 refs=0 mcu_temp=29.35 supply_voltage=3.002 sysload=0.84 cputime=8.634 memavail=3298276 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042002.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=19233 bytes_read=23543 bytes_retransmit=9 bytes_invalid=0 send_seq=1053 receive_seq=1053 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002404 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=1068 bytes_read=6178 bytes_retransmit=0 bytes_invalid=0 send_seq=153 receive_seq=153 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999142 adj=49998573 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2633 bytes_read=9980 bytes_retransmit=0 bytes_invalid=0 send_seq=265 receive_seq=265 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999686 adj=47998996  Spider: temp=44.0 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=585 bytes_read=16073 bytes_retransmit=0 bytes_invalid=0 send_seq=98 receive_seq=98 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999399 adj=31998943 coil_temp=28.7 refs=0 mcu_temp=29.36 supply_voltage=3.002 sysload=0.85 cputime=8.707 memavail=3298276 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042003.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=19427 bytes_read=23936 bytes_retransmit=9 bytes_invalid=0 send_seq=1068 receive_seq=1068 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002400 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000019 bytes_write=1074 bytes_read=6207 bytes_retransmit=0 bytes_invalid=0 send_seq=154 receive_seq=154 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999139 adj=49998520 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2639 bytes_read=10098 bytes_retransmit=0 bytes_invalid=0 send_seq=266 receive_seq=266 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999686 adj=47999052  Spider: temp=44.1 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=591 bytes_read=16429 bytes_retransmit=0 bytes_invalid=0 send_seq=99 receive_seq=99 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999398 adj=31998932 coil_temp=28.7 refs=0 mcu_temp=29.36 supply_voltage=3.002 sysload=0.85 cputime=8.779 memavail=3298276 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042004.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=19621 bytes_read=24314 bytes_retransmit=9 bytes_invalid=0 send_seq=1083 receive_seq=1083 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002400 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000019 bytes_write=1080 bytes_read=6223 bytes_retransmit=0 bytes_invalid=0 send_seq=155 receive_seq=155 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999143 adj=49998496 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2645 bytes_read=10229 bytes_retransmit=0 bytes_invalid=0 send_seq=267 receive_seq=267 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999685 adj=47999055  Spider: temp=43.8 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=597 bytes_read=16785 bytes_retransmit=0 bytes_invalid=0 send_seq=100 receive_seq=100 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999397 adj=31998940 coil_temp=28.7 refs=0 mcu_temp=29.37 supply_voltage=3.002 sysload=0.85 cputime=8.851 memavail=3298276 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1042005.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=19815 bytes_read=24736 bytes_retransmit=9 bytes_invalid=0 send_seq=1098 receive_seq=1098 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002398 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000019 bytes_write=1086 bytes_read=6239 bytes_retransmit=0 bytes_invalid=0 send_seq=156 receive_seq=156 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999144 adj=49998525 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2651 bytes_read=10332 bytes_retransmit=0 bytes_invalid=0 send_seq=268 receive_seq=268 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999685 adj=47999046  Spider: temp=43.8 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=603 bytes_read=17141 bytes_retransmit=0 bytes_invalid=0 send_seq=101 receive_seq=101 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999396 adj=31998935 coil_temp=28.7 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.85 cputime=8.923 memavail=3298276 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042006.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=20009 bytes_read=25114 bytes_retransmit=9 bytes_invalid=0 send_seq=1113 receive_seq=1113 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002399 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000019 bytes_write=1092 bytes_read=6255 bytes_retransmit=0 bytes_invalid=0 send_seq=157 receive_seq=157 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999145 adj=49998525 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2657 bytes_read=10450 bytes_retransmit=0 bytes_invalid=0 send_seq=269 receive_seq=269 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999685 adj=47999053  Spider: temp=43.6 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=609 bytes_read=17497 bytes_retransmit=0 bytes_invalid=0 send_seq=102 receive_seq=102 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999397 adj=31998941 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.85 cputime=8.995 memavail=3298276 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042007.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=20203 bytes_read=25492 bytes_retransmit=9 bytes_invalid=0 send_seq=1128 receive_seq=1128 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002404 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000019 bytes_write=1098 bytes_read=6271 bytes_retransmit=0 bytes_invalid=0 send_seq=158 receive_seq=158 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999141 adj=49998519 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2669 bytes_read=10583 bytes_retransmit=0 bytes_invalid=0 send_seq=271 receive_seq=271 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999682 adj=47999044  Spider: temp=43.7 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=615 bytes_read=17853 bytes_retransmit=0 bytes_invalid=0 send_seq=103 receive_seq=103 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999397 adj=31998955 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.79 cputime=9.068 memavail=3297772 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042008.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=20397 bytes_read=25929 bytes_retransmit=9 bytes_invalid=0 send_seq=1143 receive_seq=1143 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002401 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000021 bytes_write=1104 bytes_read=6300 bytes_retransmit=0 bytes_invalid=0 send_seq=159 receive_seq=159 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999137 adj=49998465 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2675 bytes_read=10686 bytes_retransmit=0 bytes_invalid=0 send_seq=272 receive_seq=272 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999681 adj=47999002  Spider: temp=43.6 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.0 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=621 bytes_read=18193 bytes_retransmit=0 bytes_invalid=0 send_seq=104 receive_seq=104 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999396 adj=31998949 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.79 cputime=9.140 memavail=3297788 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042009.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=20591 bytes_read=26307 bytes_retransmit=9 bytes_invalid=0 send_seq=1158 receive_seq=1158 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002399 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000021 bytes_write=1110 bytes_read=6316 bytes_retransmit=0 bytes_invalid=0 send_seq=160 receive_seq=160 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999131 adj=49998430 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2681 bytes_read=10818 bytes_retransmit=0 bytes_invalid=0 send_seq=273 receive_seq=273 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999681 adj=47999013  Spider: temp=43.4 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=627 bytes_read=18549 bytes_retransmit=0 bytes_invalid=0 send_seq=105 receive_seq=105 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999395 adj=31998953 coil_temp=28.6 refs=0 mcu_temp=29.37 supply_voltage=3.002 sysload=0.79 cputime=9.213 memavail=3297788 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042010.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=20785 bytes_read=26685 bytes_retransmit=9 bytes_invalid=0 send_seq=1173 receive_seq=1173 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002396 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000021 bytes_write=1116 bytes_read=6332 bytes_retransmit=0 bytes_invalid=0 send_seq=161 receive_seq=161 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999134 adj=49998385 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2687 bytes_read=10935 bytes_retransmit=0 bytes_invalid=0 send_seq=274 receive_seq=274 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999681 adj=47999030  Spider: temp=43.5 raspberry_pi: temp=40.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=633 bytes_read=18905 bytes_retransmit=0 bytes_invalid=0 send_seq=106 receive_seq=106 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999394 adj=31998951 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.79 cputime=9.286 memavail=3297788 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042011.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=20979 bytes_read=27107 bytes_retransmit=9 bytes_invalid=0 send_seq=1188 receive_seq=1188 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002395 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000021 bytes_write=1122 bytes_read=6348 bytes_retransmit=0 bytes_invalid=0 send_seq=162 receive_seq=162 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999134 adj=49998450 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2693 bytes_read=11038 bytes_retransmit=0 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999680 adj=47999032  Spider: temp=43.8 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=639 bytes_read=19261 bytes_retransmit=0 bytes_invalid=0 send_seq=107 receive_seq=107 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999393 adj=31998954 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.79 cputime=9.361 memavail=3297788 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042012.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=21173 bytes_read=27482 bytes_retransmit=9 bytes_invalid=0 send_seq=1203 receive_seq=1203 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002397 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000021 bytes_write=1128 bytes_read=6364 bytes_retransmit=0 bytes_invalid=0 send_seq=163 receive_seq=163 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999137 adj=49998458 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2699 bytes_read=11156 bytes_retransmit=0 bytes_invalid=0 send_seq=276 receive_seq=276 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999691 adj=47999030  Spider: temp=43.3 raspberry_pi: temp=39.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=645 bytes_read=19617 bytes_retransmit=0 bytes_invalid=0 send_seq=108 receive_seq=108 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999393 adj=31998943 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.72 cputime=9.434 memavail=3297788 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.8 pwm=0.000
Stats 1042013.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=21367 bytes_read=27865 bytes_retransmit=9 bytes_invalid=0 send_seq=1218 receive_seq=1218 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002414 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1134 bytes_read=6392 bytes_retransmit=0 bytes_invalid=0 send_seq=164 receive_seq=164 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999144 adj=49998483 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2705 bytes_read=11273 bytes_retransmit=0 bytes_invalid=0 send_seq=277 receive_seq=277 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999689 adj=47999140  Spider: temp=43.4 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=651 bytes_read=19973 bytes_retransmit=0 bytes_invalid=0 send_seq=109 receive_seq=109 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999393 adj=31998944 coil_temp=28.6 refs=0 mcu_temp=29.37 supply_voltage=3.002 sysload=0.72 cputime=9.493 memavail=3297788 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042014.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=21561 bytes_read=28284 bytes_retransmit=9 bytes_invalid=0 send_seq=1233 receive_seq=1233 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002404 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1140 bytes_read=6407 bytes_retransmit=0 bytes_invalid=0 send_seq=165 receive_seq=165 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999135 adj=49998500 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2711 bytes_read=11390 bytes_retransmit=0 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999684 adj=47999047  Spider: temp=43.3 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=657 bytes_read=20329 bytes_retransmit=0 bytes_invalid=0 send_seq=110 receive_seq=110 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999391 adj=31998924 coil_temp=28.6 refs=0 mcu_temp=29.37 supply_voltage=3.002 sysload=0.72 cputime=9.530 memavail=3297788 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042015.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=21755 bytes_read=28662 bytes_retransmit=9 bytes_invalid=0 send_seq=1248 receive_seq=1248 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002395 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1146 bytes_read=6422 bytes_retransmit=0 bytes_invalid=0 send_seq=166 receive_seq=166 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999127 adj=49998430 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2717 bytes_read=11522 bytes_retransmit=0 bytes_invalid=0 send_seq=279 receive_seq=279 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999679 adj=47999022  Spider: temp=43.2 raspberry_pi: temp=39.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=663 bytes_read=20685 bytes_retransmit=0 bytes_invalid=0 send_seq=111 receive_seq=111 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999391 adj=31998927 coil_temp=28.6 refs=0 mcu_temp=29.37 supply_voltage=3.002 sysload=0.72 cputime=9.568 memavail=3297788 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042016.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=21934 bytes_read=29025 bytes_retransmit=9 bytes_invalid=0 send_seq=1260 receive_seq=1260 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002398 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1152 bytes_read=6437 bytes_retransmit=0 bytes_invalid=0 send_seq=167 receive_seq=167 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999122 adj=49998384 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2723 bytes_read=11625 bytes_retransmit=0 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999674 adj=47999003  Spider: temp=43.2 raspberry_pi: temp=39.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=669 bytes_read=21041 bytes_retransmit=0 bytes_invalid=0 send_seq=112 receive_seq=112 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999390 adj=31998953 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.72 cputime=9.605 memavail=3297788 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042017.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=22128 bytes_read=29447 bytes_retransmit=9 bytes_invalid=0 send_seq=1275 receive_seq=1275 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002388 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1158 bytes_read=6452 bytes_retransmit=0 bytes_invalid=0 send_seq=168 receive_seq=168 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999116 adj=49998339 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2729 bytes_read=11728 bytes_retransmit=0 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999670 adj=47998953  Spider: temp=43.1 raspberry_pi: temp=39.9 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=675 bytes_read=21397 bytes_retransmit=0 bytes_invalid=0 send_seq=113 receive_seq=113 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999389 adj=31998941 coil_temp=28.7 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.66 cputime=9.642 memavail=3297788 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1042018.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000010 bytes_write=22322 bytes_read=29840 bytes_retransmit=9 bytes_invalid=0 send_seq=1290 receive_seq=1290 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002381 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000011 bytes_write=1164 bytes_read=6481 bytes_retransmit=0 bytes_invalid=0 send_seq=169 receive_seq=169 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999109 adj=49998326 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2735 bytes_read=11860 bytes_retransmit=0 bytes_invalid=0 send_seq=282 receive_seq=282 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999669 adj=47998964  Spider: temp=43.0 raspberry_pi: temp=40.9 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=681 bytes_read=21753 bytes_retransmit=0 bytes_invalid=0 send_seq=114 receive_seq=114 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999389 adj=31998955 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.66 cputime=9.699 memavail=3297296 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042019.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000010 bytes_write=22516 bytes_read=30218 bytes_retransmit=9 bytes_invalid=0 send_seq=1305 receive_seq=1305 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002382 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000011 bytes_write=1170 bytes_read=6497 bytes_retransmit=0 bytes_invalid=0 send_seq=170 receive_seq=170 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999113 adj=49998311 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2741 bytes_read=11977 bytes_retransmit=0 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999669 adj=47998991  Spider: temp=43.0 raspberry_pi: temp=40.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=687 bytes_read=22109 bytes_retransmit=0 bytes_invalid=0 send_seq=115 receive_seq=115 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999390 adj=31998971 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.66 cputime=9.775 memavail=3297296 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1042020.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000010 bytes_write=22710 bytes_read=30640 bytes_retransmit=9 bytes_invalid=0 send_seq=1320 receive_seq=1320 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002382 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000011 bytes_write=1176 bytes_read=6513 bytes_retransmit=0 bytes_invalid=0 send_seq=171 receive_seq=171 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999115 adj=49998378 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2747 bytes_read=12080 bytes_retransmit=0 bytes_invalid=0 send_seq=284 receive_seq=284 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999672 adj=47998998  Spider: temp=43.0 raspberry_pi: temp=39.9 sht36: temp=29.9 chamber: temp=27.0 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=693 bytes_read=22465 bytes_retransmit=0 bytes_invalid=0 send_seq=116 receive_seq=116 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999390 adj=31998979 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.66 cputime=9.854 memavail=3297296 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1042021.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000010 bytes_write=22904 bytes_read=31018 bytes_retransmit=9 bytes_invalid=0 send_seq=1335 receive_seq=1335 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002385 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000011 bytes_write=1182 bytes_read=6529 bytes_retransmit=0 bytes_invalid=0 send_seq=172 receive_seq=172 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999115 adj=49998427 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2753 bytes_read=12212 bytes_retransmit=0 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999675 adj=47999040  Spider: temp=43.0 raspberry_pi: temp=40.4 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=699 bytes_read=22821 bytes_retransmit=0 bytes_invalid=0 send_seq=117 receive_seq=117 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999393 adj=31998979 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.66 cputime=9.934 memavail=3297296 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042022.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000010 bytes_write=23098 bytes_read=31396 bytes_retransmit=9 bytes_invalid=0 send_seq=1350 receive_seq=1350 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002390 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000011 bytes_write=1188 bytes_read=6545 bytes_retransmit=0 bytes_invalid=0 send_seq=173 receive_seq=173 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999115 adj=49998426 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2759 bytes_read=12315 bytes_retransmit=0 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999676 adj=47999065  Spider: temp=42.9 raspberry_pi: temp=40.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=705 bytes_read=23177 bytes_retransmit=0 bytes_invalid=0 send_seq=118 receive_seq=118 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999395 adj=31999001 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.61 cputime=10.010 memavail=3297296 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.2 pwm=0.000
Stats 1042023.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=23292 bytes_read=31833 bytes_retransmit=9 bytes_invalid=0 send_seq=1365 receive_seq=1365 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002395 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000017 bytes_write=1194 bytes_read=6574 bytes_retransmit=0 bytes_invalid=0 send_seq=174 receive_seq=174 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999114 adj=49998407 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2765 bytes_read=12418 bytes_retransmit=0 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999676 adj=47999049  Spider: temp=42.8 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=711 bytes_read=23533 bytes_retransmit=0 bytes_invalid=0 send_seq=119 receive_seq=119 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999395 adj=31999005 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.61 cputime=10.088 memavail=3297056 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1042024.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=23486 bytes_read=32211 bytes_retransmit=9 bytes_invalid=0 send_seq=1380 receive_seq=1380 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002392 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000017 bytes_write=1200 bytes_read=6590 bytes_retransmit=0 bytes_invalid=0 send_seq=175 receive_seq=175 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999115 adj=49998397 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2771 bytes_read=12564 bytes_retransmit=0 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999677 adj=47999028  Spider: temp=42.8 raspberry_pi: temp=39.9 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=717 bytes_read=23889 bytes_retransmit=0 bytes_invalid=0 send_seq=120 receive_seq=120 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999395 adj=31998983 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.61 cputime=10.162 memavail=3297056 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042025.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=23680 bytes_read=32589 bytes_retransmit=9 bytes_invalid=0 send_seq=1395 receive_seq=1395 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002390 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000017 bytes_write=1212 bytes_read=6622 bytes_retransmit=0 bytes_invalid=0 send_seq=177 receive_seq=177 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999119 adj=49998429 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2777 bytes_read=12667 bytes_retransmit=0 bytes_invalid=0 send_seq=289 receive_seq=289 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999678 adj=47999052  Spider: temp=42.7 raspberry_pi: temp=39.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=723 bytes_read=24245 bytes_retransmit=0 bytes_invalid=0 send_seq=121 receive_seq=121 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999395 adj=31998985 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.61 cputime=10.234 memavail=3297056 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042026.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=23874 bytes_read=33011 bytes_retransmit=9 bytes_invalid=0 send_seq=1410 receive_seq=1410 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002389 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000017 bytes_write=1218 bytes_read=6638 bytes_retransmit=0 bytes_invalid=0 send_seq=178 receive_seq=178 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999120 adj=49998485 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2783 bytes_read=12770 bytes_retransmit=0 bytes_invalid=0 send_seq=290 receive_seq=290 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999681 adj=47999071  Spider: temp=42.6 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=729 bytes_read=24601 bytes_retransmit=0 bytes_invalid=0 send_seq=122 receive_seq=122 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999394 adj=31998988 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.61 cputime=10.307 memavail=3297056 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042027.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=24068 bytes_read=33389 bytes_retransmit=9 bytes_invalid=0 send_seq=1425 receive_seq=1425 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002390 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000017 bytes_write=1224 bytes_read=6654 bytes_retransmit=0 bytes_invalid=0 send_seq=179 receive_seq=179 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999122 adj=49998501 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2789 bytes_read=12902 bytes_retransmit=0 bytes_invalid=0 send_seq=291 receive_seq=291 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999679 adj=47999104  Spider: temp=42.4 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=735 bytes_read=24957 bytes_retransmit=0 bytes_invalid=0 send_seq=123 receive_seq=123 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999393 adj=31998976 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.56 cputime=10.376 memavail=3296552 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1042028.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=24262 bytes_read=33782 bytes_retransmit=9 bytes_invalid=0 send_seq=1440 receive_seq=1440 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002394 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1230 bytes_read=6683 bytes_retransmit=0 bytes_invalid=0 send_seq=180 receive_seq=180 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999117 adj=49998510 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2795 bytes_read=13005 bytes_retransmit=0 bytes_invalid=0 send_seq=292 receive_seq=292 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999677 adj=47999066  Spider: temp=42.7 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=741 bytes_read=25313 bytes_retransmit=0 bytes_invalid=0 send_seq=124 receive_seq=124 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999392 adj=31998967 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.56 cputime=10.430 memavail=3296308 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042029.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=24456 bytes_read=34204 bytes_retransmit=9 bytes_invalid=0 send_seq=1455 receive_seq=1455 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002388 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1236 bytes_read=6699 bytes_retransmit=0 bytes_invalid=0 send_seq=181 receive_seq=181 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999113 adj=49998418 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2801 bytes_read=13119 bytes_retransmit=0 bytes_invalid=0 send_seq=293 receive_seq=293 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999673 adj=47999016  Spider: temp=42.4 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=747 bytes_read=25669 bytes_retransmit=0 bytes_invalid=0 send_seq=125 receive_seq=125 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999392 adj=31998947 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.56 cputime=10.466 memavail=3296308 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1042030.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=24650 bytes_read=34582 bytes_retransmit=9 bytes_invalid=0 send_seq=1470 receive_seq=1470 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002387 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1242 bytes_read=6715 bytes_retransmit=0 bytes_invalid=0 send_seq=182 receive_seq=182 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999106 adj=49998394 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2807 bytes_read=13242 bytes_retransmit=0 bytes_invalid=0 send_seq=294 receive_seq=294 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999674 adj=47998998  Spider: temp=42.3 raspberry_pi: temp=40.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=753 bytes_read=26025 bytes_retransmit=0 bytes_invalid=0 send_seq=126 receive_seq=126 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999392 adj=31998964 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.56 cputime=10.501 memavail=3296308 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1042031.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=24844 bytes_read=34960 bytes_retransmit=9 bytes_invalid=0 send_seq=1485 receive_seq=1485 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002381 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1248 bytes_read=6731 bytes_retransmit=0 bytes_invalid=0 send_seq=183 receive_seq=183 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999102 adj=49998337 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2813 bytes_read=13338 bytes_retransmit=0 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999670 adj=47999020  Spider: temp=42.3 raspberry_pi: temp=39.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=759 bytes_read=26381 bytes_retransmit=0 bytes_invalid=0 send_seq=127 receive_seq=127 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999390 adj=31998958 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.56 cputime=10.536 memavail=3296308 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042032.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=25038 bytes_read=35382 bytes_retransmit=9 bytes_invalid=0 send_seq=1500 receive_seq=1500 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002376 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1254 bytes_read=6747 bytes_retransmit=0 bytes_invalid=0 send_seq=184 receive_seq=184 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999098 adj=49998336 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2819 bytes_read=13434 bytes_retransmit=0 bytes_invalid=0 send_seq=296 receive_seq=296 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999668 adj=47999006  Spider: temp=42.3 raspberry_pi: temp=40.9 sht36: temp=29.9 chamber: temp=27.0 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=765 bytes_read=26737 bytes_retransmit=0 bytes_invalid=0 send_seq=128 receive_seq=128 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999389 adj=31998954 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.52 cputime=10.571 memavail=3296308 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042033.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=25227 bytes_read=35770 bytes_retransmit=9 bytes_invalid=0 send_seq=1514 receive_seq=1514 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002376 rpi: mcu_awake=0.000 mcu_task_avg=0.000006 mcu_task_stddev=0.000009 bytes_write=1260 bytes_read=6776 bytes_retransmit=0 bytes_invalid=0 send_seq=185 receive_seq=185 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999100 adj=49998323 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2825 bytes_read=13557 bytes_retransmit=0 bytes_invalid=0 send_seq=297 receive_seq=297 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999670 adj=47998998  Spider: temp=42.3 raspberry_pi: temp=40.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=771 bytes_read=27093 bytes_retransmit=0 bytes_invalid=0 send_seq=129 receive_seq=129 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999389 adj=31998954 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.52 cputime=10.629 memavail=3295804 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042034.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=25411 bytes_read=36138 bytes_retransmit=9 bytes_invalid=0 send_seq=1527 receive_seq=1527 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002397 rpi: mcu_awake=0.000 mcu_task_avg=0.000006 mcu_task_stddev=0.000009 bytes_write=1266 bytes_read=6792 bytes_retransmit=0 bytes_invalid=0 send_seq=186 receive_seq=186 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999101 adj=49998380 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000013 bytes_write=2831 bytes_read=13667 bytes_retransmit=0 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999671 adj=47999036  Spider: temp=42.3 raspberry_pi: temp=40.9 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=777 bytes_read=27449 bytes_retransmit=0 bytes_invalid=0 send_seq=130 receive_seq=130 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999389 adj=31998959 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.52 cputime=10.701 memavail=3295812 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Stats 1042035.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=25590 bytes_read=36545 bytes_retransmit=9 bytes_invalid=0 send_seq=1539 receive_seq=1539 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002399 rpi: mcu_awake=0.000 mcu_task_avg=0.000006 mcu_task_stddev=0.000009 bytes_write=1272 bytes_read=6808 bytes_retransmit=0 bytes_invalid=0 send_seq=187 receive_seq=187 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999104 adj=49998340 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000013 bytes_write=2837 bytes_read=13770 bytes_retransmit=0 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999671 adj=47998977  Spider: temp=42.2 raspberry_pi: temp=40.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=783 bytes_read=27805 bytes_retransmit=0 bytes_invalid=0 send_seq=131 receive_seq=131 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999388 adj=31998911 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.52 cputime=10.774 memavail=3295812 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042036.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=25784 bytes_read=36917 bytes_retransmit=9 bytes_invalid=0 send_seq=1554 receive_seq=1554 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002400 rpi: mcu_awake=0.000 mcu_task_avg=0.000006 mcu_task_stddev=0.000009 bytes_write=1278 bytes_read=6824 bytes_retransmit=0 bytes_invalid=0 send_seq=188 receive_seq=188 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999106 adj=49998392 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000013 bytes_write=2843 bytes_read=13902 bytes_retransmit=0 bytes_invalid=0 send_seq=300 receive_seq=300 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999679 adj=47998980  Spider: temp=42.1 raspberry_pi: temp=40.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=789 bytes_read=28161 bytes_retransmit=0 bytes_invalid=0 send_seq=132 receive_seq=132 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999389 adj=31998908 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.52 cputime=10.848 memavail=3295812 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1042037.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000009 bytes_write=25978 bytes_read=37284 bytes_retransmit=9 bytes_invalid=0 send_seq=1569 receive_seq=1569 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002400 rpi: mcu_awake=0.000 mcu_task_avg=0.000006 mcu_task_stddev=0.000009 bytes_write=1284 bytes_read=6840 bytes_retransmit=0 bytes_invalid=0 send_seq=189 receive_seq=189 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999111 adj=49998421 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000013 bytes_write=2849 bytes_read=14005 bytes_retransmit=0 bytes_invalid=0 send_seq=301 receive_seq=301 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999678 adj=47999096  Spider: temp=42.2 raspberry_pi: temp=40.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.3 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=795 bytes_read=28517 bytes_retransmit=0 bytes_invalid=0 send_seq=133 receive_seq=133 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999388 adj=31998930 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.47 cputime=10.916 memavail=3295060 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.8 pwm=0.000
Stats 1042038.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000010 bytes_write=26172 bytes_read=37720 bytes_retransmit=9 bytes_invalid=0 send_seq=1584 receive_seq=1584 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002402 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1290 bytes_read=6869 bytes_retransmit=0 bytes_invalid=0 send_seq=190 receive_seq=190 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999107 adj=49998485 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000013 bytes_write=2855 bytes_read=14108 bytes_retransmit=0 bytes_invalid=0 send_seq=302 receive_seq=302 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999676 adj=47999069  Spider: temp=42.1 raspberry_pi: temp=40.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=801 bytes_read=28873 bytes_retransmit=0 bytes_invalid=0 send_seq=134 receive_seq=134 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999388 adj=31998931 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.47 cputime=10.972 memavail=3295060 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.1 pwm=0.000
Stats 1042039.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000010 bytes_write=26361 bytes_read=38093 bytes_retransmit=9 bytes_invalid=0 send_seq=1598 receive_seq=1598 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002397 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1296 bytes_read=6885 bytes_retransmit=0 bytes_invalid=0 send_seq=191 receive_seq=191 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999102 adj=49998418 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2861 bytes_read=14254 bytes_retransmit=0 bytes_invalid=0 send_seq=303 receive_seq=303 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999673 adj=47999028  Spider: temp=42.1 raspberry_pi: temp=40.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=807 bytes_read=29229 bytes_retransmit=0 bytes_invalid=0 send_seq=135 receive_seq=135 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999386 adj=31998934 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.47 cputime=11.008 memavail=3295060 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042040.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000010 bytes_write=26555 bytes_read=38471 bytes_retransmit=9 bytes_invalid=0 send_seq=1613 receive_seq=1613 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002393 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1302 bytes_read=6901 bytes_retransmit=0 bytes_invalid=0 send_seq=192 receive_seq=192 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999097 adj=49998385 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2867 bytes_read=14357 bytes_retransmit=0 bytes_invalid=0 send_seq=304 receive_seq=304 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999673 adj=47999011  Spider: temp=41.9 raspberry_pi: temp=40.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=813 bytes_read=29585 bytes_retransmit=0 bytes_invalid=0 send_seq=136 receive_seq=136 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999385 adj=31998932 coil_temp=28.7 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.47 cputime=11.041 memavail=3295060 print_time=397.917 buffer_time=0.000 print_stall=0 extruder: target=0 temp=31.9 pwm=0.000
Stats 1042042.8: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000009 mcu_task_stddev=0.000010 bytes_write=27248 bytes_read=39107 bytes_retransmit=9 bytes_invalid=0 send_seq=1640 receive_seq=1640 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002383 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000018 bytes_write=1314 bytes_read=6933 bytes_retransmit=0 bytes_invalid=0 send_seq=194 receive_seq=194 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999094 adj=49998357 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2879 bytes_read=14592 bytes_retransmit=0 bytes_invalid=0 send_seq=306 receive_seq=306 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999667 adj=47999013  Spider: temp=41.9 raspberry_pi: temp=40.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=825 bytes_read=30297 bytes_retransmit=0 bytes_invalid=0 send_seq=138 receive_seq=138 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999385 adj=31998958 coil_temp=28.7 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.44 cputime=11.109 memavail=3295052 print_time=459.364 buffer_time=0.082 print_stall=0 extruder: target=0 temp=32.0 pwm=0.000
Attempting MCU 'mcu' reset command
Attempting MCU 'rpi' config_reset command
b'Got EOF when reading from device'
Attempting MCU 'sht36' reset command
Attempting MCU 'beacon' reset command
webhooks client 547900840880: Disconnected
Restarting printer
Start printer at Sun Apr 28 07:07:29 2024 (1714284449.2 1042044.1)
===== Config file =====
[exclude_object]

[idle_timeout]
timeout = 3600

[force_move]
enable_force_move = True

[respond]
default_type = echo

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	CANCEL_PRINT

[pause_resume]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
variable_park = True
gcode = 
	TURN_OFF_HEATERS
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	PRINT_END
	BASE_CANCEL_PRINT

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32f446xx_2D0053000E51323130373733-if00

[temperature_sensor Spider]
sensor_type = temperature_mcu
min_temp = 10
max_temp = 100

[board_pins spider]
aliases = 
	
	X_STEP=PE11, X_DIR=PE10, X_ENABLE=PE9,
	Y_STEP=PD8, Y_DIR=PB12, Y_ENABLE=PD9,
	Z_STEP=PD14, Z_DIR=PD13, Z_ENABLE=PD15,
	E0_STEP=PD5, E0_DIR=PD6, E0_ENABLE=PD4,
	E1_STEP=PE6, E1_DIR=PC13, E1_ENABLE=PE5,
	E2_STEP=PE2, E2_DIR=PE4, E2_ENABLE=PE3,
	E3_STEP=PD12, E3_DIR=PC4, E3_ENABLE=PE8,
	E4_STEP=PE1, E4_DIR=PE0, E4_ENABLE=PC5,
	
	X_MIN=PB14, X_MAX=PA1,
	Y_MIN=PB13, Y_MAX=PA2,
	Z_MIN=PA0, Z_MAX=PA3,
	
	X_UART=PE7, Y_UART=PE15, Z_UART=PD10,
	E0_UART=PD7, E1_UART=PC14, E2_UART=PC15,
	E3_UART=PA15, E4_UART=PD11,
	
	E_HEATER=PB15, E_THERMISTOR=PC0,
	E1_HEATER=PC8, E1_THERMISTOR=PC1,
	E2_HEATER=PB3, E2_THERMISTOR=PC2,
	BED_HEATER=PB4, BED_THERMISTOR=PC3,
	FAN0=PB0, FAN1=PB1, FAN2=PB2,
	
	LED-R=PB6, LED-G=PB5, LED-B=PB7,
	
	EXP1_1=PC9, EXP1_3=PC11, EXP1_5=PC10, EXP1_7=PD0, EXP1_9=<GND>,
	EXP1_2=PA8, EXP1_4=PD2, EXP1_6=PC12, EXP1_8=PD1, EXP1_10=<5V>,
	
	EXP2_1=PA6, EXP2_3=PC6, EXP2_5=PC7, EXP2_7=PB10, EXP2_9=<GND>,
	EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<5V>

[mcu rpi]
serial = /tmp/klipper_host_mcu

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 10
max_temp = 100

[gcode_shell_command rpi_fan_50]
command = i2cset -y 1 0x01a 0x32
timeout = 30.
verbose = True

[gcode_shell_command rpi_fan_25]
command = i2cset -y 1 0x01a 0x19
timeout = 30.
verbose = True

[gcode_macro rpi_fan_50]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_50

[gcode_macro rpi_fan_25]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_25

[mcu sht36]
canbus_uuid = 943ff2eb48fd

[temperature_sensor sht36]
sensor_type = temperature_mcu
sensor_mcu = sht36

[printer]
kinematics = corexy
max_velocity = 800
max_accel = 20000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[extruder]
sensor_pin = sht36:PA3
sensor_type = PT1000
heater_pin = sht36:PA8
min_temp = 10
max_temp = 270
max_power = 1.0
min_extrude_temp = 10
control = pid
pid_kp = 20.362
pid_ki = 2.225
pid_kd = 46.579
pressure_advance_smooth_time = 0.040
max_extrude_only_velocity = 120
max_extrude_only_accel = 800
max_extrude_only_distance = 1150
max_extrude_cross_section = 9999
nozzle_diameter = 0.400
filament_diameter = 1.75
step_pin = sht36:PB4
dir_pin = !sht36:PB3
enable_pin = !sht36:PA15
full_steps_per_rotation = 200
rotation_distance = 22.66103
gear_ratio = 50:10
microsteps = 16
pressure_advance = 0.05

[temperature_sensor chamber]
sensor_type = NTC 100K MGB18-104F39050L32
sensor_pin = PC2
min_temp = -100
max_temp = 100
gcode_id = C

[heater_bed]
heater_pin = PB4
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PB0
max_power = 0.9
min_temp = -160
max_temp = 120
control = pid
pid_kp = 41.450
pid_ki = 1.322
pid_kd = 324.866

[multi_pin stepper_drivers_multipin]
pins = PB5, PB6, PB7

[controller_fan stepper_drivers]
pin = multi_pin:stepper_drivers_multipin
hardware_pwm = False
max_power = 1.0
fan_speed = 0.75
shutdown_speed = 0.0
stepper = stepper_x, stepper_y

[heater_fan controller_fan]
pin = PB2
cycle_time = 0.00004
off_below = 0.1
kick_start_time = 0.5
heater = heater_bed
heater_temp = 50.0
max_power = 1.0

[heater_fan hotend_fan]
pin = sht36:PB10
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 40.0

[fan]
pin = sht36:PB11
max_power = 0.85
cycle_time = 0.00005
kick_start_time = 0
off_below = 0.0
shutdown_speed = 0

[fan_generic stepper_fans]
pin = PA13
max_power = 0.5
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.0001

[fan_generic rebreather]
pin = PA14
max_power = 1.0
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.00010

[gcode_macro rebreather_start_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.5

[gcode_macro rebreather_end_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.7
	UPDATE_DELAYED_GCODE ID=rebreather_stop_delayed DURATION=900

[delayed_gcode rebreather_stop_delayed]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.0

[display]
lcd_type = uc1701
cs_pin = PC11
a0_pin = PD2
rst_pin = PC10
encoder_pins = ^PC6,^PC7
click_pin = ^!PA8
contrast = 63
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6
spi_software_sclk_pin = PA5
display_group = __voron_display_16x4

[gcode_macro M300]
gcode = SET_PIN PIN=BEEPER_pin VALUE={S}
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[neopixel mini12864]
pin = PC12
chain_count = 60
initial_red = 0.1
initial_green = 0.5
initial_blue = 0.0
color_order = RGB

[display_template _heater_temperature]
param_heater_name = "extruder"
text = 
	{% if param_heater_name in printer %}
	{% set heater = printer[param_heater_name] %}
	
	{% if param_heater_name == "heater_bed" %}
	{% if heater.target %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~bed_heat{frame}~
	{% else %}
	~bed~
	{% endif %}
	{% else %}
	~extruder~
	{% endif %}
	
	{ "%3.0f" % (heater.temperature,) }
	
	{% if heater.target and (heater.temperature - heater.target)|abs > 2 %}
	~right_arrow~
	{ "%0.0f" % (heater.target,) }
	{% endif %}
	~degrees~
	{% endif %}

[display_template _fan_speed]
text = 
	{% if 'fan' in printer %}
	{% set speed = printer.fan.speed %}
	{% if speed %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~fan{frame}~
	{% else %}
	~fan1~
	{% endif %}
	{ "{:>4.0%}".format(speed) }
	{% endif %}

[display_template _printing_time]
text = 
	{% set ptime = printer.idle_timeout.printing_time %}
	{ "%02d:%02d" % (ptime // (60 * 60), (ptime // 60) % 60) }

[display_template _print_status]
text = 
	{% if printer.display_status.message %}
	{ printer.display_status.message }
	{% elif printer.idle_timeout.printing_time %}
	{% set pos = printer.toolhead.position %}
	{ "X%-4.0fY%-4.0fZ%-5.2f" % (pos.x, pos.y, pos.z) }
	{% else %}
	Ready
	{% endif %}

[display_data __voron_display_16x4 extruder]
position = 0, 0
text = 
	{% set active_extruder = printer.toolhead.extruder %}
	{ render("_heater_temperature", param_heater_name=active_extruder) }

[display_data __voron_display_16x4 fan]
position = 0, 10
text = { render("_fan_speed") }

[display_data __voron_display_16x4 heater_bed]
position = 1, 0
text = { render("_heater_temperature", param_heater_name="heater_bed") }

[display_data __voron_display_16x4 chamber]
position = 1,10
text = 
	{% set chamber = printer['temperature_sensor chamber'] %}
	~chamber~
	{ "%3.0f" % (chamber.temperature,) }
	~degrees~

[display_data __voron_display_16x4 print_progress]
position = 2, 0
text = { "{:^10.0%}".format(printer.display_status.progress) }

[display_data __voron_display_16x4 progress_bar]
position = 2, 1
text = { draw_progress_bar(2, 0, 10, printer.display_status.progress) }

[display_data __voron_display_16x4 printing_time]
position = 2, 10
text = { "%6s" % (render("_printing_time").strip(),) }

[display_data __voron_display_16x4 print_status]
position = 3, 0
text = { render("_print_status") }

[display_glyph extruder]
data = 
	................
	................
	..************..
	.....******.....
	..************..
	.....******.....
	..************..
	................
	....********....
	....******.*....
	....********....
	................
	......****......
	.......**.......
	................
	................
hd44780_slot = 0
hd44780_data = 
	..*..
	.*.*.
	.*.*.
	.*.*.
	.*.*.
	*...*
	*...*
	.***.

[display_glyph bed]
data = 
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.....
	*****
	*.*.*
	*...*
	*.*.*
	*****
	.....
	.....

[display_glyph bed_heat1]
data = 
	................
	................
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.*..*
	*..*.
	.*..*
	*..*.
	.....
	*****
	.....
	.....

[display_glyph bed_heat2]
data = 
	................
	................
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	*..*.
	.*..*
	*..*.
	.*..*
	.....
	*****
	.....
	.....

[display_glyph fan1]
data = 
	................
	................
	....***.........
	...****....**...
	...****...****..
	....***..*****..
	.....*....****..
	.......**.......
	.......**.......
	..****....*.....
	..*****..***....
	..****...****...
	...**....****...
	.........***....
	................
	................

[display_glyph fan2]
data = 
	................
	................
	.......****.....
	.......****.....
	.......***......
	..**...**.......
	..***...........
	..****.**.****..
	..****.**.****..
	...........***..
	.......**...**..
	......***.......
	.....****.......
	.....****.......
	................
	................

[display_glyph chamber]
data = 
	................
	****************
	*....*....*....*
	*....*....*....*
	*....******....*
	*..............*
	*..............*
	*.....****.....*
	*.***.*..*.***.*
	*.....****.....*
	*......**......*
	*..............*
	*.************.*
	*...*......*...*
	****************
	................

[display_glyph feedrate]
data = 
	................
	................
	***.***.***.**..
	*...*...*...*.*.
	**..**..**..*.*.
	*...*...*...*.*.
	*...***.***.**..
	................
	**...*..***.***.
	*.*.*.*..*..*...
	**..***..*..**..
	*.*.*.*..*..*...
	*.*.*.*..*..***.
	................
	................
	................
hd44780_slot = 3
hd44780_data = 
	***..
	*....
	**...
	*.***
	..*.*
	..**.
	..*.*
	.....

[display_glyph fan]
hd44780_slot = 2
hd44780_data = 
	.....
	*..**
	**.*.
	..*..
	.*.**
	**..*
	.....
	.....

[display_glyph clock]
hd44780_slot = 4
hd44780_data = 
	.....
	.***.
	*..**
	*.*.*
	*...*
	.***.
	.....
	.....

[display_glyph degrees]
hd44780_slot = 5
hd44780_data = 
	.**..
	*..*.
	*..*.
	.**..
	.....
	.....
	.....
	.....

[display_glyph usb]
hd44780_slot = 6
hd44780_data = 
	.***.
	.***.
	.***.
	*****
	*****
	*****
	..*..
	..*..

[display_glyph sd]
hd44780_slot = 6
hd44780_data = 
	.....
	..***
	.****
	*****
	*****
	*****
	*****
	.....

[delayed_gcode setdisplayneopixel]
initial_duration = 1
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro red]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro orange]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro green]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro blue]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro white]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro yellow]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro purple]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[stepper_x]
step_pin = PE11
dir_pin = !PE10
enable_pin = !PE9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 300
position_max = 300
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PE7
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
interpolate = True
diag0_pin = ^!PB14
run_current = 1
driver_sgt = 1

[stepper_y]
step_pin = PD8
dir_pin = !PB12
enable_pin = !PD9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 310
position_max = 310
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PE15
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
diag0_pin = ^!PB13
interpolate = True
run_current = 1
driver_sgt = 1

[stepper_z]
step_pin = PE6
dir_pin = PC13
enable_pin = !PE5
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 240
position_min = -5
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 0.0

[tmc2209 stepper_z]
uart_pin = PC14
uart_address = 0
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z1]
step_pin = PE2
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z1]
uart_pin = PC15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z2]
step_pin = PD12
dir_pin = PC4
enable_pin = !PE8
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z2]
uart_pin = PA15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[tmc2209 extruder]
uart_pin = sht36:PB5
interpolate = false
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[gcode_arcs]
resolution = 1.0

[output_pin LIGHTS]
pin = PC8
pwm = true
shutdown_value = 0
value = 1
cycle_time = 0.01

[gcode_macro LIGHTS_ON]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.6

[gcode_macro LIGHTS_ON_20]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.20

[gcode_macro LIGHTS_OFF]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.0

[neopixel sb_leds]
pin = sht36:PB0
chain_count = 3
color_order = GRBW
initial_red = 0.0
initial_green = 0.0
initial_blue = 0.0
initial_white = 0.0

[gcode_macro _sb_vars]
variable_colors = {
	'logo': {
	'busy': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cleaning': {'r': 0.0, 'g': 0.02, 'b': 0.5, 'w': 0.0},
	'calibrating_z': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	'heating': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'homing': {'r': 0.0, 'g': 0.6, 'b': 0.2, 'w': 0.0},
	'leveling': {'r': 0.5, 'g': 0.1, 'b': 0.4, 'w': 0.0},
	'meshing': {'r': 0.2, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'printing': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'standby': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'red': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'orange': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'green': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'blue': {'r': 0.0, 'g': 0.0, 'b': 0.5, 'w': 0.0},
	'white': {'r': 1.0, 'g': 1.0, 'b': 1.0, 'w': 0.0},
	'yellow': {'r': 0.4, 'g': 0.4, 'b': 0.0, 'w': 0.0},
	'purple': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	},
	'nozzle': {
	'heating': {'r': 0.8, 'g': 0.35, 'b': 0.0, 'w':0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'on': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':1.0},
	'standby': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':0.8},
	},
	'thermal': {
	'hot': {'r': 1.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cold': {'r': 0.3, 'g': 0.0, 'b': 0.3, 'w': 0.0}
	}
	}
variable_logo_led_name = "sb_leds"
variable_logo_idx = "3"
variable_nozzle_led_name = "sb_leds"
variable_nozzle_idx = "1,2"
gcode = 

[gcode_macro _set_sb_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = params.LED|string %}
	{% set idx = (params.IDX|string).split(',') %}
	{% set transmit_last = params.TRANSMIT|default(1) %}
	
	{% for led_index in idx %}
	{% set transmit=transmit_last if loop.last else 0 %}
	set_led led={led} red={red} green={green} blue={blue} white={white} index={led_index} transmit={transmit}
	{% endfor %}

[gcode_macro _set_sb_leds_by_name]
gcode = 
	{% set leds_name = params.LEDS %}
	{% set color_name = params.COLOR %}
	{% set color = printer["gcode_macro _sb_vars"].colors[leds_name][color_name] %}
	{% set led = printer["gcode_macro _sb_vars"][leds_name + "_led_name"] %}
	{% set idx = printer["gcode_macro _sb_vars"][leds_name + "_idx"] %}
	{% set transmit = params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={color.r} green={color.g} blue={color.b} white={color.w} idx="{idx}" transmit={transmit}

[gcode_macro _set_logo_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].logo_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].logo_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro _set_nozzle_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].nozzle_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].nozzle_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro set_logo_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_logo_leds red=0 blue=0 green=0 white=0 transmit={transmit}

[gcode_macro set_nozzle_leds_on]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="on" transmit={transmit}

[gcode_macro set_nozzle_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="off" transmit={transmit}

[gcode_macro status_off]
gcode = 
	set_logo_leds_off transmit=0
	set_nozzle_leds_off

[gcode_macro status_ready]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="standby" transmit=1

[gcode_macro status_busy]
gcode = 
	_set_sb_leds_by_name leds="logo" color="busy" transmit=0
	set_nozzle_leds_on

[gcode_macro status_heating]
gcode = 
	_set_sb_leds_by_name leds="logo" color="heating" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="heating" transmit=1

[gcode_macro status_leveling]
gcode = 
	_set_sb_leds_by_name leds="logo" color="leveling" transmit=0
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="homing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	_set_sb_leds_by_name leds="logo" color="cleaning" transmit=0
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="meshing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	_set_sb_leds_by_name leds="logo" color="calibrating_z" transmit=0
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="printing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_orange]
gcode = 
	_set_sb_leds_by_name leds="logo" color="orange" transmit=0
	set_nozzle_leds_on

[gcode_macro status_red]
gcode = 
	_set_sb_leds_by_name leds="logo" color="red" transmit=0
	set_nozzle_leds_on

[gcode_macro status_purple]
gcode = 
	_set_sb_leds_by_name leds="logo" color="purple" transmit=0
	set_nozzle_leds_on

[gcode_macro status_green]
gcode = 
	_set_sb_leds_by_name leds="logo" color="green" transmit=0
	set_nozzle_leds_on

[gcode_macro status_white]
gcode = 
	_set_sb_leds_by_name leds="logo" color="white" transmit=0
	set_nozzle_leds_on

[gcode_macro status_yellow]
gcode = 
	_set_sb_leds_by_name leds="logo" color="yellow" transmit=0
	set_nozzle_leds_on

[gcode_macro status_blue]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	set_nozzle_leds_on

[delayed_gcode set_sb_leds_on_boot]
initial_duration = 1
gcode = 
	flicker
	status_ready

[gcode_macro flicker]
gcode = 
	{% set LEDTimes = [10, 20, 20, 240, 20, 40, 20, 100, 20, 20, 20, 260, 80, 20, 240, 60, 160, 20, 240, 20, 1000, 20, 20, 40, 100, 20, 274, 340, 860, 20, 1400, 20, 60, 20] %}
	{% set RGB_Red = 0.2 %}
	{% set RGB_Green = 0.2 %}
	{% set RGB_Blue = 0.2 %}
	{% set RGB_Strip = "sb_leds" %}
	{% set RGB_Strip1 = "mini12864" %}
	
	{% for toggletime in LEDTimes %}
	{% set ledTime = toggletime|string %}
	{% set loopCount = loop.index %}
	
	{% if loopCount is divisibleby 2 %}
	SET_LED LED={RGB_Strip} RED={RGB_Red} GREEN={RGB_Green} BLUE={RGB_Blue}
	G4 P{ledTime|int}
	{% else %}
	SET_LED LED={RGB_Strip}
	G4 P{ledTime|int}
	{% endif %}
	
	{% endfor %}
	
	{% for i in range(1,9) %}
	SET_LED LED={RGB_Strip} RED={RGB_Red+(i/10)} GREEN={RGB_Green+(i/10)}  BLUE={RGB_Blue+(i/10)} INDEX=1
	G4 P200
	{% endfor %}

[beacon]
serial = /dev/serial/by-id/usb-Beacon_Beacon_RevD_63E3DDD04E4B333448202020FF0A3315-if00
x_offset = 0
y_offset = -24
mesh_main_direction = x
mesh_runs = 2
home_xy_position = 117.5, 117.5
home_z_hop = 5
home_z_hop_speed = 30
home_xy_move_speed = 300
home_method = contact
home_method_when_homed = contact
home_autocalibrate = always

[bed_mesh]
speed = 150
horizontal_move_z = 10
mesh_min = 10,10
mesh_max = 290,240
probe_count = 15,15
algorithm = bicubic
fade_start = 1
fade_end = 5
fade_target = 0

[z_tilt]
speed = 500
horizontal_move_z = 10
retries = 5
retry_tolerance = 0.004
z_positions = 
	-50, 18
	150, 348
	350, 18
points = 
	30, 5
	150, 245
	270, 5

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% if display_parameters == True %}
	{ action_respond_info("led_enable  : %d" % (led_enable))  }
	{ action_respond_info("status_macro: \'%s\'" % (status_macro))  }
	{ action_respond_info("fuzz_enable : %d" % (fuzz_enable))  }
	{ action_respond_info("fuzz_min    : %f" % (fuzz_min))  }
	{ action_respond_info("fuzz_max    : %f" % (fuzz_max))  }
	{ action_respond_info("probe_dock_enable: %d" % (probe_dock_enable))  }
	{ action_respond_info("attach_macro: \'%s\'" % (attach_macro))  }
	{ action_respond_info("detach_macro: \'%s\'" % (detach_macro))  }
	{% endif %}
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% if margin_enable == False %}
	{% set margin_size = 0 %}
	{% endif %}
	
	{ action_respond_info("{} object points, clamping to bed mesh [{!r} {!r}]".format(
	all_points | count,
	bed_mesh_min,
	bed_mesh_max,
	)) }
	
	{% if fuzz_enable == True %}
	{% set fuzz_range = range((fuzz_min * 100) | int, (fuzz_max * 100) | int + 1) %}
	{% set x_min = (bed_mesh_min[0] + fuzz_max - margin_size, x_min) | max - (fuzz_range | random / 100.0) %}
	{% set y_min = (bed_mesh_min[1] + fuzz_max - margin_size, y_min) | max - (fuzz_range | random / 100.0) %}
	{% set x_max = (bed_mesh_max[0] - fuzz_max + margin_size, x_max) | min + (fuzz_range | random / 100.0) %}
	{% set y_max = (bed_mesh_max[1] - fuzz_max + margin_size, y_max) | min + (fuzz_range | random / 100.0) %}
	{% else %}
	{% set x_min = [ bed_mesh_min[0], x_min - margin_size ] | max %}
	{% set y_min = [ bed_mesh_min[1], y_min - margin_size ] | max %}
	{% set x_max = [ bed_mesh_max[0], x_max + margin_size ] | min %}
	{% set y_max = [ bed_mesh_max[1], y_max + margin_size ] | min %}
	{% endif %}
	
	{ action_respond_info("Object bounds, clamped to the bed_mesh: {!r}, {!r}".format(
	(x_min, y_min),
	(x_max, y_max),
	)) }
	
	{% set points_x = (((x_max - x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((y_max - y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	{ action_respond_info( "Algorithm: {}".format(algorithm)) }
	
	{% set points_x = [points_x, min_points]|max  %}
	{% set points_y = [points_y, min_points]|max  %}
	{ action_respond_info( "Points: x: {}, y: {}".format(points_x, points_y) ) }
	
	{% if printer.configfile.settings.bed_mesh.relative_reference_index is defined %}
	{% set ref_index = (points_x * points_y / 2) | int %}
	{ action_respond_info( "Reference index: {}".format(ref_index) ) }
	{% else %}
	{% set ref_index = -1 %}
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	{% if led_enable == True %}
	{status_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={x_min},{y_min} mesh_max={x_max},{y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y} RELATIVE_REFERENCE_INDEX={ref_index}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}
variable_led_enable = False
variable_status_macro = 'status_meshing'
variable_fuzz_enable = False
variable_fuzz_min = 0
variable_fuzz_max = 4
variable_margin_enable = False
variable_margin_size = 5
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_display_parameters = True

[gcode_macro Z_TILT_ADJUST]
rename_existing = _Z_TILT_ADJUST
gcode = 
	{ action_respond_info("Z Tilt Adjust") }
	
	_Z_TILT_ADJUST {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	G28 Z0

[gcode_macro z_tilt_scan]
gcode = 
	z_tilt_adjust RETRY_TOLERANCE=1
	z_tilt_adjust HORIZONTAL_MOVE_Z=2

[gcode_macro MACROS_VARS]
variable_circ_fan_speed = 255
variable_probe_temp = 150
variable_starting_wled = 2
variable_heating_wled = 4
variable_ending_wled = 3
variable_ending_length = 25
variable_purge_length = 40
variable_filament_swap_length = 0.8
variable_pla_pa = 0.00525
variable_pet_pa = 0.00650
variable_abs_pa = 0.00460
variable_pet_za = 0.010
variable_move_away_home = 0
variable_homing_retract = 20
gcode = 

[gcode_macro MATERIAL_PA]
gcode = 
	{% set MATERIAL = params.MATERIAL|default("XXX")|string %}
	{% set TEXT ="Setting PA for " + MATERIAL %}
	{% set PLA = printer["gcode_macro MACROS_VARS"].pla_pa|default(0)%}
	{% set PET = printer["gcode_macro MACROS_VARS"].pet_pa|default(0)%}
	{% set ABS = printer["gcode_macro MACROS_VARS"].abs_pa|default(0)%}
	{% set PETZ = printer["gcode_macro MACROS_VARS"].pet_za|default(0)%}
	{% if MATERIAL == "PLA" %}
	SET_PRESSURE_ADVANCE ADVANCE={PLA}
	{% elif MATERIAL == "PET" %}
	SET_PRESSURE_ADVANCE ADVANCE={PET}
	SET_GCODE_OFFSET Z_ADJUST={PETZ} MOVE=1
	{% elif MATERIAL == "ABS" %}
	SET_PRESSURE_ADVANCE ADVANCE={ABS}
	{% else %}
	{% set TEXT ="No PA value for " + MATERIAL %}
	{% endif %}
	DISPLAYTEXT TEXT="{TEXT}"

[gcode_macro PURGE_LINE]
gcode = 
	DISPLAYTEXT TEXT="Prime Line"
	G1 X75 E25 F1000
	G92 E0;
	G90
	G0 X75 Y4 F6000
	G1 Z0.2 F200
	G91
	G1 X150 E30 F1200;
	G1 Y1
	G1 X-150 E30 F1200;
	G92 E0.0
	G1 Z1 F5000

[gcode_macro PRINT_START]
gcode = 
	{% set BED_TEMP = params.BED_TEMP|default(110)|float %}
	{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(250)|float %}
	{% set ENCLOSURE_TEMP = params.ENCLOSURE_TEMP|default(45)|int %}
	{% set PROBE_TEMP = printer["gcode_macro MACROS_VARS"].probe_temp|default(0)%}
	
	SET_TEMP HEATER="bed" TEMP={BED_TEMP}
	SET_TEMP HEATER="extruder" TEMP={PROBE_TEMP} WAIT=1
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	DISPLAYTEXT TEXT="Homing"
	G28
	{% endif %}
	DISPLAYTEXT TEXT="Heating Bed"
	SET_TEMP HEATER="bed" TEMP={BED_TEMP} WAIT=1
	
	{% if not printer.z_tilt.applied %}
	DISPLAYTEXT TEXT="Z tilt thingy"
	Z_TILT_ADJUST
	{% endif %}
	MATERIAL_PA MATERIAL={FILAMENT}
	DISPLAYTEXT TEXT="Heating Extruder"
	SET_TEMP HEATER="extruder" TEMP={EXTRUDER_TEMP} WAIT=1
	
	BED_MESH_CALIBRATE
	SET_FAN_SPEED FAN=rebreather SPEED=1
	SET_FAN_SPEED FAN=stepper_fans SPEED=0.25
	MATERIAL_PA MATERIAL={FILAMENT}
	G4 P1000
	PURGE_LINE
	
	
	DISPLAYTEXT TEXT="Printing..."

[gcode_macro G32]
gcode = 
	BED_MESH_CLEAR
	G28
	Z_TILT_ADJUST
	G28
	G0 X75 Y75 Z30 F3600

[gcode_macro PRINT_END]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	{% set FILAMENT = params.FILAMENT|default(PLA) %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	M400
	G92 E0
	G1 E-25.0 F1800
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	TURN_OFF_HEATERS
	M107
	G1 Z2 F3000
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	
	{% if FILAMENT == 'ABS' or params.FILAMENT == 'ASA' %}
	NEVERMORE_END_PRINT
	{% endif %}
	
	DISPLAYTEXT TEXT="Print Complete"

[gcode_macro SET_TEMP]
gcode = 
	{% set HEATER = params.HEATER|default("")|string %}
	{% set TEMP = params.TEMP|default(0)|int %}
	{% set WAIT = params.WAIT|default(0)|int %}
	
	{% if HEATER == "extruder" %}
	{% if WAIT == 1 %}
	M109 S{TEMP}
	{% else %}
	M104 S{TEMP}
	{% endif %}
	{% else %}
	{% if WAIT == 1 %}
	M190 S{TEMP}
	{% else %}
	M140 S{TEMP}
	{% endif %}
	{% endif %}

[gcode_macro ENDING_RETRACTION]
gcode = 
	{% set RETRACT = printer["gcode_macro MACROS_VARS"].ending_length|default(0)%}
	G1 E{RETRACT*-1} F1800

[gcode_macro PARK_AT_PRINT_END]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600

[gcode_macro Homing_Variables]
variable_move_away_home = 0
variable_x_homing_pos = 150
variable_y_homing_pos = 150
variable_homing_current = 0.8
variable_homing_retract_x = 150
variable_homing_retract_y = 20
variable_homing_retract_speed = 5000
variable_z_end_pos = 30
variable_is_sensorless = True
variable_display_parameters = True
gcode = 

[homing_override]
axes = xyz
gcode = 
	DISPLAY_PARAMETERS
	
	
	SET_KINEMATIC_POSITION Z=0
	MOVE_AWAY_BEFORE_HOMING PARAMS="Z"
	WAIT TIME=2
	
	{% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}
	
	{% if home_all or 'X' in params %}
	_HOME_X
	{% endif %}
	
	{% if home_all or 'Y' in params %}
	_HOME_Y
	{% endif %}
	
	{% if home_all or 'Z' in params %}
	_HOME_Z
	{% endif %}

[gcode_macro DISPLAY_PARAMETERS]
gcode = 
	{% set DISPLAY_PARAMS = printer["gcode_macro Homing_Variables"].display_parameters %}
	{% set is_sensorless = printer["gcode_macro Homing_Variables"].is_sensorless %}
	{% set x_homing_pos = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set y_homing_pos = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	{% set homing_current = printer["gcode_macro Homing_Variables"].homing_current %}
	{% set homing_retract_x = printer["gcode_macro Homing_Variables"].homing_retract_x %}
	{% set homing_retract_y = printer["gcode_macro Homing_Variables"].homing_retract_y %}
	{% set homing_retract_speed = printer["gcode_macro Homing_Variables"].homing_retract_speed %}
	{% set z_end_pos = printer["gcode_macro Homing_Variables"].z_end_pos %}
	
	{% if DISPLAY_PARAMS == True %}
	{ action_respond_info("is_sensorless  : %d" % (is_sensorless))  }
	{ action_respond_info("x_homing_pos  : %d" % (x_homing_pos))  }
	{ action_respond_info("y_homing_pos  : %d" % (y_homing_pos))  }
	{ action_respond_info("homing_current  : %d" % (homing_current))  }
	{ action_respond_info("homing_retract_x  : %d" % (homing_retract_x))  }
	{ action_respond_info("homing_retract_y  : %d" % (homing_retract_y))  }
	{ action_respond_info("homing_retract_speed  : %d" % (homing_retract_speed))  }
	{ action_respond_info("z_end_pos  : %d" % (z_end_pos))  }
	{% endif %}

[gcode_macro MOVE_AWAY_BEFORE_HOMING]
gcode = 
	{% set MAH = printer["gcode_macro Homing_Variables"].move_away_home|default(0)%}
	{% set PARAMS = params.PARAMS|default("")|string %}
	
	{% set home_all = 'X' not in PARAMS and 'Y' not in PARAMS and 'Z' not in PARAMS %}
	
	
	{% if home_all or 'X' in PARAMS %}
	G1 X-{MAH/2}  F6000
	{% endif %}
	
	{% if home_all or 'Y' in PARAMS %}
	G1  Y-{MAH/2} F6000
	{% endif %}
	
	{% if home_all or 'Z' in PARAMS %}
	G1 Z{MAH} F100
	{% endif %}

[gcode_macro _HOME_X]
gcode = 
	DISPLAYTEXT TEXT="Homing X Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_x|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION X=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="X"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 X
	
	G91
	G1 X-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Y]
gcode = 
	DISPLAYTEXT TEXT="Homing Y Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_y|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION Y=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="Y"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 Y
	
	G91
	G1 Y-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Z]
gcode = 
	{% set Ez = printer["gcode_macro Homing_Variables"].z_end_pos %}
	{% set Hx = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set Hy = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	
	DISPLAYTEXT TEXT="Homing Z Axis"
	
	G1 X{Hx} Y{Hy} F15000
	G28 Z
	G1 Z{Ez}

[gcode_macro ABSOLUTE_COORDINATES]
gcode = 
	G90

[gcode_macro RELATIVE_COORDINATES]
gcode = 
	G91

[gcode_macro DISPLAYTEXT]
gcode = 
	{% set TEXT = params.TEXT|default("")|string %}
	RESPOND MSG="{TEXT}"
	SET_DISPLAY_TEXT MSG="{TEXT}"

[gcode_macro DISPLAY_PROGRESS]
gcode = 
	{% set TOTAL_LAYERS = params.TOTAL_LAYERS|default("")|string %}
	{% set CURRENT_LAYER = params.CURRENT_LAYER|default("")|string %}
	RESPOND MSG="Total layers {TOTAL_LAYERS}, current layer {CURRENT_LAYER}"

[gcode_macro TEMPERATURE_WAIT]
rename_existing = _TEMPERATURE_WAIT
gcode = 
	{% set SENSOR = params.SENSOR|default("")|string %}
	{% set MINIMUM = params.MINIMUM|int %}
	{% set MSG = "Enclosure temperature has reached " + MINIMUM |string %}
	
	DISPLAYTEXT TEXT="Heatsoaking..."
	_TEMPERATURE_WAIT SENSOR="{SENSOR}" MINIMUM={MINIMUM}
	DISPLAYTEXT TEXT="{MSG}"

[gcode_macro WAIT]
gcode = 
	{% set TIME = params.TIME|default(0)|int %}
	G4 P{TIME*1000}

[gcode_macro CHOME]
gcode = 
	{% if printer.toolhead.homed_axes != "xyz" %}
	DISPLAYTEXT TEXT="Homing.."
	G28
	{% endif %}

[gcode_macro RESET_EXTRUDER]
gcode = 
	G92 E0

[gcode_macro PARK_TOOLHEAD]
gcode = 
	{% set th = printer.toolhead %}
	ABSOLUTE_COORDINATES
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y//2} F15000

[gcode_macro DUMP_VARIABLES]
gcode = 
	{% set filter_name = params.NAME|default('')|string|lower %}
	{% set filter_value = params.VALUE|default('')|string|lower %}
	{% set show_cfg = params.SHOW_CFG|default(0)|int %}
	
	{% set out = [] %}
	
	{% for key1 in printer %}
	{% for key2 in printer[key1] %}
	{% if (show_cfg or not (key1|lower == 'configfile' and key2|lower in ['config', 'settings'])) and (filter_name in key1|lower or filter_name in key2|lower) and filter_value in printer[key1][key2]|string|lower %}
	{% set dummy = out.append("printer['%s'].%s = %s" % (key1, key2, printer[key1][key2])) %}
	{% endif %}
	{% else %}
	{% if filter_name in key1|lower and filter_value in printer[key1]|string|lower %}
	{% set dummy = out.append("printer['%s'] = %s" % (key1, printer[key1])) %}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	{action_respond_info(out|join("\n"))}

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=UNLOAD_FILAMENT_state
	
	M82
	G92 E0
	G1 E2 F3600
	G1 E0 F3600
	G1 E3 F3600
	G1 E0 F3600
	G1 E4 F3600
	G1 E0 F3600
	
	M83
	G1 E-20 F3600
	G4 P3000
	G1 E{DISTANCE|float * -1} F3000
	RESTORE_GCODE_STATE NAME=UNLOAD_FILAMENT_state

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=LOAD_FILAMENT_state
	
	M83
	G92 E0
	G1 E{DISTANCE|float} F200
	
	
	
	
	G1 E50 F150
	
	
	G92 E0
	RESTORE_GCODE_STATE NAME=LOAD_FILAMENT_state

[gcode_macro PID_HOTEND]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro PID_BED]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=80

[gcode_macro Z_ENDSTOP]
gcode = 
	Z_ENDSTOP_CALIBRATE

[gcode_macro PROBE_CAL]
gcode = 
	
	G28
	PROBE_CALIBRATE

[gcode_macro IS_CAL]
gcode = 
	
	G28
	SHAPER_CALIBRATE

[gcode_macro SPEEDTEST]
gcode = 
	
	
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest_state
	
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{maxX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{maxX} Y{minY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest_state

[gcode_macro SPEEDTEST2]
gcode = 
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest2_state
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest2_state

[gcode_macro PRESSURE_ADVANCE_CALIBRATION]
description = Calibrate the pressure advance by printing a grid pattern
gcode = 
	
	
	
	{% set pa_start     = params.START|default(0.02)|float %}
	{% set pa_increment = params.INCREMENT|default(0.005)|float %}
	
	{% set do_raft = params.RAFT|default(1)|int %}
	
	{% set print_size      = params.SIZE|default(120)|int %}
	{% set num_bands       = params.BANDS_LIMIT|default(999)|int %}
	{% set lines_per_band  = params.LINES_PER_BAND|default(6)|int %}
	{% set e_multiplier    = params.EXTRUSION_MULTIPLIER|default(1.25 if do_raft == 1 else 1.5)|float %},
	{% set retract_length  = params.RETRACT|default(0.6)|float %}
	{% set initial_purge   = params.PURGE_MM|default(8)|int %}
	
	{% set feedrate_control = params.CONTROL_SPEED|default(30)|int * 60 %}
	{% set feedrate_outer   = params.OUTER_SPEED|default(40)|int * 60 %}
	{% set feedrate_inner   = params.INNER_SPEED|default(120)|int * 60 %}
	{% set feedrate_travel  = params.TRAVEL_SPEED|default(200)|int * 60 %}
	{% set feedrate_raft    = params.RAFT_SPEED|default(120)|int * 60 %}
	{% set feedrate_z       = 5 * 60 %}
	{% set feedrate_retract = 50 * 60 %}
	
	{% set spacing_line  = params.LINE_SPACING|default(0.4)|float %}
	{% set spacing_band  = 2 %}
	{% set spacing_raft  = 2 %}
	
	{% set fast_line_ratio_percent = 50 %}
	
	{% set lines_per_band    = [2, lines_per_band]|max %}
	{% set e_multiplier      = [1, e_multiplier]|max %}
	{% set num_lines_control = (lines_per_band / 2)|round(0, 'floor')|int %}
	{% set num_lines_test    = (lines_per_band / 2)|round(0, 'ceil')|int %}
	{% set spacing_line      = spacing_line * (1 + e_multiplier - 1.25) %}
	
	{% set max_x = printer.toolhead.axis_maximum.x|float %}
	{% set max_y = printer.toolhead.axis_maximum.y|float %}
	{% set nozzle_diameter = printer.configfile.config['extruder'].nozzle_diameter|float %}
	{% set line_width    = nozzle_diameter * 1.25 %}
	{% set line_height   = nozzle_diameter / 2 %}
	{% set z_hop_height  = 2 * line_height %}
	{% set e_per_mm      = (line_width * line_height) / (3.1415 * (1.75/2)**2) %}
	{% set spacing_purge = line_height * 0.8 %}
	
	{% set spacing_raft   = (spacing_raft / line_width)|round * line_width %}
	{% set num_raft_lines = ([print_size, max_x]|min / spacing_raft)|round(0, 'floor')|int %}
	{% set print_width    = num_raft_lines * spacing_raft %}
	
	{% set band_height      = lines_per_band * line_width + (lines_per_band - 1) * spacing_line + spacing_band %}
	{% set bands_per_height = (([print_size, max_y]|min  - spacing_purge) / band_height)|round(0, 'floor')|int %}
	{% set num_bands        = [num_bands, bands_per_height]|min %}
	{% set print_height     = num_bands * band_height - spacing_band - spacing_purge %}
	
	{% set slow_line_length = ((print_width * (1 - fast_line_ratio_percent / 100) / 2) / spacing_raft)|round * spacing_raft + spacing_raft / 2 %}
	{% set fast_line_length = print_width - slow_line_length * 2 %}
	{% set thick_raft_num1 = (slow_line_length / spacing_raft)|round|int %}
	{% set thick_raft_num2  = num_raft_lines - thick_raft_num1 + 1 %}
	
	{% set x_start = max_x / 2 - print_width  / 2 %}
	{% set y_start = max_y / 2 - print_height / 2 %}
	
	{action_respond_info("")}
	{action_respond_info("Starting Pressure Advance calibration print.")}
	{action_respond_info("")}
	{action_respond_info("This operation can not be interrupted by normal means. Hit the \"emergency stop\" button once the print starts exhibiting PA values that are obviously too high.")}
	{action_respond_info("")}
	{action_respond_info("PA of first band: %.4f" % pa_start)}
	{action_respond_info("PA of last band: %.4f" % (num_bands * pa_increment))}
	{action_respond_info("PA increment per band: %.4f" % pa_increment)}
	{action_respond_info("Number of bands: %d" % num_bands)}
	{action_respond_info("")}
	{action_respond_info("Inspect the printed model. "
	"Look at the top and bottom lines in each band, on the right side of the two vertical raft bars (where the print speeds change). "
	"Find the highest band from the bottom where the lines at its top still resemble the lines at its bottom, with no visible extrusion width irregularities. "
	"Your final Pressure Advance value would then be:"
	)}
	{action_respond_info("")}
	{action_respond_info("PA = %.4f + (%.4f * band_number)" % (pa_start, pa_increment))}
	{action_respond_info("")}
	{action_respond_info("Update your [extruder] config section and set \"pressure_advance\" to the value you calculated.")}
	{action_respond_info("")}
	
	
	
	
	
	
	
	
	
	SAVE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION
	{% set pa_saved = printer.configfile.settings['extruder'].pressure_advance %}
	SET_PRESSURE_ADVANCE ADVANCE={pa_start}
	
	
	
	
	M117 Priming
	G90
	G0 X{x_start} Y{y_start} Z{line_height} F{feedrate_travel}
	G91
	G1 E{initial_purge} F{5 * 60}
	G1 X{print_width}  E{print_width * e_per_mm} F{feedrate_raft / 2}
	G1 Y{line_width}   E{line_width * e_per_mm}  F{feedrate_raft / 2}
	G1 X-{print_width} E{print_width * e_per_mm} F{feedrate_raft / 2}
	
	
	
	
	{% if do_raft == 1 %}
	G0 F{feedrate_raft}
	
	{% for curr_raft_line in range(1, num_raft_lines + 2) %}
	
	{% if curr_raft_line == thick_raft_num1 or curr_raft_line == thick_raft_num2 %}
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	G1 Y{loop.cycle(-1.0, 1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	{% endif %}
	
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	
	
	{% if not loop.last %}
	{% set horizontal_move = spacing_raft - (2 * line_width if curr_raft_line == thick_raft_num1 - 1 or curr_raft_line == thick_raft_num2 - 1 else 0) %}
	G1 X{horizontal_move} E{horizontal_move * e_per_mm}
	{% endif %}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	{% endif %}
	
	
	
	
	M117 Printing bands
	G90
	G0 X{x_start} Y{y_start + 2 * line_width + spacing_purge} F{feedrate_travel}
	G0 Z{line_height + (line_height if do_raft == 1 else 0)} F{feedrate_z}
	G91
	G1 E{retract_length} F{feedrate_retract}
	
	
	{% for curr_band_num in range(1, num_bands + 1) %}
	{% set outer_loop = loop %}
	
	{% set curr_pa_value = pa_start + (curr_band_num - 1) * pa_increment %}
	SET_PRESSURE_ADVANCE ADVANCE={curr_pa_value}
	M117 Band {curr_band_num} PA {curr_pa_value|round(4)}
	
	
	{% for _ in range(num_lines_control) %}
	G1 X{print_width} E{print_width * e_per_mm * e_multiplier} F{feedrate_control}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	G0 X-{print_width} Y{spacing_line + line_width} F{feedrate_travel}
	
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endfor %}
	
	
	{% for _ in range(num_lines_test) %}
	{% for data in [{'mm': slow_line_length, 'f': feedrate_outer}, {'mm': fast_line_length, 'f': feedrate_inner}, {'mm': slow_line_length, 'f': feedrate_outer}] %}
	G1 X{data.mm} E{data.mm * e_per_mm * e_multiplier} F{data.f}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	{% if not (outer_loop.last and loop.last) %}
	G0 X-{print_width} Y{(spacing_line if not loop.last else spacing_band) + line_width} F{feedrate_travel}
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	
	
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z20 F{feedrate_z}
	G0 X-{print_width / 2} Y{[50, max_y - (y_start + print_height)]|min} F{feedrate_travel}
	
	M117
	SET_PRESSURE_ADVANCE ADVANCE={pa_saved}
	RESTORE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION

[gcode_macro TEST_SPEED]
gcode = 
	
	{% set speed  = params.SPEED|default(printer.configfile.settings.printer.max_velocity)|int %}
	
	{% set iterations = params.ITERATIONS|default(5)|int %}
	
	{% set accel  = params.ACCEL|default(printer.configfile.settings.printer.max_accel)|int %}
	
	{% set bound = params.BOUND|default(20)|int %}
	
	{% set smallpatternsize = SMALLPATTERNSIZE|default(20)|int %}
	
	
	
	{% set x_min = printer.toolhead.axis_minimum.x + bound %}
	{% set x_max = printer.toolhead.axis_maximum.x - bound %}
	{% set y_min = printer.toolhead.axis_minimum.y + bound %}
	{% set y_max = printer.toolhead.axis_maximum.y - bound %}
	
	
	
	{% set x_center = (printer.toolhead.axis_minimum.x|float + printer.toolhead.axis_maximum.x|float ) / 2 %}
	{% set y_center = (printer.toolhead.axis_minimum.y|float + printer.toolhead.axis_maximum.y|float ) / 2 %}
	
	
	{% set x_center_min = x_center - (smallpatternsize/2) %}
	{% set x_center_max = x_center + (smallpatternsize/2) %}
	{% set y_center_min = y_center - (smallpatternsize/2) %}
	{% set y_center_max = y_center + (smallpatternsize/2) %}
	
	
	SAVE_GCODE_STATE NAME=TEST_SPEED
	
	
	{ action_respond_info("TEST_SPEED: x_min %d, y_min %d, x_max %d, y_max %d" % (x_min, y_min, x_max, y_max)) }
	{ action_respond_info("TEST_SPEED: starting %d iterations at speed %d, accel %d" % (iterations, speed, accel)) }
	
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	G28 X Y
	{% endif %}
	
	
	
	
	
	
	
	
	
	
	
	
	G4 P1000
	GET_POSITION
	
	
	G0 X{x_min} Y{y_min} Z{bound + 10} F{speed*60}
	
	
	SET_VELOCITY_LIMIT VELOCITY={speed} ACCEL={accel} ACCEL_TO_DECEL={accel / 2}
	
	{% for i in range(iterations) %}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	{% endfor %}
	
	
	SET_VELOCITY_LIMIT VELOCITY={printer.configfile.settings.printer.max_velocity} ACCEL={printer.configfile.settings.printer.max_accel} ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel}
	
	
	G28 X Y
	
	
	
	G4 P1000
	GET_POSITION
	
	
	RESTORE_GCODE_STATE NAME=TEST_SPEED

[gcode_macro SETUP_KAMP_MESHING]
gcode = 
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=display_parameters   VALUE={params.DISPLAY_PARAMETERS|default(True)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=led_enable   VALUE={params.LED_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=status_macro VALUE='"{params.STATUS_MACRO|default('status_meshing')|string}"'
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_enable VALUE={params.FUZZ_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_min    VALUE={params.FUZZ_MIN|default(0)|float}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_max    VALUE={params.FUZZ_MAX|default(4)|float}
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=probe_dock_enable  VALUE={params.PROBE_DOCK_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=attach_macro VALUE='"{params.ATTACH_MACRO|default('Attach_Probe')|string}"'
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=detach_macro VALUE='"{params.DETACH_MACRO|default('Dock_Probe')|string}"'

[input_shaper]
shaper_freq_x = 86.8
shaper_type_x = zv
shaper_freq_y = 62.2
shaper_type_y = zv

[probe]
z_offset = -0.0400

[beacon model default]
model_coef = 1.409155451498927,
	1.7229833219997472,
	0.7624260199879447,
	0.3933310021549746,
	0.3504714980336664,
	0.3215136667184013,
	-0.12014580629124338,
	-0.22419779942999016,
	0.19713656245482147,
	0.188750402116144
model_domain = 3.120873231931901e-07,3.332026812812074e-07
model_range = 0.200000,5.000000
model_temp = 23.909578
model_offset = 0.02500

[bed_mesh default]
version = 1
points = 
	-0.062140, -0.036984, -0.007379, 0.031314, 0.058627, 0.084848, 0.107257, 0.111945, 0.135207, 0.152355, 0.170171
	-0.128044, -0.093273, -0.053917, -0.019434, 0.015362, 0.051030, 0.076081, 0.091292, 0.113629, 0.133648, 0.155842
	-0.171323, -0.136118, -0.096393, -0.057201, -0.010727, 0.024397, 0.048697, 0.072530, 0.099236, 0.126818, 0.150713
	-0.201543, -0.161727, -0.119034, -0.066854, -0.018463, 0.014217, 0.047420, 0.076211, 0.103883, 0.134441, 0.171920
	-0.229879, -0.188570, -0.139992, -0.085341, -0.040984, 0.002604, 0.042138, 0.073877, 0.104620, 0.133705, 0.171879
	-0.263766, -0.213518, -0.162008, -0.108459, -0.058518, -0.007646, 0.032310, 0.069869, 0.102956, 0.138912, 0.180918
	-0.296565, -0.242362, -0.188285, -0.127789, -0.071974, -0.019641, 0.027806, 0.070759, 0.105252, 0.142100, 0.184275
	-0.296242, -0.233747, -0.171416, -0.107834, -0.048348, 0.004540, 0.056827, 0.100566, 0.141602, 0.182628, 0.230079
	-0.281192, -0.228380, -0.164876, -0.101596, -0.030960, 0.023575, 0.079761, 0.121563, 0.171967, 0.216584, 0.265930
	-0.307454, -0.252371, -0.190633, -0.113183, -0.041936, 0.019598, 0.074971, 0.120663, 0.178367, 0.230549, 0.282552
	-0.324293, -0.258430, -0.193413, -0.119856, -0.045648, 0.021113, 0.080729, 0.133249, 0.192194, 0.246004, 0.297448
x_count = 11
y_count = 11
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 59.444
max_x = 240.556
min_y = 75.541944
max_y = 224.458048
=======================
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 141, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/pi/klipper/klippy/klippy.py", line 130, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/pi/klipper/klippy/extras/beacon.py", line 3532, in load_config
    beacon = BeaconProbe(config)
  File "/home/pi/klipper/klippy/extras/beacon.py", line 99, in __init__
    self.homing_helper = BeaconHomingHelper.create(self, config)
  File "/home/pi/klipper/klippy/extras/beacon.py", line 2240, in create
    return BeaconHomingHelper(beacon, config, home_xy_position)
  File "/home/pi/klipper/klippy/extras/beacon.py", line 2248, in __init__
    raise config.error(
configparser.Error: home_xy_position cannot be used with [homing_override]
webhooks client 547906444256: New connection
webhooks client 547906444256: Client info {'program': 'Moonraker', 'version': 'v0.8.0-337-g546a17f'}
Attempting MCU 'mcu' reset
Unable to issue reset command on MCU 'rpi'
Unable to issue reset command on MCU 'sht36'
webhooks client 547906444256: Disconnected
Restarting printer
Start printer at Sun Apr 28 07:16:12 2024 (1714284972.9 1042567.8)
===== Config file =====
[exclude_object]

[idle_timeout]
timeout = 3600

[force_move]
enable_force_move = True

[respond]
default_type = echo

[virtual_sdcard]
path = /home/pi/printer_data/gcodes
on_error_gcode = 
	CANCEL_PRINT

[pause_resume]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = BASE_CANCEL_PRINT
variable_park = True
gcode = 
	TURN_OFF_HEATERS
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	PRINT_END
	BASE_CANCEL_PRINT

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
variable_extrude = 1.0
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 2.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32f446xx_2D0053000E51323130373733-if00

[temperature_sensor Spider]
sensor_type = temperature_mcu
min_temp = 10
max_temp = 100

[board_pins spider]
aliases = 
	
	X_STEP=PE11, X_DIR=PE10, X_ENABLE=PE9,
	Y_STEP=PD8, Y_DIR=PB12, Y_ENABLE=PD9,
	Z_STEP=PD14, Z_DIR=PD13, Z_ENABLE=PD15,
	E0_STEP=PD5, E0_DIR=PD6, E0_ENABLE=PD4,
	E1_STEP=PE6, E1_DIR=PC13, E1_ENABLE=PE5,
	E2_STEP=PE2, E2_DIR=PE4, E2_ENABLE=PE3,
	E3_STEP=PD12, E3_DIR=PC4, E3_ENABLE=PE8,
	E4_STEP=PE1, E4_DIR=PE0, E4_ENABLE=PC5,
	
	X_MIN=PB14, X_MAX=PA1,
	Y_MIN=PB13, Y_MAX=PA2,
	Z_MIN=PA0, Z_MAX=PA3,
	
	X_UART=PE7, Y_UART=PE15, Z_UART=PD10,
	E0_UART=PD7, E1_UART=PC14, E2_UART=PC15,
	E3_UART=PA15, E4_UART=PD11,
	
	E_HEATER=PB15, E_THERMISTOR=PC0,
	E1_HEATER=PC8, E1_THERMISTOR=PC1,
	E2_HEATER=PB3, E2_THERMISTOR=PC2,
	BED_HEATER=PB4, BED_THERMISTOR=PC3,
	FAN0=PB0, FAN1=PB1, FAN2=PB2,
	
	LED-R=PB6, LED-G=PB5, LED-B=PB7,
	
	EXP1_1=PC9, EXP1_3=PC11, EXP1_5=PC10, EXP1_7=PD0, EXP1_9=<GND>,
	EXP1_2=PA8, EXP1_4=PD2, EXP1_6=PC12, EXP1_8=PD1, EXP1_10=<5V>,
	
	EXP2_1=PA6, EXP2_3=PC6, EXP2_5=PC7, EXP2_7=PB10, EXP2_9=<GND>,
	EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<5V>

[mcu rpi]
serial = /tmp/klipper_host_mcu

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 10
max_temp = 100

[gcode_shell_command rpi_fan_50]
command = i2cset -y 1 0x01a 0x32
timeout = 30.
verbose = True

[gcode_shell_command rpi_fan_25]
command = i2cset -y 1 0x01a 0x19
timeout = 30.
verbose = True

[gcode_macro rpi_fan_50]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_50

[gcode_macro rpi_fan_25]
gcode = 
	RUN_SHELL_COMMAND CMD=rpi_fan_25

[mcu sht36]
canbus_uuid = 943ff2eb48fd

[temperature_sensor sht36]
sensor_type = temperature_mcu
sensor_mcu = sht36

[printer]
kinematics = corexy
max_velocity = 800
max_accel = 20000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[extruder]
sensor_pin = sht36:PA3
sensor_type = PT1000
heater_pin = sht36:PA8
min_temp = 10
max_temp = 270
max_power = 1.0
min_extrude_temp = 10
control = pid
pid_kp = 20.362
pid_ki = 2.225
pid_kd = 46.579
pressure_advance_smooth_time = 0.040
max_extrude_only_velocity = 120
max_extrude_only_accel = 800
max_extrude_only_distance = 1150
max_extrude_cross_section = 9999
nozzle_diameter = 0.400
filament_diameter = 1.75
step_pin = sht36:PB4
dir_pin = !sht36:PB3
enable_pin = !sht36:PA15
full_steps_per_rotation = 200
rotation_distance = 22.66103
gear_ratio = 50:10
microsteps = 16
pressure_advance = 0.05

[temperature_sensor chamber]
sensor_type = NTC 100K MGB18-104F39050L32
sensor_pin = PC2
min_temp = -100
max_temp = 100
gcode_id = C

[heater_bed]
heater_pin = PB4
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PB0
max_power = 0.9
min_temp = -160
max_temp = 120
control = pid
pid_kp = 41.450
pid_ki = 1.322
pid_kd = 324.866

[multi_pin stepper_drivers_multipin]
pins = PB5, PB6, PB7

[controller_fan stepper_drivers]
pin = multi_pin:stepper_drivers_multipin
hardware_pwm = False
max_power = 1.0
fan_speed = 0.75
shutdown_speed = 0.0
stepper = stepper_x, stepper_y

[heater_fan controller_fan]
pin = PB2
cycle_time = 0.00004
off_below = 0.1
kick_start_time = 0.5
heater = heater_bed
heater_temp = 50.0
max_power = 1.0

[heater_fan hotend_fan]
pin = sht36:PB10
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 40.0

[fan]
pin = sht36:PB11
max_power = 0.85
cycle_time = 0.00005
kick_start_time = 0
off_below = 0.0
shutdown_speed = 0

[fan_generic stepper_fans]
pin = PA13
max_power = 0.5
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.0001

[fan_generic rebreather]
pin = PA14
max_power = 1.0
shutdown_speed = 0.0
kick_start_time = 0.5
hardware_pwm = False
cycle_time = 0.00010

[gcode_macro rebreather_start_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.5

[gcode_macro rebreather_end_print]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.7
	UPDATE_DELAYED_GCODE ID=rebreather_stop_delayed DURATION=900

[delayed_gcode rebreather_stop_delayed]
gcode = 
	SET_FAN_SPEED FAN=rebreather SPEED=0.0

[display]
lcd_type = uc1701
cs_pin = PC11
a0_pin = PD2
rst_pin = PC10
encoder_pins = ^PC6,^PC7
click_pin = ^!PA8
contrast = 63
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6
spi_software_sclk_pin = PA5
display_group = __voron_display_16x4

[gcode_macro M300]
gcode = SET_PIN PIN=BEEPER_pin VALUE={S}
	G4 P{P}
	SET_PIN PIN=BEEPER_pin VALUE=0

[neopixel mini12864]
pin = PC12
chain_count = 60
initial_red = 0.1
initial_green = 0.5
initial_blue = 0.0
color_order = RGB

[display_template _heater_temperature]
param_heater_name = "extruder"
text = 
	{% if param_heater_name in printer %}
	{% set heater = printer[param_heater_name] %}
	
	{% if param_heater_name == "heater_bed" %}
	{% if heater.target %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~bed_heat{frame}~
	{% else %}
	~bed~
	{% endif %}
	{% else %}
	~extruder~
	{% endif %}
	
	{ "%3.0f" % (heater.temperature,) }
	
	{% if heater.target and (heater.temperature - heater.target)|abs > 2 %}
	~right_arrow~
	{ "%0.0f" % (heater.target,) }
	{% endif %}
	~degrees~
	{% endif %}

[display_template _fan_speed]
text = 
	{% if 'fan' in printer %}
	{% set speed = printer.fan.speed %}
	{% if speed %}
	{% set frame = (printer.toolhead.estimated_print_time|int % 2) + 1 %}
	~fan{frame}~
	{% else %}
	~fan1~
	{% endif %}
	{ "{:>4.0%}".format(speed) }
	{% endif %}

[display_template _printing_time]
text = 
	{% set ptime = printer.idle_timeout.printing_time %}
	{ "%02d:%02d" % (ptime // (60 * 60), (ptime // 60) % 60) }

[display_template _print_status]
text = 
	{% if printer.display_status.message %}
	{ printer.display_status.message }
	{% elif printer.idle_timeout.printing_time %}
	{% set pos = printer.toolhead.position %}
	{ "X%-4.0fY%-4.0fZ%-5.2f" % (pos.x, pos.y, pos.z) }
	{% else %}
	Ready
	{% endif %}

[display_data __voron_display_16x4 extruder]
position = 0, 0
text = 
	{% set active_extruder = printer.toolhead.extruder %}
	{ render("_heater_temperature", param_heater_name=active_extruder) }

[display_data __voron_display_16x4 fan]
position = 0, 10
text = { render("_fan_speed") }

[display_data __voron_display_16x4 heater_bed]
position = 1, 0
text = { render("_heater_temperature", param_heater_name="heater_bed") }

[display_data __voron_display_16x4 chamber]
position = 1,10
text = 
	{% set chamber = printer['temperature_sensor chamber'] %}
	~chamber~
	{ "%3.0f" % (chamber.temperature,) }
	~degrees~

[display_data __voron_display_16x4 print_progress]
position = 2, 0
text = { "{:^10.0%}".format(printer.display_status.progress) }

[display_data __voron_display_16x4 progress_bar]
position = 2, 1
text = { draw_progress_bar(2, 0, 10, printer.display_status.progress) }

[display_data __voron_display_16x4 printing_time]
position = 2, 10
text = { "%6s" % (render("_printing_time").strip(),) }

[display_data __voron_display_16x4 print_status]
position = 3, 0
text = { render("_print_status") }

[display_glyph extruder]
data = 
	................
	................
	..************..
	.....******.....
	..************..
	.....******.....
	..************..
	................
	....********....
	....******.*....
	....********....
	................
	......****......
	.......**.......
	................
	................
hd44780_slot = 0
hd44780_data = 
	..*..
	.*.*.
	.*.*.
	.*.*.
	.*.*.
	*...*
	*...*
	.***.

[display_glyph bed]
data = 
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.....
	*****
	*.*.*
	*...*
	*.*.*
	*****
	.....
	.....

[display_glyph bed_heat1]
data = 
	................
	................
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	.*..*
	*..*.
	.*..*
	*..*.
	.....
	*****
	.....
	.....

[display_glyph bed_heat2]
data = 
	................
	................
	..*....*....*...
	...*....*....*..
	..*....*....*...
	.*....*....*....
	..*....*....*...
	...*....*....*..
	..*....*....*...
	................
	................
	...*********....
	..*.........*...
	.*************..
	................
	................
hd44780_slot = 1
hd44780_data = 
	*..*.
	.*..*
	*..*.
	.*..*
	.....
	*****
	.....
	.....

[display_glyph fan1]
data = 
	................
	................
	....***.........
	...****....**...
	...****...****..
	....***..*****..
	.....*....****..
	.......**.......
	.......**.......
	..****....*.....
	..*****..***....
	..****...****...
	...**....****...
	.........***....
	................
	................

[display_glyph fan2]
data = 
	................
	................
	.......****.....
	.......****.....
	.......***......
	..**...**.......
	..***...........
	..****.**.****..
	..****.**.****..
	...........***..
	.......**...**..
	......***.......
	.....****.......
	.....****.......
	................
	................

[display_glyph chamber]
data = 
	................
	****************
	*....*....*....*
	*....*....*....*
	*....******....*
	*..............*
	*..............*
	*.....****.....*
	*.***.*..*.***.*
	*.....****.....*
	*......**......*
	*..............*
	*.************.*
	*...*......*...*
	****************
	................

[display_glyph feedrate]
data = 
	................
	................
	***.***.***.**..
	*...*...*...*.*.
	**..**..**..*.*.
	*...*...*...*.*.
	*...***.***.**..
	................
	**...*..***.***.
	*.*.*.*..*..*...
	**..***..*..**..
	*.*.*.*..*..*...
	*.*.*.*..*..***.
	................
	................
	................
hd44780_slot = 3
hd44780_data = 
	***..
	*....
	**...
	*.***
	..*.*
	..**.
	..*.*
	.....

[display_glyph fan]
hd44780_slot = 2
hd44780_data = 
	.....
	*..**
	**.*.
	..*..
	.*.**
	**..*
	.....
	.....

[display_glyph clock]
hd44780_slot = 4
hd44780_data = 
	.....
	.***.
	*..**
	*.*.*
	*...*
	.***.
	.....
	.....

[display_glyph degrees]
hd44780_slot = 5
hd44780_data = 
	.**..
	*..*.
	*..*.
	.**..
	.....
	.....
	.....
	.....

[display_glyph usb]
hd44780_slot = 6
hd44780_data = 
	.***.
	.***.
	.***.
	*****
	*****
	*****
	..*..
	..*..

[display_glyph sd]
hd44780_slot = 6
hd44780_data = 
	.....
	..***
	.****
	*****
	*****
	*****
	*****
	.....

[delayed_gcode setdisplayneopixel]
initial_duration = 1
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro red]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro orange]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0.5 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro green]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro blue]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro white]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=1.0 INDEX=1 TRANSMIT=1

[gcode_macro yellow]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=1.0 BLUE=0 INDEX=1 TRANSMIT=1

[gcode_macro purple]
gcode = 
	SET_LED LED=mini12864 RED=0.6 GREEN=0.6 BLUE=1.0 INDEX=3 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=2 TRANSMIT=1
	SET_LED LED=mini12864 RED=1.0 GREEN=0 BLUE=1.0 INDEX=1 TRANSMIT=1

[stepper_x]
step_pin = PE11
dir_pin = !PE10
enable_pin = !PE9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 300
position_max = 300
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PE7
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
interpolate = True
diag0_pin = ^!PB14
run_current = 1
driver_sgt = 1

[stepper_y]
step_pin = PD8
dir_pin = !PB12
enable_pin = !PD9
rotation_distance = 50
microsteps = 128
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 310
position_max = 310
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PE15
spi_software_mosi_pin = PE14
spi_software_miso_pin = PE13
spi_software_sclk_pin = PE12
diag0_pin = ^!PB13
interpolate = True
run_current = 1
driver_sgt = 1

[stepper_z]
step_pin = PE6
dir_pin = PC13
enable_pin = !PE5
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 240
position_min = -5
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 0.0

[tmc2209 stepper_z]
uart_pin = PC14
uart_address = 0
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z1]
step_pin = PE2
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z1]
uart_pin = PC15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z2]
step_pin = PD12
dir_pin = PC4
enable_pin = !PE8
rotation_distance = 4
full_steps_per_rotation = 200
microsteps = 32

[tmc2209 stepper_z2]
uart_pin = PA15
interpolate = True
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[tmc2209 extruder]
uart_pin = sht36:PB5
interpolate = false
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[gcode_arcs]
resolution = 1.0

[output_pin LIGHTS]
pin = PC8
pwm = true
shutdown_value = 0
value = 1
cycle_time = 0.01

[gcode_macro LIGHTS_ON]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.6

[gcode_macro LIGHTS_ON_20]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.20

[gcode_macro LIGHTS_OFF]
gcode = 
	SET_PIN PIN=LIGHTS VALUE=0.0

[neopixel sb_leds]
pin = sht36:PB0
chain_count = 3
color_order = GRBW
initial_red = 0.0
initial_green = 0.0
initial_blue = 0.0
initial_white = 0.0

[gcode_macro _sb_vars]
variable_colors = {
	'logo': {
	'busy': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cleaning': {'r': 0.0, 'g': 0.02, 'b': 0.5, 'w': 0.0},
	'calibrating_z': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	'heating': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'homing': {'r': 0.0, 'g': 0.6, 'b': 0.2, 'w': 0.0},
	'leveling': {'r': 0.5, 'g': 0.1, 'b': 0.4, 'w': 0.0},
	'meshing': {'r': 0.2, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'printing': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'standby': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'red': {'r': 0.4, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'orange': {'r': 0.3, 'g': 0.18, 'b': 0.0, 'w': 0.0},
	'green': {'r': 0.0, 'g': 1.0, 'b': 0.0, 'w': 0.0},
	'blue': {'r': 0.0, 'g': 0.0, 'b': 0.5, 'w': 0.0},
	'white': {'r': 1.0, 'g': 1.0, 'b': 1.0, 'w': 0.0},
	'yellow': {'r': 0.4, 'g': 0.4, 'b': 0.0, 'w': 0.0},
	'purple': {'r': 0.8, 'g': 0., 'b': 0.35, 'w': 0.0},
	},
	'nozzle': {
	'heating': {'r': 0.8, 'g': 0.35, 'b': 0.0, 'w':0.0},
	'off': {'r': 0.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'on': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':1.0},
	'standby': {'r': 0.8, 'g': 0.8, 'b': 0.8, 'w':0.8},
	},
	'thermal': {
	'hot': {'r': 1.0, 'g': 0.0, 'b': 0.0, 'w': 0.0},
	'cold': {'r': 0.3, 'g': 0.0, 'b': 0.3, 'w': 0.0}
	}
	}
variable_logo_led_name = "sb_leds"
variable_logo_idx = "3"
variable_nozzle_led_name = "sb_leds"
variable_nozzle_idx = "1,2"
gcode = 

[gcode_macro _set_sb_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = params.LED|string %}
	{% set idx = (params.IDX|string).split(',') %}
	{% set transmit_last = params.TRANSMIT|default(1) %}
	
	{% for led_index in idx %}
	{% set transmit=transmit_last if loop.last else 0 %}
	set_led led={led} red={red} green={green} blue={blue} white={white} index={led_index} transmit={transmit}
	{% endfor %}

[gcode_macro _set_sb_leds_by_name]
gcode = 
	{% set leds_name = params.LEDS %}
	{% set color_name = params.COLOR %}
	{% set color = printer["gcode_macro _sb_vars"].colors[leds_name][color_name] %}
	{% set led = printer["gcode_macro _sb_vars"][leds_name + "_led_name"] %}
	{% set idx = printer["gcode_macro _sb_vars"][leds_name + "_idx"] %}
	{% set transmit = params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={color.r} green={color.g} blue={color.b} white={color.w} idx="{idx}" transmit={transmit}

[gcode_macro _set_logo_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].logo_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].logo_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro _set_nozzle_leds]
gcode = 
	{% set red = params.RED|default(0)|float %}
	{% set green = params.GREEN|default(0)|float %}
	{% set blue = params.BLUE|default(0)|float %}
	{% set white = params.WHITE|default(0)|float %}
	{% set led = printer["gcode_macro _sb_vars"].nozzle_led_name %}
	{% set idx = printer["gcode_macro _sb_vars"].nozzle_idx %}
	{% set transmit=params.TRANSMIT|default(1) %}
	
	_set_sb_leds led={led} red={red} green={green} blue={blue} white={white} idx="{idx}" transmit={transmit}

[gcode_macro set_logo_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_logo_leds red=0 blue=0 green=0 white=0 transmit={transmit}

[gcode_macro set_nozzle_leds_on]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="on" transmit={transmit}

[gcode_macro set_nozzle_leds_off]
gcode = 
	{% set transmit=params.TRANSMIT|default(1) %}
	_set_sb_leds_by_name leds="nozzle" color="off" transmit={transmit}

[gcode_macro status_off]
gcode = 
	set_logo_leds_off transmit=0
	set_nozzle_leds_off

[gcode_macro status_ready]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="standby" transmit=1

[gcode_macro status_busy]
gcode = 
	_set_sb_leds_by_name leds="logo" color="busy" transmit=0
	set_nozzle_leds_on

[gcode_macro status_heating]
gcode = 
	_set_sb_leds_by_name leds="logo" color="heating" transmit=0
	_set_sb_leds_by_name leds="nozzle" color="heating" transmit=1

[gcode_macro status_leveling]
gcode = 
	_set_sb_leds_by_name leds="logo" color="leveling" transmit=0
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="homing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	_set_sb_leds_by_name leds="logo" color="cleaning" transmit=0
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="meshing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	_set_sb_leds_by_name leds="logo" color="calibrating_z" transmit=0
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	_set_sb_leds_by_name leds="logo" color="printing" transmit=0
	set_nozzle_leds_on

[gcode_macro status_orange]
gcode = 
	_set_sb_leds_by_name leds="logo" color="orange" transmit=0
	set_nozzle_leds_on

[gcode_macro status_red]
gcode = 
	_set_sb_leds_by_name leds="logo" color="red" transmit=0
	set_nozzle_leds_on

[gcode_macro status_purple]
gcode = 
	_set_sb_leds_by_name leds="logo" color="purple" transmit=0
	set_nozzle_leds_on

[gcode_macro status_green]
gcode = 
	_set_sb_leds_by_name leds="logo" color="green" transmit=0
	set_nozzle_leds_on

[gcode_macro status_white]
gcode = 
	_set_sb_leds_by_name leds="logo" color="white" transmit=0
	set_nozzle_leds_on

[gcode_macro status_yellow]
gcode = 
	_set_sb_leds_by_name leds="logo" color="yellow" transmit=0
	set_nozzle_leds_on

[gcode_macro status_blue]
gcode = 
	_set_sb_leds_by_name leds="logo" color="blue" transmit=0
	set_nozzle_leds_on

[delayed_gcode set_sb_leds_on_boot]
initial_duration = 1
gcode = 
	flicker
	status_ready

[gcode_macro flicker]
gcode = 
	{% set LEDTimes = [10, 20, 20, 240, 20, 40, 20, 100, 20, 20, 20, 260, 80, 20, 240, 60, 160, 20, 240, 20, 1000, 20, 20, 40, 100, 20, 274, 340, 860, 20, 1400, 20, 60, 20] %}
	{% set RGB_Red = 0.2 %}
	{% set RGB_Green = 0.2 %}
	{% set RGB_Blue = 0.2 %}
	{% set RGB_Strip = "sb_leds" %}
	{% set RGB_Strip1 = "mini12864" %}
	
	{% for toggletime in LEDTimes %}
	{% set ledTime = toggletime|string %}
	{% set loopCount = loop.index %}
	
	{% if loopCount is divisibleby 2 %}
	SET_LED LED={RGB_Strip} RED={RGB_Red} GREEN={RGB_Green} BLUE={RGB_Blue}
	G4 P{ledTime|int}
	{% else %}
	SET_LED LED={RGB_Strip}
	G4 P{ledTime|int}
	{% endif %}
	
	{% endfor %}
	
	{% for i in range(1,9) %}
	SET_LED LED={RGB_Strip} RED={RGB_Red+(i/10)} GREEN={RGB_Green+(i/10)}  BLUE={RGB_Blue+(i/10)} INDEX=1
	G4 P200
	{% endfor %}

[beacon]
serial = /dev/serial/by-id/usb-Beacon_Beacon_RevD_63E3DDD04E4B333448202020FF0A3315-if00
x_offset = 0
y_offset = -24
mesh_main_direction = x
mesh_runs = 2

[bed_mesh]
speed = 150
horizontal_move_z = 10
mesh_min = 10,10
mesh_max = 290,240
probe_count = 15,15
algorithm = bicubic
fade_start = 1
fade_end = 5
fade_target = 0

[z_tilt]
speed = 500
horizontal_move_z = 10
retries = 5
retry_tolerance = 0.004
z_positions = 
	-50, 18
	150, 348
	350, 18
points = 
	30, 5
	150, 245
	270, 5

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% if display_parameters == True %}
	{ action_respond_info("led_enable  : %d" % (led_enable))  }
	{ action_respond_info("status_macro: \'%s\'" % (status_macro))  }
	{ action_respond_info("fuzz_enable : %d" % (fuzz_enable))  }
	{ action_respond_info("fuzz_min    : %f" % (fuzz_min))  }
	{ action_respond_info("fuzz_max    : %f" % (fuzz_max))  }
	{ action_respond_info("probe_dock_enable: %d" % (probe_dock_enable))  }
	{ action_respond_info("attach_macro: \'%s\'" % (attach_macro))  }
	{ action_respond_info("detach_macro: \'%s\'" % (detach_macro))  }
	{% endif %}
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% if margin_enable == False %}
	{% set margin_size = 0 %}
	{% endif %}
	
	{ action_respond_info("{} object points, clamping to bed mesh [{!r} {!r}]".format(
	all_points | count,
	bed_mesh_min,
	bed_mesh_max,
	)) }
	
	{% if fuzz_enable == True %}
	{% set fuzz_range = range((fuzz_min * 100) | int, (fuzz_max * 100) | int + 1) %}
	{% set x_min = (bed_mesh_min[0] + fuzz_max - margin_size, x_min) | max - (fuzz_range | random / 100.0) %}
	{% set y_min = (bed_mesh_min[1] + fuzz_max - margin_size, y_min) | max - (fuzz_range | random / 100.0) %}
	{% set x_max = (bed_mesh_max[0] - fuzz_max + margin_size, x_max) | min + (fuzz_range | random / 100.0) %}
	{% set y_max = (bed_mesh_max[1] - fuzz_max + margin_size, y_max) | min + (fuzz_range | random / 100.0) %}
	{% else %}
	{% set x_min = [ bed_mesh_min[0], x_min - margin_size ] | max %}
	{% set y_min = [ bed_mesh_min[1], y_min - margin_size ] | max %}
	{% set x_max = [ bed_mesh_max[0], x_max + margin_size ] | min %}
	{% set y_max = [ bed_mesh_max[1], y_max + margin_size ] | min %}
	{% endif %}
	
	{ action_respond_info("Object bounds, clamped to the bed_mesh: {!r}, {!r}".format(
	(x_min, y_min),
	(x_max, y_max),
	)) }
	
	{% set points_x = (((x_max - x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((y_max - y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	{ action_respond_info( "Algorithm: {}".format(algorithm)) }
	
	{% set points_x = [points_x, min_points]|max  %}
	{% set points_y = [points_y, min_points]|max  %}
	{ action_respond_info( "Points: x: {}, y: {}".format(points_x, points_y) ) }
	
	{% if printer.configfile.settings.bed_mesh.relative_reference_index is defined %}
	{% set ref_index = (points_x * points_y / 2) | int %}
	{ action_respond_info( "Reference index: {}".format(ref_index) ) }
	{% else %}
	{% set ref_index = -1 %}
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	{% if led_enable == True %}
	{status_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={x_min},{y_min} mesh_max={x_max},{y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y} RELATIVE_REFERENCE_INDEX={ref_index}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}
variable_led_enable = False
variable_status_macro = 'status_meshing'
variable_fuzz_enable = False
variable_fuzz_min = 0
variable_fuzz_max = 4
variable_margin_enable = False
variable_margin_size = 5
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_display_parameters = True

[gcode_macro Z_TILT_ADJUST]
rename_existing = _Z_TILT_ADJUST
gcode = 
	{ action_respond_info("Z Tilt Adjust") }
	
	_Z_TILT_ADJUST {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	G28 Z0

[gcode_macro z_tilt_scan]
gcode = 
	z_tilt_adjust RETRY_TOLERANCE=1
	z_tilt_adjust HORIZONTAL_MOVE_Z=2

[gcode_macro MACROS_VARS]
variable_circ_fan_speed = 255
variable_probe_temp = 150
variable_starting_wled = 2
variable_heating_wled = 4
variable_ending_wled = 3
variable_ending_length = 25
variable_purge_length = 40
variable_filament_swap_length = 0.8
variable_pla_pa = 0.00525
variable_pet_pa = 0.00650
variable_abs_pa = 0.00460
variable_pet_za = 0.010
variable_move_away_home = 0
variable_homing_retract = 20
gcode = 

[gcode_macro MATERIAL_PA]
gcode = 
	{% set MATERIAL = params.MATERIAL|default("XXX")|string %}
	{% set TEXT ="Setting PA for " + MATERIAL %}
	{% set PLA = printer["gcode_macro MACROS_VARS"].pla_pa|default(0)%}
	{% set PET = printer["gcode_macro MACROS_VARS"].pet_pa|default(0)%}
	{% set ABS = printer["gcode_macro MACROS_VARS"].abs_pa|default(0)%}
	{% set PETZ = printer["gcode_macro MACROS_VARS"].pet_za|default(0)%}
	{% if MATERIAL == "PLA" %}
	SET_PRESSURE_ADVANCE ADVANCE={PLA}
	{% elif MATERIAL == "PET" %}
	SET_PRESSURE_ADVANCE ADVANCE={PET}
	SET_GCODE_OFFSET Z_ADJUST={PETZ} MOVE=1
	{% elif MATERIAL == "ABS" %}
	SET_PRESSURE_ADVANCE ADVANCE={ABS}
	{% else %}
	{% set TEXT ="No PA value for " + MATERIAL %}
	{% endif %}
	DISPLAYTEXT TEXT="{TEXT}"

[gcode_macro PURGE_LINE]
gcode = 
	DISPLAYTEXT TEXT="Prime Line"
	G1 X75 E25 F1000
	G92 E0;
	G90
	G0 X75 Y4 F6000
	G1 Z0.2 F200
	G91
	G1 X150 E30 F1200;
	G1 Y1
	G1 X-150 E30 F1200;
	G92 E0.0
	G1 Z1 F5000

[gcode_macro PRINT_START]
gcode = 
	{% set BED_TEMP = params.BED_TEMP|default(110)|float %}
	{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(250)|float %}
	{% set ENCLOSURE_TEMP = params.ENCLOSURE_TEMP|default(45)|int %}
	{% set PROBE_TEMP = printer["gcode_macro MACROS_VARS"].probe_temp|default(0)%}
	
	SET_TEMP HEATER="bed" TEMP={BED_TEMP}
	SET_TEMP HEATER="extruder" TEMP={PROBE_TEMP} WAIT=1
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	DISPLAYTEXT TEXT="Homing"
	G28
	{% endif %}
	DISPLAYTEXT TEXT="Heating Bed"
	SET_TEMP HEATER="bed" TEMP={BED_TEMP} WAIT=1
	
	{% if not printer.z_tilt.applied %}
	DISPLAYTEXT TEXT="Z tilt thingy"
	Z_TILT_ADJUST
	{% endif %}
	MATERIAL_PA MATERIAL={FILAMENT}
	DISPLAYTEXT TEXT="Heating Extruder"
	SET_TEMP HEATER="extruder" TEMP={EXTRUDER_TEMP} WAIT=1
	
	BED_MESH_CALIBRATE
	SET_FAN_SPEED FAN=rebreather SPEED=1
	SET_FAN_SPEED FAN=stepper_fans SPEED=0.25
	MATERIAL_PA MATERIAL={FILAMENT}
	G4 P1000
	PURGE_LINE
	
	
	DISPLAYTEXT TEXT="Printing..."

[gcode_macro G32]
gcode = 
	BED_MESH_CLEAR
	G28
	Z_TILT_ADJUST
	G28
	G0 X75 Y75 Z30 F3600

[gcode_macro PRINT_END]
gcode = 
	
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	{% set FILAMENT = params.FILAMENT|default(PLA) %}
	
	
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	
	M400
	G92 E0
	G1 E-25.0 F1800
	G91
	G0 Z{z_safe} F3600
	G0 X{x_safe} Y{y_safe} F20000
	
	TURN_OFF_HEATERS
	M107
	G1 Z2 F3000
	G90
	G0 X{max_x / 2} Y{max_y} F3600
	
	
	{% if FILAMENT == 'ABS' or params.FILAMENT == 'ASA' %}
	NEVERMORE_END_PRINT
	{% endif %}
	
	DISPLAYTEXT TEXT="Print Complete"

[gcode_macro SET_TEMP]
gcode = 
	{% set HEATER = params.HEATER|default("")|string %}
	{% set TEMP = params.TEMP|default(0)|int %}
	{% set WAIT = params.WAIT|default(0)|int %}
	
	{% if HEATER == "extruder" %}
	{% if WAIT == 1 %}
	M109 S{TEMP}
	{% else %}
	M104 S{TEMP}
	{% endif %}
	{% else %}
	{% if WAIT == 1 %}
	M190 S{TEMP}
	{% else %}
	M140 S{TEMP}
	{% endif %}
	{% endif %}

[gcode_macro ENDING_RETRACTION]
gcode = 
	{% set RETRACT = printer["gcode_macro MACROS_VARS"].ending_length|default(0)%}
	G1 E{RETRACT*-1} F1800

[gcode_macro PARK_AT_PRINT_END]
gcode = 
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600

[gcode_macro Homing_Variables]
variable_move_away_home = 0
variable_x_homing_pos = 150
variable_y_homing_pos = 150
variable_homing_current = 0.8
variable_homing_retract_x = 150
variable_homing_retract_y = 20
variable_homing_retract_speed = 5000
variable_z_end_pos = 30
variable_is_sensorless = True
variable_display_parameters = True
gcode = 

[homing_override]
axes = xyz
gcode = 
	DISPLAY_PARAMETERS
	
	
	SET_KINEMATIC_POSITION Z=0
	MOVE_AWAY_BEFORE_HOMING PARAMS="Z"
	WAIT TIME=2
	
	{% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}
	
	{% if home_all or 'X' in params %}
	_HOME_X
	{% endif %}
	
	{% if home_all or 'Y' in params %}
	_HOME_Y
	{% endif %}
	
	{% if home_all or 'Z' in params %}
	_HOME_Z
	{% endif %}

[gcode_macro DISPLAY_PARAMETERS]
gcode = 
	{% set DISPLAY_PARAMS = printer["gcode_macro Homing_Variables"].display_parameters %}
	{% set is_sensorless = printer["gcode_macro Homing_Variables"].is_sensorless %}
	{% set x_homing_pos = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set y_homing_pos = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	{% set homing_current = printer["gcode_macro Homing_Variables"].homing_current %}
	{% set homing_retract_x = printer["gcode_macro Homing_Variables"].homing_retract_x %}
	{% set homing_retract_y = printer["gcode_macro Homing_Variables"].homing_retract_y %}
	{% set homing_retract_speed = printer["gcode_macro Homing_Variables"].homing_retract_speed %}
	{% set z_end_pos = printer["gcode_macro Homing_Variables"].z_end_pos %}
	
	{% if DISPLAY_PARAMS == True %}
	{ action_respond_info("is_sensorless  : %d" % (is_sensorless))  }
	{ action_respond_info("x_homing_pos  : %d" % (x_homing_pos))  }
	{ action_respond_info("y_homing_pos  : %d" % (y_homing_pos))  }
	{ action_respond_info("homing_current  : %d" % (homing_current))  }
	{ action_respond_info("homing_retract_x  : %d" % (homing_retract_x))  }
	{ action_respond_info("homing_retract_y  : %d" % (homing_retract_y))  }
	{ action_respond_info("homing_retract_speed  : %d" % (homing_retract_speed))  }
	{ action_respond_info("z_end_pos  : %d" % (z_end_pos))  }
	{% endif %}

[gcode_macro MOVE_AWAY_BEFORE_HOMING]
gcode = 
	{% set MAH = printer["gcode_macro Homing_Variables"].move_away_home|default(0)%}
	{% set PARAMS = params.PARAMS|default("")|string %}
	
	{% set home_all = 'X' not in PARAMS and 'Y' not in PARAMS and 'Z' not in PARAMS %}
	
	
	{% if home_all or 'X' in PARAMS %}
	G1 X-{MAH/2}  F6000
	{% endif %}
	
	{% if home_all or 'Y' in PARAMS %}
	G1  Y-{MAH/2} F6000
	{% endif %}
	
	{% if home_all or 'Z' in PARAMS %}
	G1 Z{MAH} F100
	{% endif %}

[gcode_macro _HOME_X]
gcode = 
	DISPLAYTEXT TEXT="Homing X Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_x|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION X=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="X"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 X
	
	G91
	G1 X-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Y]
gcode = 
	DISPLAYTEXT TEXT="Homing Y Axis"
	
	
	
	{% set RUN_CURRENT_X = printer.configfile.settings['tmc5160 stepper_x'].run_current|float %}
	{% set RUN_CURRENT_Y = printer.configfile.settings['tmc5160 stepper_y'].run_current|float %}
	{% set HOMING_CURRENT = printer["gcode_macro Homing_Variables"].homing_current|float %}
	{% set HOMING_RETRACT = printer["gcode_macro Homing_Variables"].homing_retract_y|default(10) %}
	{% set HOMING_RETRACT_SPEED = printer["gcode_macro Homing_Variables"].homing_retract_speed|default(1200) %}
	{% set IS_SENSORLESS = printer["gcode_macro Homing_Variables"].is_sensorless %}
	
	SET_KINEMATIC_POSITION Y=5
	RELATIVE_COORDINATES
	MOVE_AWAY_BEFORE_HOMING PARAMS="Y"
	
	{% if IS_SENSORLESS == True %}
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={HOMING_CURRENT}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={HOMING_CURRENT}
	{% endif %}
	
	
	G28 Y
	
	G91
	G1 Y-{HOMING_RETRACT}  F{HOMING_RETRACT_SPEED}
	G90
	
	{% if IS_SENSORLESS == True %}
	
	G4 P1000
	
	
	SET_TMC_CURRENT STEPPER=stepper_x CURRENT={RUN_CURRENT_X}
	SET_TMC_CURRENT STEPPER=stepper_y CURRENT={RUN_CURRENT_Y}
	{% endif %}

[gcode_macro _HOME_Z]
gcode = 
	{% set Ez = printer["gcode_macro Homing_Variables"].z_end_pos %}
	{% set Hx = printer["gcode_macro Homing_Variables"].x_homing_pos %}
	{% set Hy = printer["gcode_macro Homing_Variables"].y_homing_pos %}
	
	DISPLAYTEXT TEXT="Homing Z Axis"
	
	G1 X{Hx} Y{Hy} F15000
	G28 Z
	G1 Z{Ez}

[gcode_macro ABSOLUTE_COORDINATES]
gcode = 
	G90

[gcode_macro RELATIVE_COORDINATES]
gcode = 
	G91

[gcode_macro DISPLAYTEXT]
gcode = 
	{% set TEXT = params.TEXT|default("")|string %}
	RESPOND MSG="{TEXT}"
	SET_DISPLAY_TEXT MSG="{TEXT}"

[gcode_macro DISPLAY_PROGRESS]
gcode = 
	{% set TOTAL_LAYERS = params.TOTAL_LAYERS|default("")|string %}
	{% set CURRENT_LAYER = params.CURRENT_LAYER|default("")|string %}
	RESPOND MSG="Total layers {TOTAL_LAYERS}, current layer {CURRENT_LAYER}"

[gcode_macro TEMPERATURE_WAIT]
rename_existing = _TEMPERATURE_WAIT
gcode = 
	{% set SENSOR = params.SENSOR|default("")|string %}
	{% set MINIMUM = params.MINIMUM|int %}
	{% set MSG = "Enclosure temperature has reached " + MINIMUM |string %}
	
	DISPLAYTEXT TEXT="Heatsoaking..."
	_TEMPERATURE_WAIT SENSOR="{SENSOR}" MINIMUM={MINIMUM}
	DISPLAYTEXT TEXT="{MSG}"

[gcode_macro WAIT]
gcode = 
	{% set TIME = params.TIME|default(0)|int %}
	G4 P{TIME*1000}

[gcode_macro CHOME]
gcode = 
	{% if printer.toolhead.homed_axes != "xyz" %}
	DISPLAYTEXT TEXT="Homing.."
	G28
	{% endif %}

[gcode_macro RESET_EXTRUDER]
gcode = 
	G92 E0

[gcode_macro PARK_TOOLHEAD]
gcode = 
	{% set th = printer.toolhead %}
	ABSOLUTE_COORDINATES
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y//2} F15000

[gcode_macro DUMP_VARIABLES]
gcode = 
	{% set filter_name = params.NAME|default('')|string|lower %}
	{% set filter_value = params.VALUE|default('')|string|lower %}
	{% set show_cfg = params.SHOW_CFG|default(0)|int %}
	
	{% set out = [] %}
	
	{% for key1 in printer %}
	{% for key2 in printer[key1] %}
	{% if (show_cfg or not (key1|lower == 'configfile' and key2|lower in ['config', 'settings'])) and (filter_name in key1|lower or filter_name in key2|lower) and filter_value in printer[key1][key2]|string|lower %}
	{% set dummy = out.append("printer['%s'].%s = %s" % (key1, key2, printer[key1][key2])) %}
	{% endif %}
	{% else %}
	{% if filter_name in key1|lower and filter_value in printer[key1]|string|lower %}
	{% set dummy = out.append("printer['%s'] = %s" % (key1, printer[key1])) %}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	{action_respond_info(out|join("\n"))}

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=UNLOAD_FILAMENT_state
	
	M82
	G92 E0
	G1 E2 F3600
	G1 E0 F3600
	G1 E3 F3600
	G1 E0 F3600
	G1 E4 F3600
	G1 E0 F3600
	
	M83
	G1 E-20 F3600
	G4 P3000
	G1 E{DISTANCE|float * -1} F3000
	RESTORE_GCODE_STATE NAME=UNLOAD_FILAMENT_state

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set TEMP = params.TEMP|default(230)|float %}
	{% set DISTANCE = params.DISTANCE|default(105)|float %}
	
	M400
	SAVE_GCODE_STATE NAME=LOAD_FILAMENT_state
	
	M83
	G92 E0
	G1 E{DISTANCE|float} F200
	
	
	
	
	G1 E50 F150
	
	
	G92 E0
	RESTORE_GCODE_STATE NAME=LOAD_FILAMENT_state

[gcode_macro PID_HOTEND]
gcode = 
	PID_CALIBRATE HEATER=extruder TARGET=250

[gcode_macro PID_BED]
gcode = 
	PID_CALIBRATE HEATER=heater_bed TARGET=80

[gcode_macro Z_ENDSTOP]
gcode = 
	Z_ENDSTOP_CALIBRATE

[gcode_macro PROBE_CAL]
gcode = 
	
	G28
	PROBE_CALIBRATE

[gcode_macro IS_CAL]
gcode = 
	
	G28
	SHAPER_CALIBRATE

[gcode_macro SPEEDTEST]
gcode = 
	
	
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest_state
	
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{maxX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY + (maxY-minY)/2}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{maxX} Y{minY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest_state

[gcode_macro SPEEDTEST2]
gcode = 
	{% set fmin = params.FMIN|default(300)|float * 60 %}
	{% set fmax = params.FMAX|default(400)|float * 60 %}
	{% set steps = params.STEPS|default(3)|int %}
	{% set cycles = params.CYCLES|default(1)|int %}
	
	{% set inset = 20.0|float %}
	{% set maxX = printer.configfile.settings.stepper_x.position_max|float - inset %}
	{% set maxY = printer.configfile.settings.stepper_y.position_max|float - inset %}
	{% set minX = printer.configfile.settings.stepper_x.position_min|float + inset %}
	{% set minY = printer.configfile.settings.stepper_y.position_min|float + inset %}
	
	SAVE_GCODE_STATE NAME=speedtest2_state
	G90
	{% for INTERVAL in range(steps) %}
	{% for REPEAT in range(cycles) %}
	{% if fmin == fmax %}
	{% set feedrate = fmin %}
	{% else %}
	{% set feedrate = fmin + ( (fmax - fmin) / (steps -1) ) * INTERVAL %}
	{% endif %}
	M400
	M117 {INTERVAL+1}/{steps} {"%4.0f mm/s" % (feedrate/60)}
	G1 F{feedrate}
	G1 X{minX} Y{minY}
	G1 X{maxX} Y{minY}
	G1 X{maxX} Y{maxY}
	G1 X{minX} Y{maxY}
	{% endfor %}
	{% endfor %}
	M117
	park_toolhead
	RESTORE_GCODE_STATE NAME=speedtest2_state

[gcode_macro PRESSURE_ADVANCE_CALIBRATION]
description = Calibrate the pressure advance by printing a grid pattern
gcode = 
	
	
	
	{% set pa_start     = params.START|default(0.02)|float %}
	{% set pa_increment = params.INCREMENT|default(0.005)|float %}
	
	{% set do_raft = params.RAFT|default(1)|int %}
	
	{% set print_size      = params.SIZE|default(120)|int %}
	{% set num_bands       = params.BANDS_LIMIT|default(999)|int %}
	{% set lines_per_band  = params.LINES_PER_BAND|default(6)|int %}
	{% set e_multiplier    = params.EXTRUSION_MULTIPLIER|default(1.25 if do_raft == 1 else 1.5)|float %},
	{% set retract_length  = params.RETRACT|default(0.6)|float %}
	{% set initial_purge   = params.PURGE_MM|default(8)|int %}
	
	{% set feedrate_control = params.CONTROL_SPEED|default(30)|int * 60 %}
	{% set feedrate_outer   = params.OUTER_SPEED|default(40)|int * 60 %}
	{% set feedrate_inner   = params.INNER_SPEED|default(120)|int * 60 %}
	{% set feedrate_travel  = params.TRAVEL_SPEED|default(200)|int * 60 %}
	{% set feedrate_raft    = params.RAFT_SPEED|default(120)|int * 60 %}
	{% set feedrate_z       = 5 * 60 %}
	{% set feedrate_retract = 50 * 60 %}
	
	{% set spacing_line  = params.LINE_SPACING|default(0.4)|float %}
	{% set spacing_band  = 2 %}
	{% set spacing_raft  = 2 %}
	
	{% set fast_line_ratio_percent = 50 %}
	
	{% set lines_per_band    = [2, lines_per_band]|max %}
	{% set e_multiplier      = [1, e_multiplier]|max %}
	{% set num_lines_control = (lines_per_band / 2)|round(0, 'floor')|int %}
	{% set num_lines_test    = (lines_per_band / 2)|round(0, 'ceil')|int %}
	{% set spacing_line      = spacing_line * (1 + e_multiplier - 1.25) %}
	
	{% set max_x = printer.toolhead.axis_maximum.x|float %}
	{% set max_y = printer.toolhead.axis_maximum.y|float %}
	{% set nozzle_diameter = printer.configfile.config['extruder'].nozzle_diameter|float %}
	{% set line_width    = nozzle_diameter * 1.25 %}
	{% set line_height   = nozzle_diameter / 2 %}
	{% set z_hop_height  = 2 * line_height %}
	{% set e_per_mm      = (line_width * line_height) / (3.1415 * (1.75/2)**2) %}
	{% set spacing_purge = line_height * 0.8 %}
	
	{% set spacing_raft   = (spacing_raft / line_width)|round * line_width %}
	{% set num_raft_lines = ([print_size, max_x]|min / spacing_raft)|round(0, 'floor')|int %}
	{% set print_width    = num_raft_lines * spacing_raft %}
	
	{% set band_height      = lines_per_band * line_width + (lines_per_band - 1) * spacing_line + spacing_band %}
	{% set bands_per_height = (([print_size, max_y]|min  - spacing_purge) / band_height)|round(0, 'floor')|int %}
	{% set num_bands        = [num_bands, bands_per_height]|min %}
	{% set print_height     = num_bands * band_height - spacing_band - spacing_purge %}
	
	{% set slow_line_length = ((print_width * (1 - fast_line_ratio_percent / 100) / 2) / spacing_raft)|round * spacing_raft + spacing_raft / 2 %}
	{% set fast_line_length = print_width - slow_line_length * 2 %}
	{% set thick_raft_num1 = (slow_line_length / spacing_raft)|round|int %}
	{% set thick_raft_num2  = num_raft_lines - thick_raft_num1 + 1 %}
	
	{% set x_start = max_x / 2 - print_width  / 2 %}
	{% set y_start = max_y / 2 - print_height / 2 %}
	
	{action_respond_info("")}
	{action_respond_info("Starting Pressure Advance calibration print.")}
	{action_respond_info("")}
	{action_respond_info("This operation can not be interrupted by normal means. Hit the \"emergency stop\" button once the print starts exhibiting PA values that are obviously too high.")}
	{action_respond_info("")}
	{action_respond_info("PA of first band: %.4f" % pa_start)}
	{action_respond_info("PA of last band: %.4f" % (num_bands * pa_increment))}
	{action_respond_info("PA increment per band: %.4f" % pa_increment)}
	{action_respond_info("Number of bands: %d" % num_bands)}
	{action_respond_info("")}
	{action_respond_info("Inspect the printed model. "
	"Look at the top and bottom lines in each band, on the right side of the two vertical raft bars (where the print speeds change). "
	"Find the highest band from the bottom where the lines at its top still resemble the lines at its bottom, with no visible extrusion width irregularities. "
	"Your final Pressure Advance value would then be:"
	)}
	{action_respond_info("")}
	{action_respond_info("PA = %.4f + (%.4f * band_number)" % (pa_start, pa_increment))}
	{action_respond_info("")}
	{action_respond_info("Update your [extruder] config section and set \"pressure_advance\" to the value you calculated.")}
	{action_respond_info("")}
	
	
	
	
	
	
	
	
	
	SAVE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION
	{% set pa_saved = printer.configfile.settings['extruder'].pressure_advance %}
	SET_PRESSURE_ADVANCE ADVANCE={pa_start}
	
	
	
	
	M117 Priming
	G90
	G0 X{x_start} Y{y_start} Z{line_height} F{feedrate_travel}
	G91
	G1 E{initial_purge} F{5 * 60}
	G1 X{print_width}  E{print_width * e_per_mm} F{feedrate_raft / 2}
	G1 Y{line_width}   E{line_width * e_per_mm}  F{feedrate_raft / 2}
	G1 X-{print_width} E{print_width * e_per_mm} F{feedrate_raft / 2}
	
	
	
	
	{% if do_raft == 1 %}
	G0 F{feedrate_raft}
	
	{% for curr_raft_line in range(1, num_raft_lines + 2) %}
	
	{% if curr_raft_line == thick_raft_num1 or curr_raft_line == thick_raft_num2 %}
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	G1 Y{loop.cycle(-1.0, 1.0) * print_height} E{print_height * e_per_mm}
	G1 X{line_width} E{line_width * e_per_mm}
	{% endif %}
	
	G1 Y{loop.cycle(1.0, -1.0) * print_height} E{print_height * e_per_mm}
	
	
	{% if not loop.last %}
	{% set horizontal_move = spacing_raft - (2 * line_width if curr_raft_line == thick_raft_num1 - 1 or curr_raft_line == thick_raft_num2 - 1 else 0) %}
	G1 X{horizontal_move} E{horizontal_move * e_per_mm}
	{% endif %}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	{% endif %}
	
	
	
	
	M117 Printing bands
	G90
	G0 X{x_start} Y{y_start + 2 * line_width + spacing_purge} F{feedrate_travel}
	G0 Z{line_height + (line_height if do_raft == 1 else 0)} F{feedrate_z}
	G91
	G1 E{retract_length} F{feedrate_retract}
	
	
	{% for curr_band_num in range(1, num_bands + 1) %}
	{% set outer_loop = loop %}
	
	{% set curr_pa_value = pa_start + (curr_band_num - 1) * pa_increment %}
	SET_PRESSURE_ADVANCE ADVANCE={curr_pa_value}
	M117 Band {curr_band_num} PA {curr_pa_value|round(4)}
	
	
	{% for _ in range(num_lines_control) %}
	G1 X{print_width} E{print_width * e_per_mm * e_multiplier} F{feedrate_control}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	G0 X-{print_width} Y{spacing_line + line_width} F{feedrate_travel}
	
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endfor %}
	
	
	{% for _ in range(num_lines_test) %}
	{% for data in [{'mm': slow_line_length, 'f': feedrate_outer}, {'mm': fast_line_length, 'f': feedrate_inner}, {'mm': slow_line_length, 'f': feedrate_outer}] %}
	G1 X{data.mm} E{data.mm * e_per_mm * e_multiplier} F{data.f}
	{% endfor %}
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z{z_hop_height} F{feedrate_z}
	
	{% if not (outer_loop.last and loop.last) %}
	G0 X-{print_width} Y{(spacing_line if not loop.last else spacing_band) + line_width} F{feedrate_travel}
	G0 Z-{z_hop_height} F{feedrate_z}
	G1 E{retract_length} F{feedrate_retract}
	{% endif %}
	{% endfor %}
	{% endfor %}
	
	
	
	
	G1 E-{retract_length} F{feedrate_retract}
	G0 Z20 F{feedrate_z}
	G0 X-{print_width / 2} Y{[50, max_y - (y_start + print_height)]|min} F{feedrate_travel}
	
	M117
	SET_PRESSURE_ADVANCE ADVANCE={pa_saved}
	RESTORE_GCODE_STATE NAME=STATE_PRESSURE_ADVANCE_CALIBRATION

[gcode_macro TEST_SPEED]
gcode = 
	
	{% set speed  = params.SPEED|default(printer.configfile.settings.printer.max_velocity)|int %}
	
	{% set iterations = params.ITERATIONS|default(5)|int %}
	
	{% set accel  = params.ACCEL|default(printer.configfile.settings.printer.max_accel)|int %}
	
	{% set bound = params.BOUND|default(20)|int %}
	
	{% set smallpatternsize = SMALLPATTERNSIZE|default(20)|int %}
	
	
	
	{% set x_min = printer.toolhead.axis_minimum.x + bound %}
	{% set x_max = printer.toolhead.axis_maximum.x - bound %}
	{% set y_min = printer.toolhead.axis_minimum.y + bound %}
	{% set y_max = printer.toolhead.axis_maximum.y - bound %}
	
	
	
	{% set x_center = (printer.toolhead.axis_minimum.x|float + printer.toolhead.axis_maximum.x|float ) / 2 %}
	{% set y_center = (printer.toolhead.axis_minimum.y|float + printer.toolhead.axis_maximum.y|float ) / 2 %}
	
	
	{% set x_center_min = x_center - (smallpatternsize/2) %}
	{% set x_center_max = x_center + (smallpatternsize/2) %}
	{% set y_center_min = y_center - (smallpatternsize/2) %}
	{% set y_center_max = y_center + (smallpatternsize/2) %}
	
	
	SAVE_GCODE_STATE NAME=TEST_SPEED
	
	
	{ action_respond_info("TEST_SPEED: x_min %d, y_min %d, x_max %d, y_max %d" % (x_min, y_min, x_max, y_max)) }
	{ action_respond_info("TEST_SPEED: starting %d iterations at speed %d, accel %d" % (iterations, speed, accel)) }
	
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	G28 X Y
	{% endif %}
	
	
	
	
	
	
	
	
	
	
	
	
	G4 P1000
	GET_POSITION
	
	
	G0 X{x_min} Y{y_min} Z{bound + 10} F{speed*60}
	
	
	SET_VELOCITY_LIMIT VELOCITY={speed} ACCEL={accel} ACCEL_TO_DECEL={accel / 2}
	
	{% for i in range(iterations) %}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	{% endfor %}
	
	
	SET_VELOCITY_LIMIT VELOCITY={printer.configfile.settings.printer.max_velocity} ACCEL={printer.configfile.settings.printer.max_accel} ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel}
	
	
	G28 X Y
	
	
	
	G4 P1000
	GET_POSITION
	
	
	RESTORE_GCODE_STATE NAME=TEST_SPEED

[gcode_macro SETUP_KAMP_MESHING]
gcode = 
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=display_parameters   VALUE={params.DISPLAY_PARAMETERS|default(True)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=led_enable   VALUE={params.LED_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=status_macro VALUE='"{params.STATUS_MACRO|default('status_meshing')|string}"'
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_enable VALUE={params.FUZZ_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_min    VALUE={params.FUZZ_MIN|default(0)|float}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=fuzz_max    VALUE={params.FUZZ_MAX|default(4)|float}
	
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=probe_dock_enable  VALUE={params.PROBE_DOCK_ENABLE|default(False)|int}
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=attach_macro VALUE='"{params.ATTACH_MACRO|default('Attach_Probe')|string}"'
	SET_GCODE_VARIABLE MACRO=BED_MESH_CALIBRATE VARIABLE=detach_macro VALUE='"{params.DETACH_MACRO|default('Dock_Probe')|string}"'

[input_shaper]
shaper_freq_x = 86.8
shaper_type_x = zv
shaper_freq_y = 62.2
shaper_type_y = zv

[probe]
z_offset = -0.0400

[beacon model default]
model_coef = 1.409155451498927,
	1.7229833219997472,
	0.7624260199879447,
	0.3933310021549746,
	0.3504714980336664,
	0.3215136667184013,
	-0.12014580629124338,
	-0.22419779942999016,
	0.19713656245482147,
	0.188750402116144
model_domain = 3.120873231931901e-07,3.332026812812074e-07
model_range = 0.200000,5.000000
model_temp = 23.909578
model_offset = 0.02500

[bed_mesh default]
version = 1
points = 
	-0.062140, -0.036984, -0.007379, 0.031314, 0.058627, 0.084848, 0.107257, 0.111945, 0.135207, 0.152355, 0.170171
	-0.128044, -0.093273, -0.053917, -0.019434, 0.015362, 0.051030, 0.076081, 0.091292, 0.113629, 0.133648, 0.155842
	-0.171323, -0.136118, -0.096393, -0.057201, -0.010727, 0.024397, 0.048697, 0.072530, 0.099236, 0.126818, 0.150713
	-0.201543, -0.161727, -0.119034, -0.066854, -0.018463, 0.014217, 0.047420, 0.076211, 0.103883, 0.134441, 0.171920
	-0.229879, -0.188570, -0.139992, -0.085341, -0.040984, 0.002604, 0.042138, 0.073877, 0.104620, 0.133705, 0.171879
	-0.263766, -0.213518, -0.162008, -0.108459, -0.058518, -0.007646, 0.032310, 0.069869, 0.102956, 0.138912, 0.180918
	-0.296565, -0.242362, -0.188285, -0.127789, -0.071974, -0.019641, 0.027806, 0.070759, 0.105252, 0.142100, 0.184275
	-0.296242, -0.233747, -0.171416, -0.107834, -0.048348, 0.004540, 0.056827, 0.100566, 0.141602, 0.182628, 0.230079
	-0.281192, -0.228380, -0.164876, -0.101596, -0.030960, 0.023575, 0.079761, 0.121563, 0.171967, 0.216584, 0.265930
	-0.307454, -0.252371, -0.190633, -0.113183, -0.041936, 0.019598, 0.074971, 0.120663, 0.178367, 0.230549, 0.282552
	-0.324293, -0.258430, -0.193413, -0.119856, -0.045648, 0.021113, 0.080729, 0.133249, 0.192194, 0.246004, 0.297448
x_count = 11
y_count = 11
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 59.444
max_x = 240.556
min_y = 75.541944
max_y = 224.458048
=======================
Extruder max_extrude_ratio=4157.101129
mcu 'mcu': Starting serial connect
webhooks client 547664177472: New connection
webhooks client 547664177472: Client info {'program': 'Moonraker', 'version': 'v0.8.0-337-g546a17f'}
Loaded MCU 'mcu' 124 commands (v0.12.0-25-g99d7af87 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_i2c3=PA8,PC9 BUS_PINS_sdio=PC12,PD2,PC8,PC9,PC10,PC11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 CLOCK_FREQ=180000000 MCU=stm32f446xx PWM_MAX=255 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'rpi': Starting connect
Loaded MCU 'rpi' 118 commands (v0.12.0-25-g99d7af87 / gcc: (Debian 10.2.1-6) 10.2.1 20210110 binutils: (GNU Binutils for Debian) 2.35.2)
MCU 'rpi' config: ADC_MAX=4095 CLOCK_FREQ=50000000 MCU=linux PCA9685_MAX=4096 PWM_MAX=32768 STATS_SUMSQ_BASE=256
mcu 'sht36': Starting CAN connect
Created a socket
Loaded MCU 'sht36' 114 commands (v0.12.0-25-g99d7af87 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'sht36' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c1_PF1_PF0=PF1,PF0 BUS_PINS_i2c1a=PF1,PF0 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 CANBUS_FREQUENCY=500000 CLOCK_FREQ=48000000 INITIAL_PINS=!PC13 MCU=stm32f072xb PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PB8,PB9 RESERVE_PINS_crystal=PF0,PF1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu_temperature 'mcu' nominal base=-283.415638 slope=1348.148148
mcu_temperature 'sht36' nominal base=27.820587 slope=5.135038
mcu 'beacon': Starting serial connect
Loaded MCU 'beacon' 45 commands (Beacon 1.98.6 / )
MCU 'beacon' config: ADC_MAX=4095 BEACON_ADC_SMOOTH_COUNT=16 BEACON_REV=D CLOCK_FREQ=32000000 MCU=beacon STATS_SUMSQ_BASE=256
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'rpi' printer configuration...
Configured MCU 'rpi' (1024 moves)
Sending MCU 'sht36' printer configuration...
Configured MCU 'sht36' (904 moves)
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (10.0, 34.0)    | (10.0, 10.0)
  1   | (30.0, 34.0)    | (30.0, 10.0)
  2   | (50.0, 34.0)    | (50.0, 10.0)
  3   | (70.0, 34.0)    | (70.0, 10.0)
  4   | (90.0, 34.0)    | (90.0, 10.0)
  5   | (110.0, 34.0)   | (110.0, 10.0)
  6   | (130.0, 34.0)   | (130.0, 10.0)
  7   | (150.0, 34.0)   | (150.0, 10.0)
  8   | (170.0, 34.0)   | (170.0, 10.0)
  9   | (190.0, 34.0)   | (190.0, 10.0)
  10  | (210.0, 34.0)   | (210.0, 10.0)
  11  | (230.0, 34.0)   | (230.0, 10.0)
  12  | (250.0, 34.0)   | (250.0, 10.0)
  13  | (270.0, 34.0)   | (270.0, 10.0)
  14  | (290.0, 34.0)   | (290.0, 10.0)
  15  | (290.0, 50.4)   | (290.0, 26.4)
  16  | (270.0, 50.4)   | (270.0, 26.4)
  17  | (250.0, 50.4)   | (250.0, 26.4)
  18  | (230.0, 50.4)   | (230.0, 26.4)
  19  | (210.0, 50.4)   | (210.0, 26.4)
  20  | (190.0, 50.4)   | (190.0, 26.4)
  21  | (170.0, 50.4)   | (170.0, 26.4)
  22  | (150.0, 50.4)   | (150.0, 26.4)
  23  | (130.0, 50.4)   | (130.0, 26.4)
  24  | (110.0, 50.4)   | (110.0, 26.4)
  25  | (90.0, 50.4)    | (90.0, 26.4)
  26  | (70.0, 50.4)    | (70.0, 26.4)
  27  | (50.0, 50.4)    | (50.0, 26.4)
  28  | (30.0, 50.4)    | (30.0, 26.4)
  29  | (10.0, 50.4)    | (10.0, 26.4)
  30  | (10.0, 66.8)    | (10.0, 42.8)
  31  | (30.0, 66.8)    | (30.0, 42.8)
  32  | (50.0, 66.8)    | (50.0, 42.8)
  33  | (70.0, 66.8)    | (70.0, 42.8)
  34  | (90.0, 66.8)    | (90.0, 42.8)
  35  | (110.0, 66.8)   | (110.0, 42.8)
  36  | (130.0, 66.8)   | (130.0, 42.8)
  37  | (150.0, 66.8)   | (150.0, 42.8)
  38  | (170.0, 66.8)   | (170.0, 42.8)
  39  | (190.0, 66.8)   | (190.0, 42.8)
  40  | (210.0, 66.8)   | (210.0, 42.8)
  41  | (230.0, 66.8)   | (230.0, 42.8)
  42  | (250.0, 66.8)   | (250.0, 42.8)
  43  | (270.0, 66.8)   | (270.0, 42.8)
  44  | (290.0, 66.8)   | (290.0, 42.8)
  45  | (290.0, 83.3)   | (290.0, 59.3)
  46  | (270.0, 83.3)   | (270.0, 59.3)
  47  | (250.0, 83.3)   | (250.0, 59.3)
  48  | (230.0, 83.3)   | (230.0, 59.3)
  49  | (210.0, 83.3)   | (210.0, 59.3)
  50  | (190.0, 83.3)   | (190.0, 59.3)
  51  | (170.0, 83.3)   | (170.0, 59.3)
  52  | (150.0, 83.3)   | (150.0, 59.3)
  53  | (130.0, 83.3)   | (130.0, 59.3)
  54  | (110.0, 83.3)   | (110.0, 59.3)
  55  | (90.0, 83.3)    | (90.0, 59.3)
  56  | (70.0, 83.3)    | (70.0, 59.3)
  57  | (50.0, 83.3)    | (50.0, 59.3)
  58  | (30.0, 83.3)    | (30.0, 59.3)
  59  | (10.0, 83.3)    | (10.0, 59.3)
  60  | (10.0, 99.7)    | (10.0, 75.7)
  61  | (30.0, 99.7)    | (30.0, 75.7)
  62  | (50.0, 99.7)    | (50.0, 75.7)
  63  | (70.0, 99.7)    | (70.0, 75.7)
  64  | (90.0, 99.7)    | (90.0, 75.7)
  65  | (110.0, 99.7)   | (110.0, 75.7)
  66  | (130.0, 99.7)   | (130.0, 75.7)
  67  | (150.0, 99.7)   | (150.0, 75.7)
  68  | (170.0, 99.7)   | (170.0, 75.7)
  69  | (190.0, 99.7)   | (190.0, 75.7)
  70  | (210.0, 99.7)   | (210.0, 75.7)
  71  | (230.0, 99.7)   | (230.0, 75.7)
  72  | (250.0, 99.7)   | (250.0, 75.7)
  73  | (270.0, 99.7)   | (270.0, 75.7)
  74  | (290.0, 99.7)   | (290.0, 75.7)
  75  | (290.0, 116.1)  | (290.0, 92.1)
  76  | (270.0, 116.1)  | (270.0, 92.1)
  77  | (250.0, 116.1)  | (250.0, 92.1)
  78  | (230.0, 116.1)  | (230.0, 92.1)
  79  | (210.0, 116.1)  | (210.0, 92.1)
  80  | (190.0, 116.1)  | (190.0, 92.1)
  81  | (170.0, 116.1)  | (170.0, 92.1)
  82  | (150.0, 116.1)  | (150.0, 92.1)
  83  | (130.0, 116.1)  | (130.0, 92.1)
  84  | (110.0, 116.1)  | (110.0, 92.1)
  85  | (90.0, 116.1)   | (90.0, 92.1)
  86  | (70.0, 116.1)   | (70.0, 92.1)
  87  | (50.0, 116.1)   | (50.0, 92.1)
  88  | (30.0, 116.1)   | (30.0, 92.1)
  89  | (10.0, 116.1)   | (10.0, 92.1)
  90  | (10.0, 132.5)   | (10.0, 108.5)
  91  | (30.0, 132.5)   | (30.0, 108.5)
  92  | (50.0, 132.5)   | (50.0, 108.5)
  93  | (70.0, 132.5)   | (70.0, 108.5)
  94  | (90.0, 132.5)   | (90.0, 108.5)
  95  | (110.0, 132.5)  | (110.0, 108.5)
  96  | (130.0, 132.5)  | (130.0, 108.5)
  97  | (150.0, 132.5)  | (150.0, 108.5)
  98  | (170.0, 132.5)  | (170.0, 108.5)
  99  | (190.0, 132.5)  | (190.0, 108.5)
  100 | (210.0, 132.5)  | (210.0, 108.5)
  101 | (230.0, 132.5)  | (230.0, 108.5)
  102 | (250.0, 132.5)  | (250.0, 108.5)
  103 | (270.0, 132.5)  | (270.0, 108.5)
  104 | (290.0, 132.5)  | (290.0, 108.5)
  105 | (290.0, 148.9)  | (290.0, 124.9)
  106 | (270.0, 148.9)  | (270.0, 124.9)
  107 | (250.0, 148.9)  | (250.0, 124.9)
  108 | (230.0, 148.9)  | (230.0, 124.9)
  109 | (210.0, 148.9)  | (210.0, 124.9)
  110 | (190.0, 148.9)  | (190.0, 124.9)
  111 | (170.0, 148.9)  | (170.0, 124.9)
  112 | (150.0, 148.9)  | (150.0, 124.9)
  113 | (130.0, 148.9)  | (130.0, 124.9)
  114 | (110.0, 148.9)  | (110.0, 124.9)
  115 | (90.0, 148.9)   | (90.0, 124.9)
  116 | (70.0, 148.9)   | (70.0, 124.9)
  117 | (50.0, 148.9)   | (50.0, 124.9)
  118 | (30.0, 148.9)   | (30.0, 124.9)
  119 | (10.0, 148.9)   | (10.0, 124.9)
  120 | (10.0, 165.4)   | (10.0, 141.4)
  121 | (30.0, 165.4)   | (30.0, 141.4)
  122 | (50.0, 165.4)   | (50.0, 141.4)
  123 | (70.0, 165.4)   | (70.0, 141.4)
  124 | (90.0, 165.4)   | (90.0, 141.4)
  125 | (110.0, 165.4)  | (110.0, 141.4)
  126 | (130.0, 165.4)  | (130.0, 141.4)
  127 | (150.0, 165.4)  | (150.0, 141.4)
  128 | (170.0, 165.4)  | (170.0, 141.4)
  129 | (190.0, 165.4)  | (190.0, 141.4)
  130 | (210.0, 165.4)  | (210.0, 141.4)
  131 | (230.0, 165.4)  | (230.0, 141.4)
  132 | (250.0, 165.4)  | (250.0, 141.4)
  133 | (270.0, 165.4)  | (270.0, 141.4)
  134 | (290.0, 165.4)  | (290.0, 141.4)
  135 | (290.0, 181.8)  | (290.0, 157.8)
  136 | (270.0, 181.8)  | (270.0, 157.8)
  137 | (250.0, 181.8)  | (250.0, 157.8)
  138 | (230.0, 181.8)  | (230.0, 157.8)
  139 | (210.0, 181.8)  | (210.0, 157.8)
  140 | (190.0, 181.8)  | (190.0, 157.8)
  141 | (170.0, 181.8)  | (170.0, 157.8)
  142 | (150.0, 181.8)  | (150.0, 157.8)
  143 | (130.0, 181.8)  | (130.0, 157.8)
  144 | (110.0, 181.8)  | (110.0, 157.8)
  145 | (90.0, 181.8)   | (90.0, 157.8)
  146 | (70.0, 181.8)   | (70.0, 157.8)
  147 | (50.0, 181.8)   | (50.0, 157.8)
  148 | (30.0, 181.8)   | (30.0, 157.8)
  149 | (10.0, 181.8)   | (10.0, 157.8)
  150 | (10.0, 198.2)   | (10.0, 174.2)
  151 | (30.0, 198.2)   | (30.0, 174.2)
  152 | (50.0, 198.2)   | (50.0, 174.2)
  153 | (70.0, 198.2)   | (70.0, 174.2)
  154 | (90.0, 198.2)   | (90.0, 174.2)
  155 | (110.0, 198.2)  | (110.0, 174.2)
  156 | (130.0, 198.2)  | (130.0, 174.2)
  157 | (150.0, 198.2)  | (150.0, 174.2)
  158 | (170.0, 198.2)  | (170.0, 174.2)
  159 | (190.0, 198.2)  | (190.0, 174.2)
  160 | (210.0, 198.2)  | (210.0, 174.2)
  161 | (230.0, 198.2)  | (230.0, 174.2)
  162 | (250.0, 198.2)  | (250.0, 174.2)
  163 | (270.0, 198.2)  | (270.0, 174.2)
  164 | (290.0, 198.2)  | (290.0, 174.2)
  165 | (290.0, 214.6)  | (290.0, 190.6)
  166 | (270.0, 214.6)  | (270.0, 190.6)
  167 | (250.0, 214.6)  | (250.0, 190.6)
  168 | (230.0, 214.6)  | (230.0, 190.6)
  169 | (210.0, 214.6)  | (210.0, 190.6)
  170 | (190.0, 214.6)  | (190.0, 190.6)
  171 | (170.0, 214.6)  | (170.0, 190.6)
  172 | (150.0, 214.6)  | (150.0, 190.6)
  173 | (130.0, 214.6)  | (130.0, 190.6)
  174 | (110.0, 214.6)  | (110.0, 190.6)
  175 | (90.0, 214.6)   | (90.0, 190.6)
  176 | (70.0, 214.6)   | (70.0, 190.6)
  177 | (50.0, 214.6)   | (50.0, 190.6)
  178 | (30.0, 214.6)   | (30.0, 190.6)
  179 | (10.0, 214.6)   | (10.0, 190.6)
  180 | (10.0, 231.0)   | (10.0, 207.0)
  181 | (30.0, 231.0)   | (30.0, 207.0)
  182 | (50.0, 231.0)   | (50.0, 207.0)
  183 | (70.0, 231.0)   | (70.0, 207.0)
  184 | (90.0, 231.0)   | (90.0, 207.0)
  185 | (110.0, 231.0)  | (110.0, 207.0)
  186 | (130.0, 231.0)  | (130.0, 207.0)
  187 | (150.0, 231.0)  | (150.0, 207.0)
  188 | (170.0, 231.0)  | (170.0, 207.0)
  189 | (190.0, 231.0)  | (190.0, 207.0)
  190 | (210.0, 231.0)  | (210.0, 207.0)
  191 | (230.0, 231.0)  | (230.0, 207.0)
  192 | (250.0, 231.0)  | (250.0, 207.0)
  193 | (270.0, 231.0)  | (270.0, 207.0)
  194 | (290.0, 231.0)  | (290.0, 207.0)
  195 | (290.0, 247.5)  | (290.0, 223.5)
  196 | (270.0, 247.5)  | (270.0, 223.5)
  197 | (250.0, 247.5)  | (250.0, 223.5)
  198 | (230.0, 247.5)  | (230.0, 223.5)
  199 | (210.0, 247.5)  | (210.0, 223.5)
  200 | (190.0, 247.5)  | (190.0, 223.5)
  201 | (170.0, 247.5)  | (170.0, 223.5)
  202 | (150.0, 247.5)  | (150.0, 223.5)
  203 | (130.0, 247.5)  | (130.0, 223.5)
  204 | (110.0, 247.5)  | (110.0, 223.5)
  205 | (90.0, 247.5)   | (90.0, 223.5)
  206 | (70.0, 247.5)   | (70.0, 223.5)
  207 | (50.0, 247.5)   | (50.0, 223.5)
  208 | (30.0, 247.5)   | (30.0, 223.5)
  209 | (10.0, 247.5)   | (10.0, 223.5)
  210 | (10.0, 263.9)   | (10.0, 239.9)
  211 | (30.0, 263.9)   | (30.0, 239.9)
  212 | (50.0, 263.9)   | (50.0, 239.9)
  213 | (70.0, 263.9)   | (70.0, 239.9)
  214 | (90.0, 263.9)   | (90.0, 239.9)
  215 | (110.0, 263.9)  | (110.0, 239.9)
  216 | (130.0, 263.9)  | (130.0, 239.9)
  217 | (150.0, 263.9)  | (150.0, 239.9)
  218 | (170.0, 263.9)  | (170.0, 239.9)
  219 | (190.0, 263.9)  | (190.0, 239.9)
  220 | (210.0, 263.9)  | (210.0, 239.9)
  221 | (230.0, 263.9)  | (230.0, 239.9)
  222 | (250.0, 263.9)  | (250.0, 239.9)
  223 | (270.0, 263.9)  | (270.0, 239.9)
  224 | (290.0, 263.9)  | (290.0, 239.9)
beacon: loaded fmin=2963903.55 from nvm
beacon: loaded fmin_temp=20.66 from nvm
beacon: built tempco model version 0 {'amfg': 1.0, 'tcc': -2.1429828e-05, 'tcfl': -1.8980091e-10, 'tctl': 3.673837e-16, 'fmin': 2963903.546333313, 'fmin_temp': 20.657632580403686}
Sending MCU 'beacon' printer configuration...
Configured MCU 'beacon' (0 moves)
Starting heater checks for extruder
webhooks: registering remote method 'shutdown_machine' for connection id: 547664177472
webhooks: registering remote method 'reboot_machine' for connection id: 547664177472
webhooks: registering remote method 'pause_job_queue' for connection id: 547664177472
webhooks: registering remote method 'start_job_queue' for connection id: 547664177472
webhooks: registering remote method 'timelapse_newframe' for connection id: 547664177472
webhooks: registering remote method 'timelapse_saveFrames' for connection id: 547664177472
webhooks: registering remote method 'timelapse_render' for connection id: 547664177472
Unknown command:"_SET_TIMELAPSE_SETUP"
Unknown command:"HYPERLAPSE"
Stats 1042574.3: gcodein=0  mcu: mcu_awake=0.018 mcu_task_avg=0.000022 mcu_task_stddev=0.000078 bytes_write=7647 bytes_read=7210 bytes_retransmit=9 bytes_invalid=0 send_seq=359 receive_seq=359 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180001692 rpi: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=834 bytes_read=5815 bytes_retransmit=0 bytes_invalid=0 send_seq=114 receive_seq=114 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998347 adj=49999093 sht36: mcu_awake=0.016 mcu_task_avg=0.000021 mcu_task_stddev=0.000034 bytes_write=1652 bytes_read=5065 bytes_retransmit=0 bytes_invalid=0 send_seq=166 receive_seq=166 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=48000702 adj=48000469  Spider: temp=46.0 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=351 bytes_read=2477 bytes_retransmit=0 bytes_invalid=0 send_seq=59 receive_seq=59 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999549 adj=31999920 coil_temp=28.7 refs=0 mcu_temp=29.37 supply_voltage=3.002 sysload=0.09 cputime=16.199 memavail=3290296 print_time=533.467 buffer_time=2.063 print_stall=0 extruder: target=0 temp=32.9 pwm=0.000
Stats 1042575.3: gcodein=0  mcu: mcu_awake=0.018 mcu_task_avg=0.000022 mcu_task_stddev=0.000078 bytes_write=7653 bytes_read=7388 bytes_retransmit=9 bytes_invalid=0 send_seq=360 receive_seq=360 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180001764 rpi: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000011 bytes_write=840 bytes_read=5845 bytes_retransmit=0 bytes_invalid=0 send_seq=115 receive_seq=115 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998693 adj=49998676 sht36: mcu_awake=0.016 mcu_task_avg=0.000021 mcu_task_stddev=0.000034 bytes_write=1901 bytes_read=5330 bytes_retransmit=0 bytes_invalid=0 send_seq=185 receive_seq=185 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=48000090 adj=48000310  Spider: temp=45.9 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=357 bytes_read=2833 bytes_retransmit=0 bytes_invalid=0 send_seq=60 receive_seq=60 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999405 adj=31998903 coil_temp=28.7 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.09 cputime=16.238 memavail=3293996 print_time=534.961 buffer_time=2.556 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042576.3: gcodein=0  mcu: mcu_awake=0.018 mcu_task_avg=0.000022 mcu_task_stddev=0.000078 bytes_write=7659 bytes_read=7536 bytes_retransmit=9 bytes_invalid=0 send_seq=361 receive_seq=361 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180001934 rpi: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000011 bytes_write=846 bytes_read=5861 bytes_retransmit=0 bytes_invalid=0 send_seq=116 receive_seq=116 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998811 adj=49999049 sht36: mcu_awake=0.016 mcu_task_avg=0.000021 mcu_task_stddev=0.000034 bytes_write=2015 bytes_read=5534 bytes_retransmit=0 bytes_invalid=0 send_seq=194 receive_seq=194 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=47999913 adj=47998957  Spider: temp=46.1 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=363 bytes_read=3189 bytes_retransmit=0 bytes_invalid=0 send_seq=61 receive_seq=61 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999388 adj=31998731 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.09 cputime=16.270 memavail=3294076 print_time=536.381 buffer_time=2.975 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042577.3: gcodein=0  mcu: mcu_awake=0.018 mcu_task_avg=0.000022 mcu_task_stddev=0.000078 bytes_write=7665 bytes_read=7698 bytes_retransmit=9 bytes_invalid=0 send_seq=362 receive_seq=362 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002146 rpi: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000011 bytes_write=852 bytes_read=5877 bytes_retransmit=0 bytes_invalid=0 send_seq=117 receive_seq=117 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998865 adj=49998924 sht36: mcu_awake=0.016 mcu_task_avg=0.000021 mcu_task_stddev=0.000034 bytes_write=2129 bytes_read=5709 bytes_retransmit=0 bytes_invalid=0 send_seq=203 receive_seq=203 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=47999858 adj=47998699  Spider: temp=46.0 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=369 bytes_read=3545 bytes_retransmit=0 bytes_invalid=0 send_seq=62 receive_seq=62 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999361 adj=31998747 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.09 cputime=16.302 memavail=3293828 print_time=536.461 buffer_time=2.054 print_stall=0 extruder: target=0 temp=32.8 pwm=0.000
Stats 1042578.3: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000042 mcu_task_stddev=0.000236 bytes_write=7671 bytes_read=7892 bytes_retransmit=9 bytes_invalid=0 send_seq=363 receive_seq=363 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002117 rpi: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000011 bytes_write=858 bytes_read=5893 bytes_retransmit=0 bytes_invalid=0 send_seq=118 receive_seq=118 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998892 adj=49998909 sht36: mcu_awake=0.010 mcu_task_avg=0.000033 mcu_task_stddev=0.000053 bytes_write=2189 bytes_read=5863 bytes_retransmit=0 bytes_invalid=0 send_seq=208 receive_seq=208 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=47999794 adj=47998453  Spider: temp=46.1 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=375 bytes_read=3896 bytes_retransmit=0 bytes_invalid=0 send_seq=63 receive_seq=63 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999363 adj=31998607 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.08 cputime=16.344 memavail=3292832 print_time=537.481 buffer_time=2.073 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042579.3: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000042 mcu_task_stddev=0.000236 bytes_write=7677 bytes_read=8040 bytes_retransmit=9 bytes_invalid=0 send_seq=364 receive_seq=364 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002160 rpi: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000011 bytes_write=864 bytes_read=5909 bytes_retransmit=0 bytes_invalid=0 send_seq=119 receive_seq=119 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49998949 adj=49999001 sht36: mcu_awake=0.010 mcu_task_avg=0.000033 mcu_task_stddev=0.000053 bytes_write=2229 bytes_read=6017 bytes_retransmit=0 bytes_invalid=0 send_seq=212 receive_seq=212 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=15 upcoming_bytes=2 freq=47999726 adj=47998315  Spider: temp=46.0 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=381 bytes_read=4241 bytes_retransmit=0 bytes_invalid=0 send_seq=64 receive_seq=64 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999364 adj=31998625 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.08 cputime=16.385 memavail=3292840 print_time=538.081 buffer_time=1.673 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042580.3: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000042 mcu_task_stddev=0.000236 bytes_write=7683 bytes_read=8217 bytes_retransmit=9 bytes_invalid=0 send_seq=365 receive_seq=365 retransmit_seq=2 srtt=0.000 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002199 rpi: mcu_awake=0.000 mcu_task_avg=0.000006 mcu_task_stddev=0.000009 bytes_write=876 bytes_read=5954 bytes_retransmit=0 bytes_invalid=0 send_seq=121 receive_seq=121 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999012 adj=49999128 sht36: mcu_awake=0.010 mcu_task_avg=0.000033 mcu_task_stddev=0.000053 bytes_write=2369 bytes_read=6224 bytes_retransmit=0 bytes_invalid=0 send_seq=226 receive_seq=226 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=47999716 adj=47998097  Spider: temp=46.2 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=387 bytes_read=4585 bytes_retransmit=0 bytes_invalid=0 send_seq=65 receive_seq=65 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999362 adj=31998606 coil_temp=28.7 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.08 cputime=16.418 memavail=3292840 print_time=538.081 buffer_time=0.673 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042581.3: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000042 mcu_task_stddev=0.000236 bytes_write=7788 bytes_read=8395 bytes_retransmit=9 bytes_invalid=0 send_seq=369 receive_seq=369 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002274 rpi: mcu_awake=0.000 mcu_task_avg=0.000006 mcu_task_stddev=0.000009 bytes_write=882 bytes_read=5970 bytes_retransmit=0 bytes_invalid=0 send_seq=122 receive_seq=122 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999041 adj=49999271 sht36: mcu_awake=0.010 mcu_task_avg=0.000033 mcu_task_stddev=0.000053 bytes_write=2447 bytes_read=6387 bytes_retransmit=0 bytes_invalid=0 send_seq=234 receive_seq=234 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999697 adj=47998039  Spider: temp=46.2 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=393 bytes_read=4930 bytes_retransmit=0 bytes_invalid=0 send_seq=66 receive_seq=66 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999360 adj=31998581 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.08 cputime=16.449 memavail=3292840 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042582.3: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000042 mcu_task_stddev=0.000236 bytes_write=8255 bytes_read=8588 bytes_retransmit=9 bytes_invalid=0 send_seq=379 receive_seq=379 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002270 rpi: mcu_awake=0.000 mcu_task_avg=0.000006 mcu_task_stddev=0.000009 bytes_write=888 bytes_read=5986 bytes_retransmit=0 bytes_invalid=0 send_seq=123 receive_seq=123 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999041 adj=49999294 sht36: mcu_awake=0.010 mcu_task_avg=0.000033 mcu_task_stddev=0.000053 bytes_write=2453 bytes_read=6510 bytes_retransmit=0 bytes_invalid=0 send_seq=235 receive_seq=235 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999674 adj=47997924  Spider: temp=46.2 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=399 bytes_read=5275 bytes_retransmit=0 bytes_invalid=0 send_seq=67 receive_seq=67 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999385 adj=31998533 coil_temp=28.6 refs=0 mcu_temp=29.37 supply_voltage=3.002 sysload=0.08 cputime=16.480 memavail=3292844 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042583.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000012 mcu_task_stddev=0.000030 bytes_write=8261 bytes_read=8780 bytes_retransmit=9 bytes_invalid=0 send_seq=380 receive_seq=380 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002312 rpi: mcu_awake=0.000 mcu_task_avg=0.000006 mcu_task_stddev=0.000009 bytes_write=894 bytes_read=6002 bytes_retransmit=0 bytes_invalid=0 send_seq=124 receive_seq=124 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999047 adj=49999299 sht36: mcu_awake=0.005 mcu_task_avg=0.000027 mcu_task_stddev=0.000045 bytes_write=2459 bytes_read=6621 bytes_retransmit=0 bytes_invalid=0 send_seq=236 receive_seq=236 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999667 adj=47997850  Spider: temp=46.1 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=405 bytes_read=5620 bytes_retransmit=0 bytes_invalid=0 send_seq=68 receive_seq=68 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999378 adj=31998620 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.07 cputime=16.507 memavail=3292844 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042584.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000012 mcu_task_stddev=0.000030 bytes_write=8267 bytes_read=8943 bytes_retransmit=9 bytes_invalid=0 send_seq=381 receive_seq=381 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002381 rpi: mcu_awake=0.000 mcu_task_avg=0.000006 mcu_task_stddev=0.000009 bytes_write=900 bytes_read=6018 bytes_retransmit=0 bytes_invalid=0 send_seq=125 receive_seq=125 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999128 adj=49999141 sht36: mcu_awake=0.005 mcu_task_avg=0.000027 mcu_task_stddev=0.000045 bytes_write=2465 bytes_read=6721 bytes_retransmit=0 bytes_invalid=0 send_seq=237 receive_seq=237 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999692 adj=47997956  Spider: temp=46.2 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=411 bytes_read=5965 bytes_retransmit=0 bytes_invalid=0 send_seq=69 receive_seq=69 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999396 adj=31998616 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.07 cputime=16.563 memavail=3289820 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042585.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000012 mcu_task_stddev=0.000030 bytes_write=8273 bytes_read=9091 bytes_retransmit=9 bytes_invalid=0 send_seq=382 receive_seq=382 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002449 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000013 bytes_write=906 bytes_read=6047 bytes_retransmit=0 bytes_invalid=0 send_seq=126 receive_seq=126 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999164 adj=49999219 sht36: mcu_awake=0.005 mcu_task_avg=0.000027 mcu_task_stddev=0.000045 bytes_write=2471 bytes_read=6853 bytes_retransmit=0 bytes_invalid=0 send_seq=238 receive_seq=238 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999703 adj=47998254  Spider: temp=46.1 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=417 bytes_read=6310 bytes_retransmit=0 bytes_invalid=0 send_seq=70 receive_seq=70 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999412 adj=31998723 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.07 cputime=16.619 memavail=3289820 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042586.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000012 mcu_task_stddev=0.000030 bytes_write=8279 bytes_read=9268 bytes_retransmit=9 bytes_invalid=0 send_seq=383 receive_seq=383 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002502 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000013 bytes_write=912 bytes_read=6063 bytes_retransmit=0 bytes_invalid=0 send_seq=127 receive_seq=127 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999189 adj=49999105 sht36: mcu_awake=0.005 mcu_task_avg=0.000027 mcu_task_stddev=0.000045 bytes_write=2477 bytes_read=6956 bytes_retransmit=0 bytes_invalid=0 send_seq=239 receive_seq=239 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999703 adj=47998417  Spider: temp=46.1 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=423 bytes_read=6656 bytes_retransmit=0 bytes_invalid=0 send_seq=71 receive_seq=71 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999424 adj=31998801 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.07 cputime=16.699 memavail=3289820 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042587.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000012 mcu_task_stddev=0.000030 bytes_write=8285 bytes_read=9431 bytes_retransmit=9 bytes_invalid=0 send_seq=384 receive_seq=384 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002502 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000013 bytes_write=918 bytes_read=6079 bytes_retransmit=0 bytes_invalid=0 send_seq=128 receive_seq=128 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999198 adj=49998997 sht36: mcu_awake=0.005 mcu_task_avg=0.000027 mcu_task_stddev=0.000045 bytes_write=2483 bytes_read=7059 bytes_retransmit=0 bytes_invalid=0 send_seq=240 receive_seq=240 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999721 adj=47998512  Spider: temp=46.1 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=429 bytes_read=7012 bytes_retransmit=0 bytes_invalid=0 send_seq=72 receive_seq=72 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999427 adj=31998850 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.07 cputime=16.755 memavail=3297508 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042588.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=8343 bytes_read=9604 bytes_retransmit=9 bytes_invalid=0 send_seq=387 receive_seq=387 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002488 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000013 bytes_write=924 bytes_read=6095 bytes_retransmit=0 bytes_invalid=0 send_seq=129 receive_seq=129 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999209 adj=49998914 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2489 bytes_read=7205 bytes_retransmit=0 bytes_invalid=0 send_seq=241 receive_seq=241 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999727 adj=47998727  Spider: temp=46.2 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=435 bytes_read=7368 bytes_retransmit=0 bytes_invalid=0 send_seq=73 receive_seq=73 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999425 adj=31998899 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.07 cputime=16.815 memavail=3296252 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042589.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=8349 bytes_read=9781 bytes_retransmit=9 bytes_invalid=0 send_seq=388 receive_seq=388 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002443 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000013 bytes_write=930 bytes_read=6111 bytes_retransmit=0 bytes_invalid=0 send_seq=130 receive_seq=130 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999180 adj=49998890 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2495 bytes_read=7308 bytes_retransmit=0 bytes_invalid=0 send_seq=242 receive_seq=242 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999718 adj=47998856  Spider: temp=46.2 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.0 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=441 bytes_read=7724 bytes_retransmit=0 bytes_invalid=0 send_seq=74 receive_seq=74 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999412 adj=31998923 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.07 cputime=16.845 memavail=3296260 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042590.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=8407 bytes_read=9954 bytes_retransmit=9 bytes_invalid=0 send_seq=391 receive_seq=391 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002428 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000016 bytes_write=936 bytes_read=6140 bytes_retransmit=0 bytes_invalid=0 send_seq=131 receive_seq=131 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999151 adj=49998709 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2501 bytes_read=7411 bytes_retransmit=0 bytes_invalid=0 send_seq=243 receive_seq=243 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999696 adj=47998928  Spider: temp=46.0 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=447 bytes_read=8080 bytes_retransmit=0 bytes_invalid=0 send_seq=75 receive_seq=75 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999405 adj=31998913 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.07 cputime=16.874 memavail=3296260 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.3 pwm=0.000
Stats 1042591.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=8413 bytes_read=10099 bytes_retransmit=9 bytes_invalid=0 send_seq=392 receive_seq=392 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002395 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000016 bytes_write=942 bytes_read=6156 bytes_retransmit=0 bytes_invalid=0 send_seq=132 receive_seq=132 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999128 adj=49998525 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2507 bytes_read=7543 bytes_retransmit=0 bytes_invalid=0 send_seq=244 receive_seq=244 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999693 adj=47998865  Spider: temp=46.1 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=453 bytes_read=8436 bytes_retransmit=0 bytes_invalid=0 send_seq=76 receive_seq=76 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999407 adj=31998910 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.07 cputime=16.899 memavail=3296260 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042592.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=8419 bytes_read=10276 bytes_retransmit=9 bytes_invalid=0 send_seq=393 receive_seq=393 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002370 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000016 bytes_write=948 bytes_read=6172 bytes_retransmit=0 bytes_invalid=0 send_seq=133 receive_seq=133 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999123 adj=49998431 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2513 bytes_read=7646 bytes_retransmit=0 bytes_invalid=0 send_seq=245 receive_seq=245 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999685 adj=47998947  Spider: temp=46.2 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=459 bytes_read=8792 bytes_retransmit=0 bytes_invalid=0 send_seq=77 receive_seq=77 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999402 adj=31998971 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.07 cputime=16.926 memavail=3296264 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.3 pwm=0.000
Stats 1042593.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=8425 bytes_read=10438 bytes_retransmit=9 bytes_invalid=0 send_seq=394 receive_seq=394 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002346 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000016 bytes_write=954 bytes_read=6188 bytes_retransmit=0 bytes_invalid=0 send_seq=134 receive_seq=134 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999146 adj=49998451 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2519 bytes_read=7763 bytes_retransmit=0 bytes_invalid=0 send_seq=246 receive_seq=246 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999675 adj=47998969  Spider: temp=46.3 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=465 bytes_read=9148 bytes_retransmit=0 bytes_invalid=0 send_seq=78 receive_seq=78 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999395 adj=31998972 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.06 cputime=16.954 memavail=3295760 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042594.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=8431 bytes_read=10586 bytes_retransmit=9 bytes_invalid=0 send_seq=395 receive_seq=395 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002363 rpi: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000016 bytes_write=960 bytes_read=6204 bytes_retransmit=0 bytes_invalid=0 send_seq=135 receive_seq=135 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999178 adj=49998636 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2525 bytes_read=7895 bytes_retransmit=0 bytes_invalid=0 send_seq=247 receive_seq=247 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999679 adj=47998966  Spider: temp=46.1 raspberry_pi: temp=37.5 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=471 bytes_read=9504 bytes_retransmit=0 bytes_invalid=0 send_seq=79 receive_seq=79 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999411 adj=31998958 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.06 cputime=17.007 memavail=3295760 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.3 pwm=0.000
Stats 1042595.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=8437 bytes_read=10778 bytes_retransmit=9 bytes_invalid=0 send_seq=396 receive_seq=396 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002390 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=966 bytes_read=6233 bytes_retransmit=0 bytes_invalid=0 send_seq=136 receive_seq=136 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999190 adj=49998772 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2531 bytes_read=7998 bytes_retransmit=0 bytes_invalid=0 send_seq=248 receive_seq=248 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999683 adj=47998986  Spider: temp=46.2 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=477 bytes_read=9860 bytes_retransmit=0 bytes_invalid=0 send_seq=80 receive_seq=80 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999414 adj=31999043 coil_temp=28.6 refs=0 mcu_temp=29.37 supply_voltage=3.002 sysload=0.06 cputime=17.065 memavail=3295760 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042596.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=8547 bytes_read=10946 bytes_retransmit=9 bytes_invalid=0 send_seq=401 receive_seq=401 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002425 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=972 bytes_read=6249 bytes_retransmit=0 bytes_invalid=0 send_seq=137 receive_seq=137 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999205 adj=49998738 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2537 bytes_read=8101 bytes_retransmit=0 bytes_invalid=0 send_seq=249 receive_seq=249 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999703 adj=47998978  Spider: temp=46.1 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.0 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=483 bytes_read=10216 bytes_retransmit=0 bytes_invalid=0 send_seq=81 receive_seq=81 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999418 adj=31999016 coil_temp=28.6 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.06 cputime=17.129 memavail=3295760 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042597.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=8553 bytes_read=11094 bytes_retransmit=9 bytes_invalid=0 send_seq=402 receive_seq=402 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002467 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=978 bytes_read=6265 bytes_retransmit=0 bytes_invalid=0 send_seq=138 receive_seq=138 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999203 adj=49998718 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2543 bytes_read=8233 bytes_retransmit=0 bytes_invalid=0 send_seq=250 receive_seq=250 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999698 adj=47999062  Spider: temp=46.1 raspberry_pi: temp=37.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=495 bytes_read=10588 bytes_retransmit=0 bytes_invalid=0 send_seq=83 receive_seq=83 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999423 adj=31998994 coil_temp=28.6 refs=0 mcu_temp=29.38 supply_voltage=3.002 sysload=0.06 cputime=17.192 memavail=3295760 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.3 pwm=0.000
Stats 1042598.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=8559 bytes_read=11301 bytes_retransmit=9 bytes_invalid=0 send_seq=403 receive_seq=403 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002468 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=984 bytes_read=6281 bytes_retransmit=0 bytes_invalid=0 send_seq=139 receive_seq=139 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999199 adj=49998576 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2549 bytes_read=8336 bytes_retransmit=0 bytes_invalid=0 send_seq=251 receive_seq=251 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999703 adj=47998950  Spider: temp=46.1 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=501 bytes_read=10944 bytes_retransmit=0 bytes_invalid=0 send_seq=84 receive_seq=84 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999417 adj=31998969 coil_temp=28.7 refs=0 mcu_temp=29.39 supply_voltage=3.002 sysload=0.06 cputime=17.252 memavail=3295256 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042599.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=8565 bytes_read=11449 bytes_retransmit=9 bytes_invalid=0 send_seq=404 receive_seq=404 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002534 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=990 bytes_read=6297 bytes_retransmit=0 bytes_invalid=0 send_seq=140 receive_seq=140 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999211 adj=49998534 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2555 bytes_read=8453 bytes_retransmit=0 bytes_invalid=0 send_seq=252 receive_seq=252 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999704 adj=47999005  Spider: temp=46.0 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=507 bytes_read=11300 bytes_retransmit=0 bytes_invalid=0 send_seq=85 receive_seq=85 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999418 adj=31998938 coil_temp=28.7 refs=0 mcu_temp=29.40 supply_voltage=3.002 sysload=0.06 cputime=17.303 memavail=3295264 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042600.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=8571 bytes_read=11597 bytes_retransmit=9 bytes_invalid=0 send_seq=405 receive_seq=405 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002526 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000020 bytes_write=996 bytes_read=6326 bytes_retransmit=0 bytes_invalid=0 send_seq=141 receive_seq=141 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999223 adj=49998483 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2561 bytes_read=8585 bytes_retransmit=0 bytes_invalid=0 send_seq=253 receive_seq=253 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999705 adj=47998897  Spider: temp=46.2 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=513 bytes_read=11656 bytes_retransmit=0 bytes_invalid=0 send_seq=86 receive_seq=86 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999414 adj=31998865 coil_temp=28.7 refs=0 mcu_temp=29.41 supply_voltage=3.002 sysload=0.06 cputime=17.363 memavail=3295264 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042601.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=8577 bytes_read=11789 bytes_retransmit=9 bytes_invalid=0 send_seq=406 receive_seq=406 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002522 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000020 bytes_write=1002 bytes_read=6342 bytes_retransmit=0 bytes_invalid=0 send_seq=142 receive_seq=142 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999216 adj=49998588 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2567 bytes_read=8688 bytes_retransmit=0 bytes_invalid=0 send_seq=254 receive_seq=254 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999732 adj=47998956  Spider: temp=46.3 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=519 bytes_read=12012 bytes_retransmit=0 bytes_invalid=0 send_seq=87 receive_seq=87 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999420 adj=31998875 coil_temp=28.7 refs=0 mcu_temp=29.41 supply_voltage=3.002 sysload=0.06 cputime=17.421 memavail=3295264 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042602.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=8583 bytes_read=11937 bytes_retransmit=9 bytes_invalid=0 send_seq=407 receive_seq=407 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002507 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000020 bytes_write=1008 bytes_read=6358 bytes_retransmit=0 bytes_invalid=0 send_seq=143 receive_seq=143 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999206 adj=49998529 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2573 bytes_read=8791 bytes_retransmit=0 bytes_invalid=0 send_seq=255 receive_seq=255 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999731 adj=47999175  Spider: temp=46.1 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=525 bytes_read=12368 bytes_retransmit=0 bytes_invalid=0 send_seq=88 receive_seq=88 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999422 adj=31998943 coil_temp=28.7 refs=0 mcu_temp=29.41 supply_voltage=3.002 sysload=0.06 cputime=17.479 memavail=3295264 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042603.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=8589 bytes_read=12099 bytes_retransmit=9 bytes_invalid=0 send_seq=408 receive_seq=408 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002487 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000020 bytes_write=1014 bytes_read=6374 bytes_retransmit=0 bytes_invalid=0 send_seq=144 receive_seq=144 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999202 adj=49998478 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2579 bytes_read=8923 bytes_retransmit=0 bytes_invalid=0 send_seq=256 receive_seq=256 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999732 adj=47999174  Spider: temp=46.2 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=531 bytes_read=12724 bytes_retransmit=0 bytes_invalid=0 send_seq=89 receive_seq=89 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999419 adj=31998991 coil_temp=28.7 refs=0 mcu_temp=29.41 supply_voltage=3.002 sysload=0.13 cputime=17.537 memavail=3294512 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042604.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=8647 bytes_read=12301 bytes_retransmit=9 bytes_invalid=0 send_seq=411 receive_seq=411 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002474 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000020 bytes_write=1020 bytes_read=6390 bytes_retransmit=0 bytes_invalid=0 send_seq=145 receive_seq=145 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999201 adj=49998508 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2585 bytes_read=9040 bytes_retransmit=0 bytes_invalid=0 send_seq=257 receive_seq=257 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999726 adj=47999194  Spider: temp=46.1 raspberry_pi: temp=36.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=537 bytes_read=13080 bytes_retransmit=0 bytes_invalid=0 send_seq=90 receive_seq=90 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999415 adj=31998994 coil_temp=28.7 refs=0 mcu_temp=29.42 supply_voltage=3.002 sysload=0.13 cputime=17.592 memavail=3294516 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042605.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=8752 bytes_read=12464 bytes_retransmit=9 bytes_invalid=0 send_seq=415 receive_seq=415 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002456 rpi: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000019 bytes_write=1026 bytes_read=6419 bytes_retransmit=0 bytes_invalid=0 send_seq=146 receive_seq=146 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999200 adj=49998524 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2591 bytes_read=9143 bytes_retransmit=0 bytes_invalid=0 send_seq=258 receive_seq=258 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999724 adj=47999144  Spider: temp=46.3 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=543 bytes_read=13436 bytes_retransmit=0 bytes_invalid=0 send_seq=91 receive_seq=91 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999412 adj=31998977 coil_temp=28.7 refs=0 mcu_temp=29.43 supply_voltage=3.002 sysload=0.13 cputime=17.651 memavail=3294516 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042606.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=8810 bytes_read=12622 bytes_retransmit=9 bytes_invalid=0 send_seq=418 receive_seq=418 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002443 rpi: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000019 bytes_write=1032 bytes_read=6435 bytes_retransmit=0 bytes_invalid=0 send_seq=147 receive_seq=147 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999199 adj=49998557 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2597 bytes_read=9275 bytes_retransmit=0 bytes_invalid=0 send_seq=259 receive_seq=259 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999720 adj=47999152  Spider: temp=46.2 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=549 bytes_read=13792 bytes_retransmit=0 bytes_invalid=0 send_seq=92 receive_seq=92 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999411 adj=31998977 coil_temp=28.7 refs=0 mcu_temp=29.43 supply_voltage=3.002 sysload=0.13 cputime=17.713 memavail=3294516 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042607.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=8816 bytes_read=12814 bytes_retransmit=9 bytes_invalid=0 send_seq=419 receive_seq=419 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002428 rpi: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000019 bytes_write=1038 bytes_read=6451 bytes_retransmit=0 bytes_invalid=0 send_seq=148 receive_seq=148 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999210 adj=49998566 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2603 bytes_read=9378 bytes_retransmit=0 bytes_invalid=0 send_seq=260 receive_seq=260 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999716 adj=47999126  Spider: temp=46.2 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=555 bytes_read=14148 bytes_retransmit=0 bytes_invalid=0 send_seq=93 receive_seq=93 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999409 adj=31998986 coil_temp=28.7 refs=0 mcu_temp=29.43 supply_voltage=3.002 sysload=0.13 cputime=17.772 memavail=3294516 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042608.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000008 mcu_task_stddev=0.000017 bytes_write=8921 bytes_read=12992 bytes_retransmit=9 bytes_invalid=0 send_seq=423 receive_seq=423 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002418 rpi: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000019 bytes_write=1044 bytes_read=6467 bytes_retransmit=0 bytes_invalid=0 send_seq=149 receive_seq=149 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999213 adj=49998681 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2609 bytes_read=9481 bytes_retransmit=0 bytes_invalid=0 send_seq=261 receive_seq=261 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999712 adj=47999115  Spider: temp=46.1 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=561 bytes_read=14504 bytes_retransmit=0 bytes_invalid=0 send_seq=94 receive_seq=94 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999420 adj=31998995 coil_temp=28.7 refs=0 mcu_temp=29.42 supply_voltage=3.002 sysload=0.20 cputime=17.832 memavail=3294012 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042609.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000008 mcu_task_stddev=0.000017 bytes_write=8927 bytes_read=13140 bytes_retransmit=9 bytes_invalid=0 send_seq=424 receive_seq=424 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002402 rpi: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000019 bytes_write=1050 bytes_read=6483 bytes_retransmit=0 bytes_invalid=0 send_seq=150 receive_seq=150 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999210 adj=49998695 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2615 bytes_read=9627 bytes_retransmit=0 bytes_invalid=0 send_seq=262 receive_seq=262 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999709 adj=47999088  Spider: temp=46.0 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=567 bytes_read=14860 bytes_retransmit=0 bytes_invalid=0 send_seq=95 receive_seq=95 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999420 adj=31999092 coil_temp=28.7 refs=0 mcu_temp=29.42 supply_voltage=3.002 sysload=0.20 cputime=17.888 memavail=3293772 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042610.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000008 mcu_task_stddev=0.000017 bytes_write=8933 bytes_read=13332 bytes_retransmit=9 bytes_invalid=0 send_seq=425 receive_seq=425 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002404 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000020 bytes_write=1056 bytes_read=6512 bytes_retransmit=0 bytes_invalid=0 send_seq=151 receive_seq=151 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999207 adj=49998678 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2621 bytes_read=9730 bytes_retransmit=0 bytes_invalid=0 send_seq=263 receive_seq=263 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999705 adj=47999093  Spider: temp=46.2 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=573 bytes_read=15216 bytes_retransmit=0 bytes_invalid=0 send_seq=96 receive_seq=96 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999417 adj=31999095 coil_temp=28.7 refs=0 mcu_temp=29.43 supply_voltage=3.002 sysload=0.20 cputime=17.947 memavail=3293772 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.8 pwm=0.000
Stats 1042611.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000008 mcu_task_stddev=0.000017 bytes_write=8991 bytes_read=13490 bytes_retransmit=9 bytes_invalid=0 send_seq=428 receive_seq=428 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002403 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000020 bytes_write=1062 bytes_read=6528 bytes_retransmit=0 bytes_invalid=0 send_seq=152 receive_seq=152 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999205 adj=49998607 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2627 bytes_read=9833 bytes_retransmit=0 bytes_invalid=0 send_seq=264 receive_seq=264 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999701 adj=47999054  Spider: temp=46.1 raspberry_pi: temp=36.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=579 bytes_read=15572 bytes_retransmit=0 bytes_invalid=0 send_seq=97 receive_seq=97 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999414 adj=31999043 coil_temp=28.7 refs=0 mcu_temp=29.44 supply_voltage=3.002 sysload=0.20 cputime=18.007 memavail=3293772 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042612.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000008 mcu_task_stddev=0.000017 bytes_write=8997 bytes_read=13638 bytes_retransmit=9 bytes_invalid=0 send_seq=429 receive_seq=429 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002398 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000020 bytes_write=1068 bytes_read=6544 bytes_retransmit=0 bytes_invalid=0 send_seq=153 receive_seq=153 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999223 adj=49998577 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2633 bytes_read=9965 bytes_retransmit=0 bytes_invalid=0 send_seq=265 receive_seq=265 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999696 adj=47999016  Spider: temp=46.1 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=585 bytes_read=15928 bytes_retransmit=0 bytes_invalid=0 send_seq=98 receive_seq=98 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999412 adj=31999004 coil_temp=28.7 refs=0 mcu_temp=29.44 supply_voltage=3.002 sysload=0.20 cputime=18.065 memavail=3293772 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042613.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000007 bytes_write=9009 bytes_read=13861 bytes_retransmit=9 bytes_invalid=0 send_seq=431 receive_seq=431 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002401 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000020 bytes_write=1074 bytes_read=6560 bytes_retransmit=0 bytes_invalid=0 send_seq=154 receive_seq=154 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999214 adj=49998748 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2639 bytes_read=10068 bytes_retransmit=0 bytes_invalid=0 send_seq=266 receive_seq=266 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999692 adj=47999001  Spider: temp=46.0 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=591 bytes_read=16284 bytes_retransmit=0 bytes_invalid=0 send_seq=99 receive_seq=99 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999408 adj=31998985 coil_temp=28.7 refs=0 mcu_temp=29.45 supply_voltage=3.002 sysload=0.27 cputime=18.120 memavail=3293532 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042614.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000007 bytes_write=9015 bytes_read=14009 bytes_retransmit=9 bytes_invalid=0 send_seq=432 receive_seq=432 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002384 rpi: mcu_awake=0.001 mcu_task_avg=0.000011 mcu_task_stddev=0.000020 bytes_write=1080 bytes_read=6576 bytes_retransmit=0 bytes_invalid=0 send_seq=155 receive_seq=155 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999199 adj=49998609 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2645 bytes_read=10185 bytes_retransmit=0 bytes_invalid=0 send_seq=267 receive_seq=267 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999695 adj=47998970  Spider: temp=46.1 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=597 bytes_read=16640 bytes_retransmit=0 bytes_invalid=0 send_seq=100 receive_seq=100 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999402 adj=31998946 coil_temp=28.7 refs=0 mcu_temp=29.45 supply_voltage=3.002 sysload=0.27 cputime=18.148 memavail=3293532 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042615.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000007 bytes_write=9021 bytes_read=14153 bytes_retransmit=9 bytes_invalid=0 send_seq=433 receive_seq=433 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002370 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1086 bytes_read=6605 bytes_retransmit=0 bytes_invalid=0 send_seq=156 receive_seq=156 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999183 adj=49998491 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2651 bytes_read=10317 bytes_retransmit=0 bytes_invalid=0 send_seq=268 receive_seq=268 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999686 adj=47999056  Spider: temp=46.2 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=603 bytes_read=16996 bytes_retransmit=0 bytes_invalid=0 send_seq=101 receive_seq=101 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999398 adj=31998933 coil_temp=28.7 refs=0 mcu_temp=29.45 supply_voltage=3.002 sysload=0.27 cputime=18.175 memavail=3293532 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042616.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000007 bytes_write=9079 bytes_read=14342 bytes_retransmit=9 bytes_invalid=0 send_seq=436 receive_seq=436 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002358 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1092 bytes_read=6621 bytes_retransmit=0 bytes_invalid=0 send_seq=157 receive_seq=157 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999169 adj=49998384 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2657 bytes_read=10420 bytes_retransmit=0 bytes_invalid=0 send_seq=269 receive_seq=269 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999678 adj=47999012  Spider: temp=46.2 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=609 bytes_read=17352 bytes_retransmit=0 bytes_invalid=0 send_seq=102 receive_seq=102 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999393 adj=31998924 coil_temp=28.7 refs=0 mcu_temp=29.46 supply_voltage=3.002 sysload=0.27 cputime=18.204 memavail=3293028 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042617.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000007 bytes_write=9137 bytes_read=14500 bytes_retransmit=9 bytes_invalid=0 send_seq=439 receive_seq=439 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002345 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1098 bytes_read=6637 bytes_retransmit=0 bytes_invalid=0 send_seq=158 receive_seq=158 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999155 adj=49998318 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2663 bytes_read=10523 bytes_retransmit=0 bytes_invalid=0 send_seq=270 receive_seq=270 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999671 adj=47998976  Spider: temp=46.2 raspberry_pi: temp=37.0 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=615 bytes_read=17708 bytes_retransmit=0 bytes_invalid=0 send_seq=103 receive_seq=103 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999390 adj=31998917 coil_temp=28.7 refs=0 mcu_temp=29.46 supply_voltage=3.002 sysload=0.27 cputime=18.231 memavail=3293040 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042618.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=9143 bytes_read=14663 bytes_retransmit=9 bytes_invalid=0 send_seq=440 receive_seq=440 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002337 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1104 bytes_read=6653 bytes_retransmit=0 bytes_invalid=0 send_seq=159 receive_seq=159 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999145 adj=49998269 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2669 bytes_read=10655 bytes_retransmit=0 bytes_invalid=0 send_seq=271 receive_seq=271 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999664 adj=47998959  Spider: temp=46.1 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=621 bytes_read=18064 bytes_retransmit=0 bytes_invalid=0 send_seq=104 receive_seq=104 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999388 adj=31998920 coil_temp=28.7 refs=0 mcu_temp=29.46 supply_voltage=3.002 sysload=0.24 cputime=18.260 memavail=3293040 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042619.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=9253 bytes_read=14875 bytes_retransmit=9 bytes_invalid=0 send_seq=445 receive_seq=445 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002334 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1110 bytes_read=6669 bytes_retransmit=0 bytes_invalid=0 send_seq=160 receive_seq=160 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999144 adj=49998247 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2675 bytes_read=10772 bytes_retransmit=0 bytes_invalid=0 send_seq=272 receive_seq=272 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999667 adj=47998932  Spider: temp=46.1 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=627 bytes_read=18420 bytes_retransmit=0 bytes_invalid=0 send_seq=105 receive_seq=105 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999389 adj=31998928 coil_temp=28.7 refs=0 mcu_temp=29.45 supply_voltage=3.002 sysload=0.24 cputime=18.321 memavail=3293044 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042620.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=9259 bytes_read=15023 bytes_retransmit=9 bytes_invalid=0 send_seq=446 receive_seq=446 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002331 rpi: mcu_awake=0.000 mcu_task_avg=0.000008 mcu_task_stddev=0.000015 bytes_write=1116 bytes_read=6698 bytes_retransmit=0 bytes_invalid=0 send_seq=161 receive_seq=161 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999149 adj=49998307 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2687 bytes_read=10891 bytes_retransmit=0 bytes_invalid=0 send_seq=274 receive_seq=274 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999667 adj=47998999  Spider: temp=46.2 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=633 bytes_read=18776 bytes_retransmit=0 bytes_invalid=0 send_seq=106 receive_seq=106 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999390 adj=31998957 coil_temp=28.7 refs=0 mcu_temp=29.45 supply_voltage=3.002 sysload=0.24 cputime=18.376 memavail=3293044 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042621.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=9317 bytes_read=15181 bytes_retransmit=9 bytes_invalid=0 send_seq=449 receive_seq=449 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002340 rpi: mcu_awake=0.000 mcu_task_avg=0.000008 mcu_task_stddev=0.000015 bytes_write=1122 bytes_read=6714 bytes_retransmit=0 bytes_invalid=0 send_seq=162 receive_seq=162 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999152 adj=49998420 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2693 bytes_read=11023 bytes_retransmit=0 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999669 adj=47999020  Spider: temp=46.3 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=639 bytes_read=19132 bytes_retransmit=0 bytes_invalid=0 send_seq=107 receive_seq=107 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999395 adj=31998973 coil_temp=28.7 refs=0 mcu_temp=29.45 supply_voltage=3.002 sysload=0.24 cputime=18.432 memavail=3293044 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042622.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=9323 bytes_read=15373 bytes_retransmit=9 bytes_invalid=0 send_seq=450 receive_seq=450 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002351 rpi: mcu_awake=0.000 mcu_task_avg=0.000008 mcu_task_stddev=0.000015 bytes_write=1128 bytes_read=6730 bytes_retransmit=0 bytes_invalid=0 send_seq=163 receive_seq=163 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999157 adj=49998440 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2699 bytes_read=11126 bytes_retransmit=0 bytes_invalid=0 send_seq=276 receive_seq=276 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999678 adj=47999016  Spider: temp=46.2 raspberry_pi: temp=37.0 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.2 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=645 bytes_read=19488 bytes_retransmit=0 bytes_invalid=0 send_seq=108 receive_seq=108 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999395 adj=31999007 coil_temp=28.7 refs=0 mcu_temp=29.46 supply_voltage=3.002 sysload=0.24 cputime=18.489 memavail=3293044 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042623.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=9329 bytes_read=15521 bytes_retransmit=9 bytes_invalid=0 send_seq=451 receive_seq=451 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002357 rpi: mcu_awake=0.000 mcu_task_avg=0.000008 mcu_task_stddev=0.000015 bytes_write=1134 bytes_read=6746 bytes_retransmit=0 bytes_invalid=0 send_seq=164 receive_seq=164 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999183 adj=49998481 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2705 bytes_read=11229 bytes_retransmit=0 bytes_invalid=0 send_seq=277 receive_seq=277 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999677 adj=47999093  Spider: temp=46.1 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=651 bytes_read=19844 bytes_retransmit=0 bytes_invalid=0 send_seq=109 receive_seq=109 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999395 adj=31998986 coil_temp=28.7 refs=0 mcu_temp=29.48 supply_voltage=3.002 sysload=0.22 cputime=18.543 memavail=3292804 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042624.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=9387 bytes_read=15694 bytes_retransmit=9 bytes_invalid=0 send_seq=454 receive_seq=454 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002343 rpi: mcu_awake=0.000 mcu_task_avg=0.000008 mcu_task_stddev=0.000015 bytes_write=1140 bytes_read=6762 bytes_retransmit=0 bytes_invalid=0 send_seq=165 receive_seq=165 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999169 adj=49998739 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2711 bytes_read=11375 bytes_retransmit=0 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999670 adj=47999047  Spider: temp=46.1 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=657 bytes_read=20200 bytes_retransmit=0 bytes_invalid=0 send_seq=110 receive_seq=110 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999391 adj=31998966 coil_temp=28.7 refs=0 mcu_temp=29.48 supply_voltage=3.002 sysload=0.22 cputime=18.570 memavail=3292808 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042625.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=9393 bytes_read=15886 bytes_retransmit=9 bytes_invalid=0 send_seq=455 receive_seq=455 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002332 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000017 bytes_write=1146 bytes_read=6791 bytes_retransmit=0 bytes_invalid=0 send_seq=166 receive_seq=166 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999157 adj=49998577 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2717 bytes_read=11478 bytes_retransmit=0 bytes_invalid=0 send_seq=279 receive_seq=279 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999666 adj=47999021  Spider: temp=46.1 raspberry_pi: temp=37.5 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=663 bytes_read=20556 bytes_retransmit=0 bytes_invalid=0 send_seq=111 receive_seq=111 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999389 adj=31998956 coil_temp=28.7 refs=0 mcu_temp=29.48 supply_voltage=3.002 sysload=0.22 cputime=18.599 memavail=3292556 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042626.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=9399 bytes_read=16034 bytes_retransmit=9 bytes_invalid=0 send_seq=456 receive_seq=456 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002319 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000017 bytes_write=1152 bytes_read=6807 bytes_retransmit=0 bytes_invalid=0 send_seq=167 receive_seq=167 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999147 adj=49998467 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2723 bytes_read=11596 bytes_retransmit=0 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999666 adj=47999017  Spider: temp=46.2 raspberry_pi: temp=37.5 sht36: temp=29.9 chamber: temp=27.2 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=669 bytes_read=20912 bytes_retransmit=0 bytes_invalid=0 send_seq=112 receive_seq=112 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999386 adj=31998966 coil_temp=28.7 refs=0 mcu_temp=29.48 supply_voltage=3.002 sysload=0.22 cputime=18.627 memavail=3292308 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042627.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=9405 bytes_read=16182 bytes_retransmit=9 bytes_invalid=0 send_seq=457 receive_seq=457 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002305 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000017 bytes_write=1158 bytes_read=6823 bytes_retransmit=0 bytes_invalid=0 send_seq=168 receive_seq=168 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999138 adj=49998410 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2729 bytes_read=11713 bytes_retransmit=0 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999661 adj=47999051  Spider: temp=46.2 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=675 bytes_read=21268 bytes_retransmit=0 bytes_invalid=0 send_seq=113 receive_seq=113 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999383 adj=31998961 coil_temp=28.7 refs=0 mcu_temp=29.50 supply_voltage=3.002 sysload=0.22 cputime=18.654 memavail=3292312 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042628.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000007 mcu_task_stddev=0.000012 bytes_write=9463 bytes_read=16384 bytes_retransmit=9 bytes_invalid=0 send_seq=460 receive_seq=460 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002295 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000017 bytes_write=1164 bytes_read=6839 bytes_retransmit=0 bytes_invalid=0 send_seq=169 receive_seq=169 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999129 adj=49998309 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2735 bytes_read=11816 bytes_retransmit=0 bytes_invalid=0 send_seq=282 receive_seq=282 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999656 adj=47998974  Spider: temp=46.0 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=681 bytes_read=21624 bytes_retransmit=0 bytes_invalid=0 send_seq=114 receive_seq=114 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999382 adj=31998917 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.21 cputime=18.684 memavail=3291836 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.6 pwm=0.000
Stats 1042629.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=9521 bytes_read=16557 bytes_retransmit=9 bytes_invalid=0 send_seq=463 receive_seq=463 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002300 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000017 bytes_write=1170 bytes_read=6855 bytes_retransmit=0 bytes_invalid=0 send_seq=170 receive_seq=170 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999129 adj=49998285 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2741 bytes_read=11948 bytes_retransmit=0 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999663 adj=47998970  Spider: temp=46.1 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=687 bytes_read=21980 bytes_retransmit=0 bytes_invalid=0 send_seq=115 receive_seq=115 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999381 adj=31998938 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.21 cputime=18.743 memavail=3291836 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.3 pwm=0.000
Stats 1042630.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=9579 bytes_read=16715 bytes_retransmit=9 bytes_invalid=0 send_seq=466 receive_seq=466 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002303 rpi: mcu_awake=0.000 mcu_task_avg=0.000008 mcu_task_stddev=0.000013 bytes_write=1176 bytes_read=6884 bytes_retransmit=0 bytes_invalid=0 send_seq=171 receive_seq=171 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999130 adj=49998323 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2747 bytes_read=12065 bytes_retransmit=0 bytes_invalid=0 send_seq=284 receive_seq=284 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999667 adj=47999054  Spider: temp=46.1 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=693 bytes_read=22336 bytes_retransmit=0 bytes_invalid=0 send_seq=116 receive_seq=116 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999383 adj=31998924 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.21 cputime=18.802 memavail=3291836 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042631.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=9637 bytes_read=16917 bytes_retransmit=9 bytes_invalid=0 send_seq=469 receive_seq=469 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002326 rpi: mcu_awake=0.000 mcu_task_avg=0.000008 mcu_task_stddev=0.000013 bytes_write=1182 bytes_read=6900 bytes_retransmit=0 bytes_invalid=0 send_seq=172 receive_seq=172 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999131 adj=49998363 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2753 bytes_read=12168 bytes_retransmit=0 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999669 adj=47999092  Spider: temp=46.0 raspberry_pi: temp=38.0 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=699 bytes_read=22692 bytes_retransmit=0 bytes_invalid=0 send_seq=117 receive_seq=117 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999383 adj=31998948 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.21 cputime=18.861 memavail=3291836 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.8 pwm=0.000
Stats 1042632.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=9643 bytes_read=17065 bytes_retransmit=9 bytes_invalid=0 send_seq=470 receive_seq=470 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002329 rpi: mcu_awake=0.000 mcu_task_avg=0.000008 mcu_task_stddev=0.000013 bytes_write=1188 bytes_read=6916 bytes_retransmit=0 bytes_invalid=0 send_seq=173 receive_seq=173 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999134 adj=49998337 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2759 bytes_read=12286 bytes_retransmit=0 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999671 adj=47999026  Spider: temp=46.1 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=705 bytes_read=23048 bytes_retransmit=0 bytes_invalid=0 send_seq=118 receive_seq=118 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999383 adj=31998910 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.21 cputime=18.914 memavail=3291840 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042633.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000010 bytes_write=9753 bytes_read=17233 bytes_retransmit=9 bytes_invalid=0 send_seq=475 receive_seq=475 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002326 rpi: mcu_awake=0.000 mcu_task_avg=0.000008 mcu_task_stddev=0.000013 bytes_write=1194 bytes_read=6932 bytes_retransmit=0 bytes_invalid=0 send_seq=174 receive_seq=174 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999134 adj=49998396 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2765 bytes_read=12403 bytes_retransmit=0 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999672 adj=47999050  Spider: temp=46.1 raspberry_pi: temp=37.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=711 bytes_read=23404 bytes_retransmit=0 bytes_invalid=0 send_seq=119 receive_seq=119 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999383 adj=31998920 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.19 cputime=18.976 memavail=3291840 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042634.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000008 mcu_task_stddev=0.000015 bytes_write=9759 bytes_read=17440 bytes_retransmit=9 bytes_invalid=0 send_seq=476 receive_seq=476 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002316 rpi: mcu_awake=0.000 mcu_task_avg=0.000008 mcu_task_stddev=0.000013 bytes_write=1200 bytes_read=6948 bytes_retransmit=0 bytes_invalid=0 send_seq=175 receive_seq=175 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999127 adj=49998433 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2771 bytes_read=12520 bytes_retransmit=0 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999666 adj=47999069  Spider: temp=46.1 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=717 bytes_read=23760 bytes_retransmit=0 bytes_invalid=0 send_seq=120 receive_seq=120 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999381 adj=31998939 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.19 cputime=19.003 memavail=3291844 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.4 pwm=0.000
Stats 1042635.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000008 mcu_task_stddev=0.000015 bytes_write=9817 bytes_read=17598 bytes_retransmit=9 bytes_invalid=0 send_seq=479 receive_seq=479 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002306 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1206 bytes_read=6977 bytes_retransmit=0 bytes_invalid=0 send_seq=176 receive_seq=176 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999121 adj=49998394 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2777 bytes_read=12638 bytes_retransmit=0 bytes_invalid=0 send_seq=289 receive_seq=289 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999662 adj=47999033  Spider: temp=46.2 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=723 bytes_read=24116 bytes_retransmit=0 bytes_invalid=0 send_seq=121 receive_seq=121 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999379 adj=31998950 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.19 cputime=19.033 memavail=3291844 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042636.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000008 mcu_task_stddev=0.000015 bytes_write=9823 bytes_read=17746 bytes_retransmit=9 bytes_invalid=0 send_seq=480 receive_seq=480 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002299 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1212 bytes_read=6993 bytes_retransmit=0 bytes_invalid=0 send_seq=177 receive_seq=177 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999117 adj=49998377 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2783 bytes_read=12755 bytes_retransmit=0 bytes_invalid=0 send_seq=290 receive_seq=290 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999658 adj=47999018  Spider: temp=46.0 raspberry_pi: temp=38.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=729 bytes_read=24472 bytes_retransmit=0 bytes_invalid=0 send_seq=122 receive_seq=122 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999377 adj=31998948 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.19 cputime=19.063 memavail=3291844 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042637.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000008 mcu_task_stddev=0.000015 bytes_write=9829 bytes_read=17938 bytes_retransmit=9 bytes_invalid=0 send_seq=481 receive_seq=481 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002295 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1218 bytes_read=7009 bytes_retransmit=0 bytes_invalid=0 send_seq=178 receive_seq=178 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999113 adj=49998380 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2789 bytes_read=12858 bytes_retransmit=0 bytes_invalid=0 send_seq=291 receive_seq=291 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999657 adj=47998996  Spider: temp=46.1 raspberry_pi: temp=38.5 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=735 bytes_read=24828 bytes_retransmit=0 bytes_invalid=0 send_seq=123 receive_seq=123 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999377 adj=31998949 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.19 cputime=19.094 memavail=3291848 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042638.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000008 mcu_task_stddev=0.000015 bytes_write=9835 bytes_read=18086 bytes_retransmit=9 bytes_invalid=0 send_seq=482 receive_seq=482 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002286 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1224 bytes_read=7025 bytes_retransmit=0 bytes_invalid=0 send_seq=179 receive_seq=179 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999110 adj=49998374 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2795 bytes_read=12976 bytes_retransmit=0 bytes_invalid=0 send_seq=292 receive_seq=292 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999653 adj=47999018  Spider: temp=46.1 raspberry_pi: temp=40.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=741 bytes_read=25184 bytes_retransmit=0 bytes_invalid=0 send_seq=124 receive_seq=124 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999375 adj=31998958 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.17 cputime=19.125 memavail=3291848 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042639.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=9841 bytes_read=18243 bytes_retransmit=9 bytes_invalid=0 send_seq=483 receive_seq=483 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002281 rpi: mcu_awake=0.001 mcu_task_avg=0.000009 mcu_task_stddev=0.000016 bytes_write=1230 bytes_read=7041 bytes_retransmit=0 bytes_invalid=0 send_seq=180 receive_seq=180 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999109 adj=49998389 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2801 bytes_read=13107 bytes_retransmit=0 bytes_invalid=0 send_seq=293 receive_seq=293 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999650 adj=47998996  Spider: temp=46.2 raspberry_pi: temp=39.4 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=747 bytes_read=25540 bytes_retransmit=0 bytes_invalid=0 send_seq=125 receive_seq=125 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999374 adj=31998954 coil_temp=28.7 refs=0 mcu_temp=29.49 supply_voltage=3.002 sysload=0.17 cputime=19.167 memavail=3286012 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
Stats 1042640.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000006 mcu_task_stddev=0.000008 bytes_write=9899 bytes_read=18435 bytes_retransmit=9 bytes_invalid=0 send_seq=486 receive_seq=486 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002277 rpi: mcu_awake=0.000 mcu_task_avg=0.000007 mcu_task_stddev=0.000011 bytes_write=1236 bytes_read=7070 bytes_retransmit=0 bytes_invalid=0 send_seq=181 receive_seq=181 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=49999107 adj=49998426 sht36: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000014 bytes_write=2807 bytes_read=13210 bytes_retransmit=0 bytes_invalid=0 send_seq=294 receive_seq=294 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=47999647 adj=47998997  Spider: temp=46.1 raspberry_pi: temp=39.9 sht36: temp=29.9 chamber: temp=27.1 heater_bed: target=0 temp=27.1 pwm=0.000 beacon: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=753 bytes_read=25896 bytes_retransmit=0 bytes_invalid=0 send_seq=126 receive_seq=126 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=31999373 adj=31998954 coil_temp=28.7 refs=0 mcu_temp=29.50 supply_voltage=3.002 sysload=0.17 cputime=19.205 memavail=3290428 print_time=538.081 buffer_time=0.000 print_stall=0 extruder: target=0 temp=32.5 pwm=0.000
